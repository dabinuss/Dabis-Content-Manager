<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib"
                    xmlns:win="clr-namespace:System.Windows;assembly=PresentationFramework"
                    xmlns:core="clr-namespace:DCM.Core.Models;assembly=DCM.Core"
                    xmlns:conv="clr-namespace:DCM.App.Infrastructure.Converters"
                    xmlns:ap="clr-namespace:DCM.App.Infrastructure.AttachedProperties">

  <ResourceDictionary.MergedDictionaries>
    <!-- Visual is merged by Layout -->
    <ResourceDictionary Source="DarkTheme.Layout.xaml"/>
  </ResourceDictionary.MergedDictionaries>

  <conv:IsStringToVisibilityConverter x:Key="IsStringToVisibilityConverter"/>
  <sys:String x:Key="ButtonDefaultIconGlyph">&#xe5d5;</sys:String>

  <!-- =================================================================== -->
  <!-- SHARED RESOURCES (safe dedup, no breaking changes)                    -->
  <!-- =================================================================== -->

  <!-- Validation error template (used by TextBox + ComboBox) -->
  <ControlTemplate x:Key="ValidationErrorTemplate">
    <Grid>
      <AdornedElementPlaceholder x:Name="placeholder"/>
      <Border BorderBrush="{StaticResource DangerBrush}"
              BorderThickness="1"
              CornerRadius="{StaticResource RadiusS}"
              Margin="-1"/>
    </Grid>
  </ControlTemplate>

  <!-- Common button base (no template, just shared setters) -->
  <Style x:Key="ButtonBaseCommon"
         TargetType="Button">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="SnapsToDevicePixels"
            Value="True"/>
  </Style>

  <!-- Common border+content template helper for many buttons -->
  <ControlTemplate x:Key="ButtonTemplateRadiusS"
                   TargetType="Button">
    <Border x:Name="border"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}"
            CornerRadius="{StaticResource RadiusS}"
            Padding="{TemplateBinding Padding}">
      <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
    </Border>
  </ControlTemplate>

  <ControlTemplate x:Key="ButtonTemplateRadiusXL"
                   TargetType="Button">
    <Border x:Name="border"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}"
            CornerRadius="{StaticResource RadiusXL}"
            Padding="{TemplateBinding Padding}">
      <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
    </Border>
  </ControlTemplate>

  <!-- =================================================================== -->
  <!-- COMPONENT STYLES (reusable UI patterns)                               -->
  <!-- =================================================================== -->

  <!-- Sidebar Navigation Button -->
  <Style x:Key="SidebarNavButton"
         TargetType="RadioButton">
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextMutedBrush}"/>
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="Padding"
            Value="{StaticResource SidebarItemPadding}"/>
    <Setter Property="Margin"
            Value="{StaticResource SidebarItemMargin}"/>
    <Setter Property="MinHeight"
            Value="58"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="RadioButton">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderThickness="0"
                  BorderBrush="Transparent"
                  CornerRadius="{StaticResource RadiusL}"
                  Padding="{TemplateBinding Padding}">
            <Grid>
              <Border x:Name="activeIndicator"
                      Width="3"
                      Height="28"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Center"
                      Background="{StaticResource PrimaryBrush}"
                      CornerRadius="2"
                      Opacity="0"/>
              <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="Center"/>
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextSecondaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SidebarHoverBrush}"/>
            </Trigger>
            <Trigger Property="IsChecked"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextPrimaryBrush}"/>
              <Setter TargetName="activeIndicator"
                      Property="Opacity"
                      Value="1"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SidebarHoverBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- NEW: Sidebar section header (non-clickable) -->
  <Style x:Key="SidebarNavSectionHeader"
         TargetType="TextBlock">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeXS}"/>
    <Setter Property="FontWeight"
            Value="{StaticResource FontWeightSemiBold}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextMutedBrush}"/>
    <Setter Property="Margin"
            Value="12,12,12,6"/>
    <Setter Property="Text"
            Value="SECTION"/>
  </Style>

  <!-- NEW: Sidebar sub navigation button (always visible, indented) -->
  <Style x:Key="SidebarNavSubButton"
         TargetType="RadioButton"
         BasedOn="{StaticResource SidebarNavButton}">
    <Setter Property="Padding"
            Value="6,10"/>
    <Setter Property="Margin"
            Value="6,4"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="RadioButton">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderThickness="1,0,0,0"
                  BorderBrush="Transparent"
                  CornerRadius="{StaticResource RadiusL}"
                  Padding="{TemplateBinding Padding}">
            <Grid>

              <ContentPresenter Grid.Column="1"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="Center"/>
            </Grid>
          </Border>

          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextSecondaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SidebarHoverBrush}"/>
            </Trigger>

            <Trigger Property="IsChecked"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextPrimaryBrush}"/>
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SidebarHoverBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- Top Navigation: Main Menu Button -->
  <Style x:Key="TopNavMainButton"
         TargetType="RadioButton">
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextMutedBrush}"/>
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="0,0,1,0"/>
    <Setter Property="Padding"
            Value="18,0"/>
    <Setter Property="Margin"
            Value="0"/>
    <Setter Property="MinWidth"
            Value="160"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="RadioButton">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}">
            <Grid>
              <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
              <Border x:Name="activeMarker"
                      Height="2"
                      Background="{StaticResource PrimaryBrush}"
                      VerticalAlignment="Bottom"
                      Opacity="0"/>
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextSecondaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfaceHoverBrush}"/>
            </Trigger>
            <Trigger Property="IsChecked"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextPrimaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfacePressedBrush}"/>
              <Setter TargetName="activeMarker"
                      Property="Opacity"
                      Value="1"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- Top Navigation: Sub Menu Button -->
  <Style x:Key="TopNavSubButton"
         TargetType="RadioButton">
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextMutedBrush}"/>
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeS}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="0,0,1,0"/>
    <Setter Property="Padding"
            Value="14,0"/>
    <Setter Property="MinHeight"
            Value="28"/>
    <Setter Property="MinWidth"
            Value="96"/>
    <Setter Property="Margin"
            Value="0"/>
    <Setter Property="VerticalAlignment"
            Value="Stretch"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="RadioButton">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}">
            <Grid>
              <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                Margin="{TemplateBinding Padding}"/>
              <Border x:Name="activeMarker"
                      Height="2"
                      Background="{StaticResource PrimaryBrush}"
                      VerticalAlignment="Bottom"
                      Opacity="0"/>
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextSecondaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfaceHoverBrush}"/>
            </Trigger>
            <Trigger Property="IsChecked"
                     Value="True">
              <Setter Property="Foreground"
                      Value="{StaticResource TextPrimaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfacePressedBrush}"/>
              <Setter TargetName="activeMarker"
                      Property="Opacity"
                      Value="1"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- DROP ZONE STYLES -->

  <!-- Video Drop Zone Style (mit echtem dashed Rahmen, nicht skaliert) -->
  <Style x:Key="VideoDropZoneStyle"
         TargetType="ContentControl">
    <Setter Property="Background"
            Value="{StaticResource InputFocusBrush}"/>
    <Setter Property="MinHeight"
            Value="120"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="AllowDrop"
            Value="True"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ContentControl">
          <Grid SnapsToDevicePixels="True">

            <!-- Hintergrund + CornerRadius -->
            <Border Background="{TemplateBinding Background}"
                    CornerRadius="{StaticResource RadiusL}">
              <ContentPresenter/>
            </Border>

            <!-- Dashed Overlay Border -->
            <Rectangle IsHitTestVisible="False"
                       Margin="1"
                       RadiusX="8"
                       RadiusY="8"
                       Stroke="{StaticResource BorderBrush}"
                       StrokeThickness="2"
                       StrokeDashArray="6 4"
                       SnapsToDevicePixels="True"/>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- Thumbnail Drop Zone Style -->
  <Style x:Key="ThumbnailDropZoneStyle"
         TargetType="Border">
    <Setter Property="Background"
            Value="{StaticResource InputFocusBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="2"/>
    <Setter Property="CornerRadius"
            Value="{StaticResource RadiusM}"/>
    <Setter Property="HorizontalAlignment"
            Value="Stretch"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="AllowDrop"
            Value="True"/>
  </Style>

  <!-- =================================================================== -->
  <!-- SUGGESTION OVERLAY (UploadView)                                      -->
  <!-- =================================================================== -->

  <Style x:Key="SuggestionCloseButtonStyle"
         TargetType="Button"
         BasedOn="{StaticResource ButtonBaseCommon}">
    <Setter Property="Width"
            Value="32"/>
    <Setter Property="Height"
            Value="24"/>
    <Setter Property="Padding"
            Value="0"/>
    <Setter Property="FontFamily"
            Value="{StaticResource MaterialIconsFont}"/>
    <Setter Property="FontSize"
            Value="12"/>
    <Setter Property="Foreground"
            Value="{StaticResource DangerBrush}"/>
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template"
            Value="{StaticResource ButtonTemplateRadiusS}"/>
    <Style.Triggers>
      <!-- Using style triggers is safe here because we don't need to target named elements -->
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource DangerBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource PrimaryTextBrush}"/>
      </Trigger>
      <Trigger Property="IsPressed"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource AccentRedHoverBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource PrimaryTextBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <Style x:Key="SuggestionItemButtonStyle"
         TargetType="Button"
         BasedOn="{StaticResource ButtonBaseCommon}">
    <Setter Property="Background"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="Padding"
            Value="10,8"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Left"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template"
            Value="{StaticResource ButtonTemplatePill}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="BorderBrush"
                Value="{StaticResource BorderHoverBrush}"/>
        <Setter Property="Background"
                Value="{StaticResource SurfaceHoverBrush}"/>
      </Trigger>
      <Trigger Property="IsPressed"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfacePressedBrush}"/>
      </Trigger>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter Property="Opacity"
                Value="0.6"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- PLATFORM TOGGLE BUTTON -->
  <Style x:Key="PlatformToggleButton"
         TargetType="ToggleButton">
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="Margin"
            Value="0,0,8,0"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ToggleButton">
          <Border x:Name="PlatformBorder"
                  Width="90"
                  Height="60"
                  CornerRadius="{StaticResource RadiusM}"
                  BorderThickness="2"
                  BorderBrush="{StaticResource BorderBrush}"
                  Background="{StaticResource SurfaceBrush}">
            <Grid>
              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
              <Border x:Name="CheckOverlay"
                      Background="#2000FF00"
                      CornerRadius="{StaticResource RadiusM}"
                      Visibility="Collapsed">
                <TextBlock Text="OK"
                           FontSize="{StaticResource FontSizeL}"
                           FontWeight="Bold"
                           Foreground="{StaticResource SuccessBrush}"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Top"
                           Margin="0,4,6,0"/>
              </Border>
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsChecked"
                     Value="True">
              <Setter TargetName="PlatformBorder"
                      Property="BorderBrush"
                      Value="{StaticResource SuccessBrush}"/>
              <Setter TargetName="PlatformBorder"
                      Property="Background"
                      Value="#1A4CAF50"/>
              <Setter TargetName="CheckOverlay"
                      Property="Visibility"
                      Value="Visible"/>
            </Trigger>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="PlatformBorder"
                      Property="Background"
                      Value="{StaticResource SurfaceLightBrush}"/>
            </Trigger>
            <Trigger Property="IsEnabled"
                     Value="False">
              <Setter Property="Opacity"
                      Value="0.4"/>
              <Setter Property="Cursor"
                      Value="Arrow"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- =================================================================== -->
  <!-- BUTTON STYLES                                                       -->
  <!-- =================================================================== -->

  <ControlTemplate x:Key="ButtonTemplatePill"
                   TargetType="Button">
    <Border x:Name="outerBorder"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}"
            CornerRadius="4"
            Padding="{TemplateBinding Padding}">
      <Grid>
        <Grid x:Name="IconTextLayout"
              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
              VerticalAlignment="Center"
              Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, Converter={StaticResource IsStringToVisibilityConverter}}">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
          <TextBlock Grid.Column="0"
                     FontFamily="{StaticResource MaterialIconsFont}"
                     FontSize="{StaticResource FontSizeL}"
                     Foreground="{TemplateBinding Foreground}"
                     Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(ap:ButtonIcon.Glyph)}"
                     Margin="0,0,6,0"
                     VerticalAlignment="Center"/>
          <TextBlock Grid.Column="1"
                     Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"
                     Foreground="{TemplateBinding Foreground}"
                     VerticalAlignment="Center"/>
        </Grid>
        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                          Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, Converter={StaticResource IsStringToVisibilityConverter}, ConverterParameter=invert}"/>
      </Grid>
    </Border>
  </ControlTemplate>

  <!-- Primary Button -->
  <Style x:Key="PrimaryButton"
         TargetType="Button"
         BasedOn="{StaticResource ButtonBaseCommon}">
    <Setter Property="HorizontalAlignment"
            Value="Left"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource PrimaryBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource PrimaryTextBrush}"/>
    <Setter Property="FontWeight"
            Value="{StaticResource FontWeightSemiBold}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource PrimaryPressedBrush}"/>
    <Setter Property="Padding"
            Value="16,5"/>
    <Setter Property="MinHeight"
            Value="30"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template"
            Value="{StaticResource ButtonTemplatePill}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource PrimaryHoverBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource PrimaryHoverBrush}"/>
      </Trigger>
      <Trigger Property="IsPressed"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource PrimaryPressedBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource PrimaryPressedBrush}"/>
      </Trigger>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter Property="Background"
                Value="{StaticResource DisabledBackgroundBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource DisabledBorderBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource TextDisabledBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- Secondary Button -->
  <Style x:Key="SecondaryButton"
         TargetType="Button"
         BasedOn="{StaticResource ButtonBaseCommon}">
    <Setter Property="HorizontalAlignment"
            Value="Left"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource SurfaceLightBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderStrongBrush}"/>
    <Setter Property="Padding"
            Value="14,5"/>
    <Setter Property="MinHeight"
            Value="30"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template"
            Value="{StaticResource ButtonTemplatePill}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource BorderHoverBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource BorderStrongBrush}"/>
      </Trigger>
      <Trigger Property="IsPressed"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfacePressedBrush}"/>
      </Trigger>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter Property="Background"
                Value="{StaticResource DisabledBackgroundBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource DisabledBorderBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource TextDisabledBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- Danger Button -->
  <Style x:Key="DangerButton"
         TargetType="Button"
         BasedOn="{StaticResource ButtonBaseCommon}">
    <Setter Property="HorizontalAlignment"
            Value="Left"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource DangerBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource PrimaryTextBrush}"/>
    <Setter Property="FontWeight"
            Value="{StaticResource FontWeightSemiBold}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource AccentRedBrush}"/>
    <Setter Property="Padding"
            Value="16,5"/>
    <Setter Property="MinHeight"
            Value="30"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template"
            Value="{StaticResource ButtonTemplatePill}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource AccentRedHoverBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource AccentRedHoverBrush}"/>
      </Trigger>
      <Trigger Property="IsPressed"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource AccentRedBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource AccentRedBrush}"/>
      </Trigger>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter Property="Background"
                Value="{StaticResource DisabledBackgroundBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource DisabledBorderBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource TextDisabledBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- Accent Button (Pill-Style mit Rand) -->
  <Style x:Key="AccentButton"
         TargetType="Button"
         BasedOn="{StaticResource ButtonBaseCommon}">
    <Setter Property="HorizontalAlignment"
            Value="Left"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource SurfaceBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="Padding"
            Value="14,5"/>
    <Setter Property="MinHeight"
            Value="30"/>
    <Setter Property="HorizontalContentAlignment"
            Value="Center"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template"
            Value="{StaticResource ButtonTemplatePill}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfaceLightBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource AccentRedBrush}"/>
      </Trigger>
      <Trigger Property="IsPressed"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource InputBackgroundBrush}"/>
      </Trigger>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter Property="Background"
                Value="{StaticResource DisabledBackgroundBrush}"/>
        <Setter Property="BorderBrush"
                Value="{StaticResource DisabledBorderBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource TextDisabledBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- =================================================================== -->
  <!-- GROUPBOX / CARDS                                                    -->
  <!-- =================================================================== -->

  <!-- MODERN GROUPBOX (Card Style) -->
  <Style x:Key="ModernGroupBox"
         TargetType="GroupBox">
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="BorderBrush"
            Value="Transparent"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="Padding"
            Value="{StaticResource GroupBoxPadding}"/>
    <Setter Property="Margin"
            Value="{StaticResource GroupBoxMargin}"/>

    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="GroupBox">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

              <!-- Header -->
              <TextBlock Text="{TemplateBinding Header}"
                         Style="{StaticResource SectionHeader}"
                         Margin="{StaticResource SpacingVerticalM}"/>

            <!-- Inhalt + Border -->
            <Border x:Name="PART_Border"
                    Grid.Row="1"
                    Background="{StaticResource SurfaceElevatedBrush}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{StaticResource RadiusM}"
                    Padding="{TemplateBinding Padding}">
              <ContentPresenter/>
            </Border>
          </Grid>

          <!-- TRIGGERS -->
          <ControlTemplate.Triggers>
            <!-- 1) HOVER -->
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="PART_Border"
                      Property="BorderBrush"
                      Value="{StaticResource BorderStrongBrush}"/>
            </Trigger>

            <!-- 2) FOCUS IM INHALT (TextBox, ComboBox, etc.) -->
            <Trigger Property="IsKeyboardFocusWithin"
                     Value="True">
              <Setter TargetName="PART_Border"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
              <Setter TargetName="PART_Border"
                      Property="BorderThickness"
                      Value="1"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style x:Key="SurfaceCard"
         TargetType="Border">
    <Setter Property="Background"
            Value="{StaticResource SurfaceElevatedBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="CornerRadius"
            Value="{StaticResource RadiusL}"/>
    <Setter Property="Padding"
            Value="{StaticResource SpacingAllL}"/>
  </Style>

  <!-- GroupBox (basiert auf ModernGroupBox) -->
  <Style TargetType="GroupBox"
         BasedOn="{StaticResource ModernGroupBox}"/>

  <Style x:Key="SettingsSectionGroupBox"
         TargetType="GroupBox"
         BasedOn="{StaticResource ModernGroupBox}">
    <Setter Property="Margin"
            Value="{StaticResource SettingsSectionSpacing}"/>
  </Style>

  <Style x:Key="SettingsSectionGroupBox.Compact"
         TargetType="GroupBox"
         BasedOn="{StaticResource ModernGroupBox}">
    <Setter Property="Margin"
            Value="{StaticResource SettingsSectionSpacingCompact}"/>
  </Style>

  <Style x:Key="SettingsColumnStackStyle"
         TargetType="StackPanel">
    <Setter Property="VerticalAlignment"
            Value="Top"/>
  </Style>

  <!-- =================================================================== -->
  <!-- GLOBAL DEFAULT STYLES                                               -->
  <!-- =================================================================== -->

  <!-- Window -->
  <Style TargetType="Window">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource BackgroundBrush}"/>
  </Style>

  <!-- TextBlock -->
  <Style TargetType="TextBlock">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
  </Style>

  <!-- Label -->
  <Style TargetType="Label">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextSecondaryBrush}"/>
    <Setter Property="Padding"
            Value="0"/>
    <Setter Property="VerticalAlignment"
            Value="Center"/>
  </Style>

  <!-- =================================================================== -->
  <!-- INPUT CONTROLS                                                      -->
  <!-- =================================================================== -->

  <!-- TextBox mit Error-State -->
  <Style TargetType="TextBox">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="Padding"
            Value="10,6"/>
    <Setter Property="CaretBrush"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="SelectionBrush"
            Value="{StaticResource PrimaryBrush}"/>
    <Setter Property="SnapsToDevicePixels"
            Value="True"/>
    <Setter Property="TextWrapping"
            Value="Wrap"/>
    <Setter Property="VerticalScrollBarVisibility"
            Value="Disabled"/>
    <Setter Property="MinHeight"
            Value="34"/>
    <Setter Property="Height"
            Value="Auto"/>
    <Setter Property="Validation.ErrorTemplate"
            Value="{StaticResource ValidationErrorTemplate}"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="TextBox">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="{StaticResource RadiusM}">
            <ScrollViewer x:Name="PART_ContentHost"
                          Margin="{TemplateBinding Padding}"
                          VerticalScrollBarVisibility="{TemplateBinding VerticalScrollBarVisibility}"/>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource BorderHoverBrush}"/>
            </Trigger>
            <Trigger Property="IsFocused"
                     Value="True">
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource InputFocusBrush}"/>
            </Trigger>
            <Trigger Property="IsReadOnly"
                     Value="True">
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfaceBrush}"/>
              <Setter Property="Foreground"
                      Value="{StaticResource TextSecondaryBrush}"/>
            </Trigger>
            <Trigger Property="IsEnabled"
                     Value="False">
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource DisabledBackgroundBrush}"/>
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource DisabledBorderBrush}"/>
              <Setter Property="Foreground"
                      Value="{StaticResource TextDisabledBrush}"/>
            </Trigger>
            <Trigger Property="Validation.HasError"
                     Value="True">
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource DangerBrush}"/>
              <Setter TargetName="border"
                      Property="BorderThickness"
                      Value="1"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- ComboBox mit Error-State -->
  <Style TargetType="ComboBox">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="Padding"
            Value="10,6"/>
    <Setter Property="MinHeight"
            Value="34"/>
    <Setter Property="SnapsToDevicePixels"
            Value="True"/>
    <Setter Property="Validation.ErrorTemplate"
            Value="{StaticResource ValidationErrorTemplate}"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ComboBox">
          <Grid>
            <Border x:Name="Border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{StaticResource RadiusM}">
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <ContentPresenter x:Name="ContentSite"
                                  Grid.Column="0"
                                  Content="{TemplateBinding SelectionBoxItem}"
                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                  Margin="10,0,0,0"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Left"
                                  IsHitTestVisible="False"/>

                <TextBox x:Name="PART_EditableTextBox"
                         Grid.Column="0"
                         Visibility="Hidden"
                         IsReadOnly="{TemplateBinding IsReadOnly}"
                         Background="Transparent"
                         Foreground="{StaticResource TextPrimaryBrush}"
                         CaretBrush="{StaticResource TextPrimaryBrush}"
                         BorderThickness="0"
                         Margin="10,0,0,0"
                         VerticalAlignment="Center"/>

                <TextBlock Grid.Column="1"
                           Style="{StaticResource IconL}"
                           Text="&#xe313;"
                           Margin="0,0,6,0"
                           VerticalAlignment="Center"/>
              </Grid>
            </Border>

            <ToggleButton x:Name="ToggleButton"
                          Focusable="False"
                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                          ClickMode="Press"
                          Background="Transparent"
                          BorderThickness="0"
                          Opacity="0"/>

            <Popup x:Name="Popup"
                   Placement="Bottom"
                   IsOpen="{TemplateBinding IsDropDownOpen}"
                   AllowsTransparency="True"
                   Focusable="False"
                   PopupAnimation="Slide">
              <Grid x:Name="DropDown"
                    SnapsToDevicePixels="True"
                    MinWidth="{TemplateBinding ActualWidth}"
                    MaxHeight="{TemplateBinding MaxDropDownHeight}">
                <Border x:Name="DropDownBorder"
                        Background="{StaticResource SurfaceBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="{StaticResource RadiusS}"
                        Margin="0,2,0,0">
                  <ScrollViewer Margin="4"
                                SnapsToDevicePixels="True">
                    <StackPanel IsItemsHost="True"
                                KeyboardNavigation.DirectionalNavigation="Contained"/>
                  </ScrollViewer>
                </Border>
              </Grid>
            </Popup>
          </Grid>

          <ControlTemplate.Triggers>
            <Trigger Property="IsEditable"
                     Value="True">
              <Setter TargetName="PART_EditableTextBox"
                      Property="Visibility"
                      Value="Visible"/>
              <Setter TargetName="ContentSite"
                      Property="Visibility"
                      Value="Hidden"/>
            </Trigger>

            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="Border"
                      Property="BorderBrush"
                      Value="{StaticResource TextMutedBrush}"/>
            </Trigger>

            <Trigger Property="IsDropDownOpen"
                     Value="True">
              <Setter TargetName="Border"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
              <Setter TargetName="Border"
                      Property="Background"
                      Value="{StaticResource InputFocusBrush}"/>
            </Trigger>

            <Trigger Property="IsEnabled"
                     Value="False">
              <Setter TargetName="Border"
                      Property="Background"
                      Value="{StaticResource DisabledBackgroundBrush}"/>
              <Setter TargetName="Border"
                      Property="BorderBrush"
                      Value="{StaticResource DisabledBorderBrush}"/>
              <Setter Property="Foreground"
                      Value="{StaticResource TextDisabledBrush}"/>
            </Trigger>

            <Trigger Property="Validation.HasError"
                     Value="True">
              <Setter TargetName="Border"
                      Property="BorderBrush"
                      Value="{StaticResource DangerBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- ComboBoxItem -->
  <Style TargetType="ComboBoxItem">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="Padding"
            Value="8,6"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="SnapsToDevicePixels"
            Value="True"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ComboBoxItem">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  Padding="{TemplateBinding Padding}"
                  CornerRadius="2">
            <ContentPresenter/>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted"
                     Value="True">
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfaceLightBrush}"/>
            </Trigger>
            <Trigger Property="IsSelected"
                     Value="True">
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource SurfaceLightBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- DatePicker -->
  <Style TargetType="DatePicker">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="Background"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="Padding"
            Value="2"/>
    <Setter Property="IsTodayHighlighted"
            Value="True"/>
    <Setter Property="SelectedDateFormat"
            Value="Short"/>
    <Setter Property="CalendarStyle">
      <Setter.Value>
        <Style TargetType="Calendar">
          <Setter Property="Background"
                  Value="{StaticResource SurfaceBrush}"/>
          <Setter Property="Foreground"
                  Value="{StaticResource TextPrimaryBrush}"/>
          <Setter Property="BorderBrush"
                  Value="{StaticResource BorderBrush}"/>
        </Style>
      </Setter.Value>
    </Setter>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="DatePicker">
          <Border x:Name="border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="{StaticResource RadiusS}"
                  Padding="{TemplateBinding Padding}">
            <Grid x:Name="PART_Root">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="32"/>
              </Grid.ColumnDefinitions>
              <DatePickerTextBox x:Name="PART_TextBox"
                                 Grid.Column="0"
                                 Focusable="{TemplateBinding Focusable}"
                                 VerticalAlignment="Center"/>
              <ToggleButton x:Name="PART_Button"
                            Grid.Column="1"
                            Focusable="False"
                            Background="Transparent"
                            BorderBrush="{x:Null}"
                            BorderThickness="0"
                            Padding="0"
                            IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                <TextBlock Style="{StaticResource IconXL}"
                           Text="&#xebcc;"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
              </ToggleButton>
              <Popup x:Name="PART_Popup"
                     PlacementTarget="{Binding ElementName=PART_Button}"
                     Placement="Bottom"
                     StaysOpen="False"
                     AllowsTransparency="True"
                     IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}">
                <Border Background="{StaticResource SurfaceBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="{StaticResource RadiusS}">
                  <Calendar x:Name="PART_Calendar"
                            Style="{TemplateBinding CalendarStyle}"
                            BorderThickness="0"
                            IsTodayHighlighted="{TemplateBinding IsTodayHighlighted}"
                            DisplayDateStart="{TemplateBinding DisplayDateStart}"
                            DisplayDateEnd="{TemplateBinding DisplayDateEnd}"
                            FirstDayOfWeek="{TemplateBinding FirstDayOfWeek}"
                            DisplayDate="{Binding DisplayDate, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                            SelectedDate="{Binding SelectedDate, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"/>
                </Border>
              </Popup>
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource TextMutedBrush}"/>
            </Trigger>
            <Trigger Property="IsKeyboardFocusWithin"
                     Value="True">
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
            </Trigger>
            <Trigger Property="IsEnabled"
                     Value="False">
              <Setter TargetName="border"
                      Property="Background"
                      Value="{StaticResource DisabledBackgroundBrush}"/>
              <Setter TargetName="border"
                      Property="BorderBrush"
                      Value="{StaticResource DisabledBorderBrush}"/>
              <Setter Property="Foreground"
                      Value="{StaticResource TextDisabledBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- DatePickerTextBox -->
  <Style TargetType="DatePickerTextBox">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="CaretBrush"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="Padding"
            Value="6,4"/>
    <Setter Property="Focusable"
            Value="True"/>
    <Setter Property="FocusVisualStyle"
            Value="{x:Null}"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="DatePickerTextBox">
          <Grid>
            <ScrollViewer x:Name="PART_ContentHost"
                          HorizontalScrollBarVisibility="Hidden"
                          VerticalScrollBarVisibility="Hidden"
                          VerticalAlignment="Center"
                          Margin="{TemplateBinding Padding}"/>
            <TextBlock x:Name="PART_Watermark"
                       Text="Datum waehlen..."
                       Foreground="{StaticResource TextMutedBrush}"
                       Visibility="Collapsed"
                       VerticalAlignment="Center"
                       Margin="{TemplateBinding Padding}"
                       IsHitTestVisible="False"/>
          </Grid>
          <ControlTemplate.Triggers>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="Text"
                           Value=""/>
              </MultiTrigger.Conditions>
              <Setter TargetName="PART_Watermark"
                      Property="Visibility"
                      Value="Visible"/>
            </MultiTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- CheckBox -->
  <Style TargetType="CheckBox">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextSecondaryBrush}"/>
    <Setter Property="Background"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Setter Property="Margin"
            Value="0,2"/>
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="VerticalContentAlignment"
            Value="Center"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="CheckBox">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border x:Name="checkBoxBorder"
                    Grid.Column="0"
                    Width="18"
                    Height="18"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{StaticResource RadiusS}"
                    VerticalAlignment="Center">
              <Grid>
                <!-- Checkmark -->
                <Path x:Name="checkMark"
                      Data="M 3 8 L 7 12 L 14 4"
                      Stroke="{StaticResource PrimaryBrush}"
                      StrokeThickness="2"
                      StrokeStartLineCap="Round"
                      StrokeEndLineCap="Round"
                      StrokeLineJoin="Round"
                      Stretch="Uniform"
                      Width="10"
                      Height="10"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Visibility="Collapsed"/>
                <!-- Indeterminate -->
                <Border x:Name="indeterminateMark"
                        Width="8"
                        Height="2"
                        Background="{StaticResource PrimaryBrush}"
                        CornerRadius="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Visibility="Collapsed"/>
              </Grid>
            </Border>
            <ContentPresenter x:Name="contentPresenter"
                              Grid.Column="1"
                              Margin="8,0,0,0"
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                              RecognizesAccessKey="True"/>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="checkBoxBorder"
                      Property="BorderBrush"
                      Value="{StaticResource BorderHoverBrush}"/>
              <Setter TargetName="checkBoxBorder"
                      Property="Background"
                      Value="{StaticResource SurfaceBrush}"/>
            </Trigger>
            <Trigger Property="IsChecked"
                     Value="True">
              <Setter TargetName="checkMark"
                      Property="Visibility"
                      Value="Visible"/>
              <Setter TargetName="checkBoxBorder"
                      Property="Background"
                      Value="{StaticResource InputFocusBrush}"/>
              <Setter TargetName="checkBoxBorder"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
            </Trigger>
            <Trigger Property="IsChecked"
                     Value="{x:Null}">
              <Setter TargetName="indeterminateMark"
                      Property="Visibility"
                      Value="Visible"/>
              <Setter TargetName="checkBoxBorder"
                      Property="Background"
                      Value="{StaticResource InputFocusBrush}"/>
              <Setter TargetName="checkBoxBorder"
                      Property="BorderBrush"
                      Value="{StaticResource PrimaryBrush}"/>
            </Trigger>
            <Trigger Property="IsPressed"
                     Value="True">
              <Setter TargetName="checkBoxBorder"
                      Property="Background"
                      Value="{StaticResource SurfacePressedBrush}"/>
            </Trigger>
            <Trigger Property="IsEnabled"
                     Value="False">
              <Setter TargetName="checkBoxBorder"
                      Property="Background"
                      Value="{StaticResource DisabledBackgroundBrush}"/>
              <Setter TargetName="checkBoxBorder"
                      Property="BorderBrush"
                      Value="{StaticResource DisabledBorderBrush}"/>
              <Setter TargetName="checkMark"
                      Property="Stroke"
                      Value="{StaticResource TextDisabledBrush}"/>
              <Setter TargetName="indeterminateMark"
                      Property="Background"
                      Value="{StaticResource TextDisabledBrush}"/>
              <Setter Property="Foreground"
                      Value="{StaticResource TextDisabledBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- =================================================================== -->
  <!-- LISTS                                                               -->
  <!-- =================================================================== -->

  <!-- ListBox -->
  <Style TargetType="ListBox">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Background"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="1"/>
    <Style.Triggers>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter Property="Background"
                Value="{StaticResource DisabledBackgroundBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource TextDisabledBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- ListBoxItem -->
  <Style TargetType="ListBoxItem">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="Padding"
            Value="8,4"/>
    <Style.Triggers>
      <Trigger Property="IsSelected"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfaceLightBrush}"/>
      </Trigger>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfaceBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- =================================================================== -->
  <!-- DATAGRID                                                            -->
  <!-- =================================================================== -->

  <!-- DataGrid -->
  <Style TargetType="DataGrid">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="Background"
            Value="Transparent"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="RowBackground"
            Value="Transparent"/>
    <Setter Property="AlternatingRowBackground"
            Value="{StaticResource InputBackgroundBrush}"/>
    <Setter Property="GridLinesVisibility"
            Value="Horizontal"/>
    <Setter Property="HorizontalGridLinesBrush"
            Value="{StaticResource BorderBrush}"/>
  </Style>

  <!-- DataGridColumnHeader -->
  <Style TargetType="DataGridColumnHeader">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="FontSize"
            Value="{StaticResource FontSizeM}"/>
    <Setter Property="FontWeight"
            Value="{StaticResource FontWeightMedium}"/>
    <Setter Property="Background"
            Value="{StaticResource SurfaceBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextSecondaryBrush}"/>
    <Setter Property="Padding"
            Value="8,6"/>
    <Setter Property="BorderBrush"
            Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness"
            Value="0,0,0,1"/>
  </Style>

  <!-- DataGridCell -->
  <Style TargetType="DataGridCell">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Foreground"
            Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="Padding"
            Value="8,4"/>
    <Style.Triggers>
      <Trigger Property="IsSelected"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfaceLightBrush}"/>
        <Setter Property="Foreground"
                Value="{StaticResource TextPrimaryBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- DataGridRow -->
  <Style TargetType="DataGridRow">
    <Setter Property="FontFamily"
            Value="{StaticResource PrimaryFont}"/>
    <Setter Property="Background"
            Value="Transparent"/>
    <Style.Triggers>
      <Trigger Property="IsSelected"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfaceLightBrush}"/>
      </Trigger>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Background"
                Value="{StaticResource SurfaceBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- =================================================================== -->
  <!-- MISC                                                                -->
  <!-- =================================================================== -->

  <!-- Slider -->
  <Style TargetType="Slider">
    <Setter Property="Foreground"
            Value="{StaticResource PrimaryBrush}"/>
  </Style>

  <!-- Hyperlink -->
  <Style TargetType="Hyperlink">
    <Setter Property="Foreground"
            Value="{StaticResource PrimaryBrush}"/>
    <Style.Triggers>
      <Trigger Property="IsMouseOver"
               Value="True">
        <Setter Property="Foreground"
                Value="{StaticResource PrimaryHoverBrush}"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- =================================================================== -->
  <!-- SCROLLBAR                                                           -->
  <!-- =================================================================== -->

  <Style x:Key="ScrollBarRepeatButtonStyle"
         TargetType="RepeatButton">
    <Setter Property="Focusable"
            Value="False"/>
    <Setter Property="IsTabStop"
            Value="False"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="RepeatButton">
          <Border Background="Transparent"/>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style x:Key="ScrollBarThumbStyle"
         TargetType="Thumb">
    <Setter Property="Cursor"
            Value="Hand"/>
    <Setter Property="Background"
            Value="{StaticResource SurfaceLightBrush}"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Thumb">
          <Border x:Name="thumbBorder"
                  Background="{TemplateBinding Background}"
                  CornerRadius="0"
                  Margin="1"/>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Setter TargetName="thumbBorder"
                      Property="Background"
                      Value="{StaticResource SurfaceHoverBrush}"/>
            </Trigger>
            <Trigger Property="IsDragging"
                     Value="True">
              <Setter TargetName="thumbBorder"
                      Property="Background"
                      Value="{StaticResource SurfacePressedBrush}"/>
            </Trigger>
            <Trigger Property="IsEnabled"
                     Value="False">
              <Setter TargetName="thumbBorder"
                      Property="Background"
                      Value="{StaticResource DisabledBackgroundBrush}"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <ControlTemplate x:Key="DefaultScrollBarTemplate"
                   TargetType="ScrollBar">
    <Grid>
      <Border x:Name="TrackBackground"
              Background="{StaticResource ScrollBarTrackBrush}"/>

      <Track x:Name="PART_Track"
             Margin="1"
             Orientation="{TemplateBinding Orientation}"
             Minimum="{TemplateBinding Minimum}"
             Maximum="{TemplateBinding Maximum}"
             Value="{TemplateBinding Value}"
             ViewportSize="{TemplateBinding ViewportSize}"
             IsDirectionReversed="True">
        <Track.DecreaseRepeatButton>
          <RepeatButton x:Name="PageBefore"
                        Command="{x:Static ScrollBar.LineUpCommand}"
                        Style="{StaticResource ScrollBarRepeatButtonStyle}"/>
        </Track.DecreaseRepeatButton>
        <Track.IncreaseRepeatButton>
          <RepeatButton x:Name="PageAfter"
                        Command="{x:Static ScrollBar.LineDownCommand}"
                        Style="{StaticResource ScrollBarRepeatButtonStyle}"/>
        </Track.IncreaseRepeatButton>
        <Track.Thumb>
          <Thumb Style="{StaticResource ScrollBarThumbStyle}"/>
        </Track.Thumb>
      </Track>
    </Grid>
    <ControlTemplate.Triggers>
      <Trigger Property="Orientation"
               Value="Horizontal">
        <Setter TargetName="PageBefore"
                Property="Command"
                Value="{x:Static ScrollBar.LineLeftCommand}"/>
        <Setter TargetName="PageAfter"
                Property="Command"
                Value="{x:Static ScrollBar.LineRightCommand}"/>
        <Setter TargetName="PART_Track"
                Property="IsDirectionReversed"
                Value="False"/>
      </Trigger>
      <Trigger Property="Orientation"
               Value="Vertical">
        <Setter TargetName="PART_Track"
                Property="IsDirectionReversed"
                Value="True"/>
      </Trigger>
      <Trigger Property="IsEnabled"
               Value="False">
        <Setter TargetName="TrackBackground"
                Property="Background"
                Value="{StaticResource DisabledBackgroundBrush}"/>
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>

  <Style TargetType="ScrollBar">
    <Setter Property="Background"
            Value="{StaticResource ScrollBarTrackBrush}"/>
    <Setter Property="Width"
            Value="10"/>
    <Setter Property="Height"
            Value="Auto"/>
    <Setter Property="Template"
            Value="{StaticResource DefaultScrollBarTemplate}"/>
    <Style.Triggers>
      <Trigger Property="Orientation"
               Value="Horizontal">
        <Setter Property="Width"
                Value="Auto"/>
        <Setter Property="Height"
                Value="6"/>
      </Trigger>
    </Style.Triggers>
  </Style>

  <!-- =================================================================== -->
  <!-- PROGRESSBAR                                                         -->
  <!-- =================================================================== -->

  <!-- ProgressBar -->
  <Style TargetType="ProgressBar">
    <Setter Property="Background"
            Value="{StaticResource SurfaceLightBrush}"/>
    <Setter Property="Foreground"
            Value="{StaticResource PrimaryBrush}"/>
    <Setter Property="BorderThickness"
            Value="0"/>
    <Setter Property="Height"
            Value="6"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ProgressBar">
          <Grid>
            <Border x:Name="PART_Track"
                    Background="{TemplateBinding Background}"
                    CornerRadius="{StaticResource RadiusS}"/>
            <Border x:Name="PART_Indicator"
                    Background="{TemplateBinding Foreground}"
                    CornerRadius="{StaticResource RadiusS}"
                    HorizontalAlignment="Left"/>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- =================================================================== -->
  <!-- COMPATIBILITY SECTION (currently nothing required)                   -->
  <!-- =================================================================== -->
  <!--
    Alle bisherigen Keys bleiben erhalten:
    SidebarNavButton, VideoDropZoneStyle, ThumbnailDropZoneStyle,
    SuggestionCloseButtonStyle, SuggestionItemButtonStyle,
    PlatformToggleButton, PrimaryButton, SecondaryButton, DangerButton,
    ModernGroupBox etc.

    Falls du spter weitere "alte" Keys findest, die irgendwo referenziert werden,
    knnen wir sie hier als BasedOn-Aliase ergnzen.
  -->

</ResourceDictionary>

