<Window x:Class="DCM.App.LogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Anwendungs-Log"
        Height="500"
        Width="800"
        MinHeight="300"
        MinWidth="500"
        WindowStartupLocation="CenterOwner"
        Background="#0F0F0F">

  <Window.Resources>
    <SolidColorBrush x:Key="SurfaceBrush"
        Color="#272727"/>
    <SolidColorBrush x:Key="BorderBrush"
        Color="#3F3F3F"/>
    <SolidColorBrush x:Key="TextPrimaryBrush"
        Color="#F1F1F1"/>
    <SolidColorBrush x:Key="TextMutedBrush"
        Color="#717171"/>
    <SolidColorBrush x:Key="PrimaryBrush"
        Color="#3EA6FF"/>
    <SolidColorBrush x:Key="SuccessBrush"
        Color="#2BA640"/>
    <SolidColorBrush x:Key="WarningBrush"
        Color="#FFA500"/>
    <SolidColorBrush x:Key="ErrorBrush"
        Color="#FF4E45"/>
    <SolidColorBrush x:Key="SurfaceLightBrush"
        Color="#3F3F3F"/>
  </Window.Resources>

  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Header mit Filter -->
    <Border Grid.Row="0"
            Background="{StaticResource SurfaceBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="6"
            Padding="10,8">
      <DockPanel>
        <StackPanel Orientation="Horizontal"
            DockPanel.Dock="Left">
          <TextBlock Text="Filter:"
                     Foreground="{StaticResource TextMutedBrush}"
                     VerticalAlignment="Center"
                     Margin="0,0,8,0"/>
          <CheckBox x:Name="ShowDebugCheckBox"
                    Content="Debug"
                    Foreground="{StaticResource TextMutedBrush}"
                    IsChecked="False"
                    Margin="0,0,12,0"
                    Checked="Filter_Changed"
                    Unchecked="Filter_Changed"/>
          <CheckBox x:Name="ShowInfoCheckBox"
                    Content="Info"
                    Foreground="{StaticResource SuccessBrush}"
                    IsChecked="True"
                    Margin="0,0,12,0"
                    Checked="Filter_Changed"
                    Unchecked="Filter_Changed"/>
          <CheckBox x:Name="ShowWarningCheckBox"
                    Content="Warning"
                    Foreground="{StaticResource WarningBrush}"
                    IsChecked="True"
                    Margin="0,0,12,0"
                    Checked="Filter_Changed"
                    Unchecked="Filter_Changed"/>
          <CheckBox x:Name="ShowErrorCheckBox"
                    Content="Error"
                    Foreground="{StaticResource ErrorBrush}"
                    IsChecked="True"
                    Checked="Filter_Changed"
                    Unchecked="Filter_Changed"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal"
            DockPanel.Dock="Right"
            HorizontalAlignment="Right">
          <TextBlock x:Name="EntryCountText"
                     Foreground="{StaticResource TextMutedBrush}"
                     VerticalAlignment="Center"
                     Margin="0,0,12,0"
                     Text="0 EintrÃ¤ge"/>
          <CheckBox x:Name="AutoScrollCheckBox"
                    Content="Auto-Scroll"
                    Foreground="{StaticResource TextMutedBrush}"
                    IsChecked="True"/>
        </StackPanel>
      </DockPanel>
    </Border>

    <!-- Log-Liste -->
    <Border Grid.Row="2"
            Background="{StaticResource SurfaceBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="6">
      <ListBox x:Name="LogListBox"
               Background="Transparent"
               BorderThickness="0"
               VirtualizingPanel.IsVirtualizing="True"
               VirtualizingPanel.VirtualizationMode="Recycling"
               ScrollViewer.HorizontalScrollBarVisibility="Auto">
        <ListBox.ItemTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding FormattedMessage}"
                       FontFamily="{StaticResource PrimaryFont}"
                       FontSize="12"
                       Padding="4,2"
                       TextWrapping="NoWrap">
              <TextBlock.Style>
                <Style TargetType="TextBlock">
                  <Setter Property="Foreground"
                      Value="{StaticResource TextPrimaryBrush}"/>
                  <Style.Triggers>
                    <DataTrigger Binding="{Binding Level}"
                        Value="Debug">
                      <Setter Property="Foreground"
                          Value="{StaticResource TextMutedBrush}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Level}"
                        Value="Info">
                      <Setter Property="Foreground"
                          Value="{StaticResource TextPrimaryBrush}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Level}"
                        Value="Warning">
                      <Setter Property="Foreground"
                          Value="{StaticResource WarningBrush}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Level}"
                        Value="Error">
                      <Setter Property="Foreground"
                          Value="{StaticResource ErrorBrush}"/>
                    </DataTrigger>
                  </Style.Triggers>
                </Style>
              </TextBlock.Style>
            </TextBlock>
          </DataTemplate>
        </ListBox.ItemTemplate>
        <ListBox.ItemContainerStyle>
          <Style TargetType="ListBoxItem">
            <Setter Property="Padding"
                Value="0"/>
            <Setter Property="Margin"
                Value="0"/>
            <Setter Property="HorizontalContentAlignment"
                Value="Stretch"/>
            <Setter Property="Background"
                Value="Transparent"/>
            <Setter Property="Template">
              <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                  <Border Background="{TemplateBinding Background}"
                          BorderThickness="0">
                    <ContentPresenter/>
                  </Border>
                  <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver"
                        Value="True">
                      <Setter Property="Background"
                          Value="#1A1A1A"/>
                    </Trigger>
                  </ControlTemplate.Triggers>
                </ControlTemplate>
              </Setter.Value>
            </Setter>
          </Style>
        </ListBox.ItemContainerStyle>
      </ListBox>
    </Border>

    <!-- Footer mit Buttons -->
    <Border Grid.Row="4"
            Background="{StaticResource SurfaceBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="6"
            Padding="10,8">
      <DockPanel>
        <StackPanel Orientation="Horizontal"
            DockPanel.Dock="Left">
          <Button x:Name="ClearButton"
                  Content="Leeren"
                  Click="ClearButton_Click"
                  Padding="10,5"
                  Background="{StaticResource SurfaceLightBrush}"
                  Foreground="{StaticResource TextPrimaryBrush}"
                  BorderThickness="0"
                  Cursor="Hand"
                  Margin="0,0,8,0"/>
          <Button x:Name="OpenLogFileButton"
                  Content="Log-Datei oeffnen"
                  Click="OpenLogFileButton_Click"
                  Padding="10,5"
                  Background="{StaticResource SurfaceLightBrush}"
                  Foreground="{StaticResource TextPrimaryBrush}"
                  BorderThickness="0"
                  Cursor="Hand"/>
        </StackPanel>

        <Button x:Name="CloseButton"
                Content="Schliessen"
                Click="CloseButton_Click"
                DockPanel.Dock="Right"
                HorizontalAlignment="Right"
                Padding="12,5"
                Background="{StaticResource PrimaryBrush}"
                Foreground="#0F0F0F"
                BorderThickness="0"
                FontWeight="SemiBold"
                Cursor="Hand"/>
      </DockPanel>
    </Border>
  </Grid>
</Window>