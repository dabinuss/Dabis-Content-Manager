<Window x:Class="DCM.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:core="clr-namespace:DCM.Core.Models;assembly=DCM.Core"
        xmlns:config="clr-namespace:DCM.Core.Configuration;assembly=DCM.Core"
        Title="{DynamicResource App_WindowTitle}"
        Height="900"
        Width="1366"
        MinHeight="600"
        MinWidth="900"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}">

  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="220"/>
      <ColumnDefinition Width="1"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <!-- Linke Sidebar -->
    <Border Grid.Column="0"
            Background="{StaticResource SidebarBrush}">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Logo / App Name -->
        <StackPanel Grid.Row="0"
                    Margin="{StaticResource SidebarPadding}">
          <Image Source="/DCM.App;component/Assets/logo.png"
                 Width="180"
                 Height="59"
                 Stretch="Uniform"
                 Margin="{StaticResource SpacingVerticalM}"/>
          <TextBlock Text="{DynamicResource App_Name}"
                     FontSize="{StaticResource FontSizeL}"
                     FontWeight="SemiBold"
                     Foreground="{StaticResource TextPrimaryBrush}"/>
          <TextBlock FontSize="{StaticResource FontSizeS}"
                     Foreground="{StaticResource TextMutedBrush}"
                     Margin="0,2,0,0">
                        <Run Text="{Binding AppVersion, RelativeSource={RelativeSource AncestorType=Window}}"/>
                        <Run Text=" · "/>
                        <Hyperlink Click="CheckUpdatesHyperlink_Click">
                            <Run Text="{DynamicResource App_CheckUpdates}"/>
                        </Hyperlink>
          </TextBlock>
        </StackPanel>

        <!-- Trennlinie -->
        <Border Grid.Row="1"
                Height="1"
                Background="{StaticResource BorderBrush}"
                Margin="12,0,12,8"/>

        <!-- Navigation -->
        <StackPanel Grid.Row="2">
          <RadioButton x:Name="NavUpload"
                       Style="{StaticResource SidebarNavButton}"
                       IsChecked="True"
                       Checked="NavButton_Checked"
                       Tag="0">
            <StackPanel Orientation="Horizontal">
              <TextBlock Style="{StaticResource IconXL}"
                         Text="&#xf09b;"
                         Margin="0,0,24,0"/>
              <TextBlock Text="{DynamicResource Nav_Uploads}"
                         FontWeight="SemiBold"
                         FontSize="{StaticResource FontSizeM}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </RadioButton>

          <RadioButton x:Name="NavAccounts"
                       Style="{StaticResource SidebarNavButton}"
                       Checked="NavButton_Checked"
                       Tag="1">
            <StackPanel Orientation="Horizontal">
              <TextBlock Style="{StaticResource IconXL}"
                         Text="&#xe1a0;"
                         Margin="0,0,24,0"/>
              <TextBlock Text="{DynamicResource Nav_Accounts}"
                         FontWeight="SemiBold"
                         FontSize="{StaticResource FontSizeM}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </RadioButton>

          <RadioButton x:Name="NavChannel"
                       Style="{StaticResource SidebarNavButton}"
                       Checked="NavButton_Checked"
                       Tag="2">
            <StackPanel Orientation="Horizontal">
              <TextBlock Style="{StaticResource IconXL}"
                         Text="&#xf8d1;"
                         Margin="0,0,24,0"/>
              <TextBlock Text="{DynamicResource Nav_Channels}"
                         FontWeight="SemiBold"
                         FontSize="{StaticResource FontSizeM}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </RadioButton>

          <RadioButton x:Name="NavTemplates"
                       Style="{StaticResource SidebarNavButton}"
                       Checked="NavButton_Checked"
                       Tag="3">
            <StackPanel Orientation="Horizontal">
              <TextBlock Style="{StaticResource IconXL}"
                         Text="&#xe02f;"
                         Margin="0,0,24,0"/>
              <TextBlock Text="{DynamicResource Nav_Templates}"
                         FontWeight="SemiBold"
                         FontSize="{StaticResource FontSizeM}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </RadioButton>

          <RadioButton x:Name="NavHistory"
                       Style="{StaticResource SidebarNavButton}"
                       Checked="NavButton_Checked"
                       Tag="4">
            <StackPanel Orientation="Horizontal">
              <TextBlock Style="{StaticResource IconXL}"
                         Text="&#xe889;"
                         Margin="0,0,24,0"/>
              <TextBlock Text="{DynamicResource Nav_History}"
                         FontWeight="SemiBold"
                         FontSize="{StaticResource FontSizeM}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </RadioButton>

          <RadioButton x:Name="NavSettings"
                       Style="{StaticResource SidebarNavButton}"
                       Checked="NavButton_Checked"
                       Tag="5">
            <StackPanel Orientation="Horizontal">
              <TextBlock Style="{StaticResource IconXL}"
                         Text="&#xe8b8;"
                         Margin="0,0,24,0"/>
              <TextBlock Text="{DynamicResource Nav_Settings}"
                         FontWeight="SemiBold"
                         FontSize="{StaticResource FontSizeM}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </RadioButton>
        </StackPanel>

        <!-- Footer in Sidebar -->
        <StackPanel Grid.Row="3"
                    Margin="{StaticResource SidebarPadding}">
          <Border Height="1"
                  Background="{StaticResource BorderBrush}"
                  Margin="0,0,0,12"/>

          <TextBlock x:Name="LogLinkTextBlock"
                     FontSize="{StaticResource FontSizeM}"
                     Cursor="Hand"
                     Margin="{StaticResource SpacingVerticalM}"
                     MouseLeftButtonDown="LogLink_Click"
                     ToolTip="Anwendungs-Log anzeigen">
            <TextBlock.Style>
              <Style TargetType="TextBlock">
                <Setter Property="Foreground"
                        Value="{StaticResource TextMutedBrush}"/>
                <Setter Property="Text"
                        Value="📋 Log"/>
                <Style.Triggers>
                  <Trigger Property="IsMouseOver"
                           Value="True">
                    <Setter Property="Foreground"
                            Value="{StaticResource PrimaryBrush}"/>
                  </Trigger>
                </Style.Triggers>
              </Style>
            </TextBlock.Style>
          </TextBlock>

          <TextBlock FontSize="{StaticResource FontSizeS}"
                     Margin="{StaticResource SpacingVerticalM}">
                        <Hyperlink NavigateUri="https://github.com/dabinuss/Dabis-Content-Manager"
                                   RequestNavigate="OpenUrlInBrowser">
                            <Run Text="{DynamicResource App_Github}"/>
                        </Hyperlink>
          </TextBlock>

          <TextBlock Text="{DynamicResource App_Copyright}"
                     FontSize="{StaticResource FontSizeXS}"
                     Foreground="{StaticResource TextMutedBrush}"/>
        </StackPanel>
      </Grid>
    </Border>

    <!-- Trennlinie zwischen Sidebar und Content -->
    <Border Grid.Column="1"
            Background="{StaticResource BorderBrush}"/>

    <!-- Hauptbereich -->
    <Grid Grid.Column="2">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

      <!-- Header mit Status und Progress -->
      <Border Grid.Row="0"
              Background="{StaticResource SurfaceBrush}"
              BorderBrush="{StaticResource BorderBrush}"
              BorderThickness="0,0,0,1"
              Padding="{StaticResource HeaderPadding}">
        <DockPanel>
          <StackPanel Orientation="Horizontal"
                      DockPanel.Dock="Left"
                      VerticalAlignment="Center">
            <TextBlock Text="{DynamicResource Status}"
                       Foreground="{StaticResource TextMutedBrush}"
                       FontSize="{StaticResource FontSizeM}"
                       Margin="0,0,6,0"/>
            <TextBlock x:Name="StatusTextBlock"
                       Text="{DynamicResource Status_Ready}"
                       Foreground="{StaticResource TextPrimaryBrush}"
                       FontSize="{StaticResource FontSizeM}"
                       FontWeight="SemiBold"/>
          </StackPanel>

          <StackPanel Orientation="Horizontal"
                      DockPanel.Dock="Right"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Center">
            <ProgressBar x:Name="UploadProgressBar"
                         Width="160"
                         Height="14"
                         Minimum="0"
                         Maximum="100"
                         Value="0"
                         Visibility="Collapsed"
                         Margin="{StaticResource SpacingHorizontalM}"/>
            <TextBlock x:Name="UploadProgressLabel"
                       VerticalAlignment="Center"
                       Foreground="{StaticResource TextMutedBrush}"
                       FontSize="{StaticResource FontSizeS}"
                       Text=""
                       Visibility="Collapsed"/>
          </StackPanel>
        </DockPanel>
      </Border>

      <!-- Content Pages -->
      <Grid Grid.Row="1"
            Margin="{StaticResource ContentPadding}">

        <!-- Page 0: Neuer Upload -->
        <ScrollViewer x:Name="PageUpload"
                      VerticalScrollBarVisibility="Auto"
                      Visibility="Visible">
          <Grid Margin="0,0,16,0">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingXL}"/>
              <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <StackPanel Grid.Row="0">
              <TextBlock Text="{DynamicResource Upload}"
                         FontSize="{StaticResource FontSizeXL}"
                         FontWeight="SemiBold"
                         Foreground="{StaticResource TextPrimaryBrush}"
                         Margin="0,0,0,16"/>
            </StackPanel>

            <!-- VIDEO DROP-ZONE -->
            <Border x:Name="VideoDropZone"
                    Grid.Row="1"
                    Style="{StaticResource VideoDropZoneStyle}"
                    DragOver="VideoDrop_DragOver"
                    DragLeave="VideoDrop_DragLeave"
                    Drop="VideoDrop_Drop"
                    MouseLeftButtonDown="VideoDropZone_Click">

              <Border.BorderBrush>
                <VisualBrush>
                  <VisualBrush.Visual>
                    <Rectangle StrokeDashArray="8 4"
                               Stroke="{StaticResource BorderBrush}"
                               StrokeThickness="2"
                               RadiusX="8"
                               RadiusY="8"
                               Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualWidth}"
                               Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualHeight}"/>
                  </VisualBrush.Visual>
                </VisualBrush>
              </Border.BorderBrush>

              <Grid>
                <!-- Zustand 1: Kein Video ausgewählt -->
                <Grid x:Name="VideoDropEmptyState"
                      Visibility="Visible">
                  <StackPanel HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Margin="20">
                    <TextBlock Text="📁"
                               FontSize="{StaticResource FontSizeXXL}"
                               HorizontalAlignment="Center"
                               Margin="{StaticResource SpacingVerticalM}"/>
                    <TextBlock Text="{DynamicResource Upload_DropVideo}"
                               FontSize="{StaticResource FontSizeXL}"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="{DynamicResource Upload_DropVideo_Descr}"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextMutedBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,4,0,0"/>
                    <TextBlock Text="{DynamicResource Upload_DropVideo_AllowedFiles}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               HorizontalAlignment="Center"
                               Margin="0,8,0,0"/>
                  </StackPanel>
                </Grid>

                <!-- Zustand 2: Video ausgewählt -->
                <Grid x:Name="VideoDropSelectedState"
                      Visibility="Collapsed">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                  </Grid.ColumnDefinitions>

                  <!-- Video Icon -->
                  <Border Grid.Column="0"
                          Width="48"
                          Height="48"
                          CornerRadius="{StaticResource RadiusM}"
                          Background="{StaticResource SurfaceLightBrush}"
                          Margin="{StaticResource SpacingAllXL}">
                    <TextBlock Text="🎬"
                               FontSize="{StaticResource FontSizeXL}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                  </Border>

                  <!-- Video Info -->
                  <StackPanel Grid.Column="1"
                              VerticalAlignment="Center"
                              Margin="{StaticResource SpacingVerticalL}">
                    <TextBlock x:Name="VideoFileNameTextBlock"
                               Text="video.mp4"
                               FontSize="{StaticResource FontSizeM}"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               TextTrimming="CharacterEllipsis"/>
                    <TextBlock x:Name="VideoFileSizeTextBlock"
                               Text="0 MB"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,2,0,0"/>
                  </StackPanel>

                  <!-- Ändern Button -->
                  <Button x:Name="VideoChangeButton"
                          Grid.Column="2"
                          Content="{DynamicResource Common_Change}"
                          Style="{StaticResource SecondaryButton}"
                          Click="VideoChangeButton_Click"
                          VerticalAlignment="Center"
                          Margin="{StaticResource SpacingAllM}"/>

                  <!-- Upload Button -->
                  <Button x:Name="UploadButton"
                          Grid.Column="3"
                          Style="{StaticResource PrimaryButton}"
                          Click="UploadButton_Click"
                          IsEnabled="False"
                          VerticalAlignment="Center"
                          Margin="4,12,16,12"
                          Padding="16,10">
                    <StackPanel Orientation="Horizontal">
                      <TextBlock Text="🚀"
                                 Margin="0,0,6,0"/>
                      <TextBlock Text="{DynamicResource Upload_StartUpload}"/>
                    </StackPanel>
                  </Button>
                </Grid>
              </Grid>
            </Border>

            <!-- Verstecktes TextBox für Pfad -->
            <TextBox x:Name="VideoPathTextBox"
                     Visibility="Collapsed"/>

            <!-- ZWEI-SPALTEN-LAYOUT -->
            <Grid Grid.Row="3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"
                                  MinWidth="350"/>
                <ColumnDefinition Width="{StaticResource SpacingXL}"/>
                <ColumnDefinition Width="*"
                                  MinWidth="300"
                                  MaxWidth="400"/>
              </Grid.ColumnDefinitions>

              <!-- LINKE SPALTE -->
              <StackPanel Grid.Column="0">

                <!-- Titel -->
                <GroupBox Tag="{Binding ElementName=TitleTextBox}"
                          PreviewMouseDown="FocusTargetOnContainerClick">
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Title}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,4"/>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>

                      <TextBox x:Name="TitleTextBox"
                               Grid.Row="2"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               TextChanged="TitleTextBox_TextChanged"/>
                      <Button x:Name="GenerateTitleButton"
                              Grid.Row="4"
                              Grid.Column="0"
                              Style="{StaticResource AccentButton}"
                              Click="GenerateTitleButton_Click"
                              ToolTip="KI-Vorschlag generieren"
                              BorderBrush="{StaticResource MagicAIGradientBrush}">
                        <StackPanel Orientation="Horizontal">
                          <TextBlock Style="{StaticResource IconL}"
                                     Foreground="{StaticResource MagicAIGradientBrush}"
                                     Text="&#xe663;"/>
                          <TextBlock Text="{DynamicResource Upload_Fields_Suggest}"/>
                        </StackPanel>
                      </Button>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Beschreibung -->
                <GroupBox Tag="{Binding ElementName=DescriptionTextBox}"
                          PreviewMouseDown="FocusTargetOnContainerClick">
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Description}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,4"/>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBox x:Name="DescriptionTextBox"
                               Grid.Row="0"
                               AcceptsReturn="True"
                               VerticalScrollBarVisibility="Auto"
                               TextWrapping="Wrap"
                               MinHeight="140"/>

                      <!-- Template & Buttons -->
                      <Grid Grid.Row="2">
                        <Grid.ColumnDefinitions>
                          <ColumnDefinition Width="*"/>
                          <ColumnDefinition Width="Auto"/>
                          <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ComboBox x:Name="TemplateComboBox"
                                  Grid.Column="0"
                                  DisplayMemberPath="Name"
                                  ToolTip="Template für die Beschreibung"
                                  SelectionChanged="TemplateComboBox_SelectionChanged"
                                  Margin="0,0,6,0"/>
                        <Button x:Name="ApplyTemplateButton"
                                Grid.Column="1"
                                Content="{DynamicResource Common_Apply}"
                                Style="{StaticResource SecondaryButton}"
                                Click="ApplyTemplateButton_Click"
                                Margin="0,0,6,0"/>
                        <Button x:Name="GenerateDescriptionButton"
                                Grid.Column="2"
                                Style="{StaticResource AccentButton}"
                                Click="GenerateDescriptionButton_Click"
                                ToolTip="KI-Vorschlag generieren"
                                BorderBrush="{StaticResource MagicAIGradientBrush}">
                          <StackPanel Orientation="Horizontal">
                            <TextBlock Style="{StaticResource IconL}"
                                       Foreground="{StaticResource MagicAIGradientBrush}"
                                       Text="&#xe663;"/>
                            <TextBlock Text="{DynamicResource Upload_Fields_Suggest}"/>
                          </StackPanel>
                        </Button>
                      </Grid>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Tags -->
                <GroupBox Tag="{Binding ElementName=TagsTextBox}"
                          PreviewMouseDown="FocusTargetOnContainerClick">
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Tags}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,4"/>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>

                      <TextBox x:Name="TagsTextBox"
                               Grid.Row="0"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               ToolTip="Tags, kommagetrennt (z. B. lets play, gaming, deutsch)"/>
                      <Button x:Name="GenerateTagsButton"
                              Grid.Row="2"
                              Grid.Column="0"
                              Style="{StaticResource AccentButton}"
                              Click="GenerateTagsButton_Click"
                              ToolTip="KI-Vorschlag generieren"
                              BorderBrush="{StaticResource MagicAIGradientBrush}">
                        <StackPanel Orientation="Horizontal">
                          <TextBlock Style="{StaticResource IconL}"
                                     Foreground="{StaticResource MagicAIGradientBrush}"
                                     Text="&#xe663;"/>
                          <TextBlock Text="{DynamicResource Upload_Fields_Suggest}"/>
                        </StackPanel>
                      </Button>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Transkript -->
                <GroupBox Tag="{Binding ElementName=TranscriptTextBox}"
                          PreviewMouseDown="FocusTargetOnContainerClick">
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Transcription}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,4"/>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBlock Grid.Row="0"
                                 Text="{DynamicResource Upload_Fields_Transcription_Descr}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>

                      <TextBox x:Name="TranscriptTextBox"
                               Grid.Row="2"
                               AcceptsReturn="True"
                               VerticalScrollBarVisibility="Auto"
                               TextWrapping="Wrap"
                               MinHeight="140"/>

                      <!-- Transkription Controls -->
                      <Grid Grid.Row="4">
                        <Grid.RowDefinitions>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="{StaticResource SpacingS}"/>
                          <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                          <ColumnDefinition Width="Auto"/>
                          <!-- Transkribieren -->
                          <ColumnDefinition Width="Auto"/>
                          <!-- Export -->
                          <ColumnDefinition Width="*"/>
                          <!-- Progress -->
                        </Grid.ColumnDefinitions>

                        <Button x:Name="TranscribeButton"
                                Grid.Row="0"
                                Grid.Column="0"
                                Click="TranscribeButton_Click"
                                IsEnabled="False"
                                Tag="default"
                                ToolTip="Video automatisch transkribieren">
                          <Button.Style>
                            <Style TargetType="Button"
                                   BasedOn="{StaticResource AccentButton}">
                              <!-- Default State -->
                              <Setter Property="Content">
                                <Setter.Value>
                                  <StackPanel Orientation="Horizontal">
                                    <TextBlock Style="{StaticResource IconL}"
                                               Text="&#xe048;"/>
                                    <TextBlock Text="{DynamicResource Upload_Fields_Transcripe}"/>
                                  </StackPanel>
                                </Setter.Value>
                              </Setter>
                              <!-- Active State -->
                              <Style.Triggers>
                                <Trigger Property="Tag"
                                         Value="active">
                                  <Setter Property="Content">
                                    <Setter.Value>
                                      <StackPanel Orientation="Horizontal">
                                        <TextBlock Style="{StaticResource IconL}"
                                                   Text="&#xe5c9;"/>
                                        <TextBlock Text="{DynamicResource Common_Cancel}"/>
                                      </StackPanel>
                                    </Setter.Value>
                                  </Setter>
                                </Trigger>
                              </Style.Triggers>
                            </Style>
                          </Button.Style>
                        </Button>

                        <Button x:Name="TranscriptionExportButton"
                                Grid.Row="0"
                                Grid.Column="1"
                                Style="{StaticResource SecondaryButton}"
                                Click="TranscriptionExportButton_Click"
                                ToolTip="Transkript als Textdatei exportieren"
                                Margin="8,0,0,0">
                          <TextBlock Text="📤"
                                     FontSize="{StaticResource FontSizeM}"/>
                        </Button>

                        <ProgressBar x:Name="TranscriptionProgressBar"
                                     Grid.Row="0"
                                     Grid.Column="2"
                                     Height="20"
                                     Margin="{StaticResource SpacingHorizontalM}"
                                     Minimum="0"
                                     Maximum="100"
                                     Value="0"
                                     Visibility="Collapsed"/>

                        <TextBlock x:Name="TranscriptionPhaseTextBlock"
                                   Grid.Row="2"
                                   Grid.Column="0"
                                   Grid.ColumnSpan="3"
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Visibility="Collapsed"/>
                      </Grid>
                    </Grid>
                  </StackPanel>
                </GroupBox>

              </StackPanel>

              <!-- RECHTE SPALTE -->
              <StackPanel Grid.Column="2">

                <!-- Plattform -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Platform}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,0,0,4"/>
                    <WrapPanel>
                      <!-- YouTube Button -->
                      <ToggleButton x:Name="PlatformYouTubeToggle"
                                    IsChecked="True"
                                    Style="{StaticResource PlatformToggleButton}">
                        <StackPanel VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                          <TextBlock Style="{StaticResource IconXXL}"
                                     Text="&#xe038;"
                                     Margin="0,0,24,0"/>
                          <TextBlock Text="{DynamicResource Upload_Fields_Platform_YouTube}"
                                     FontSize="{StaticResource FontSizeS}"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     HorizontalAlignment="Center"/>
                        </StackPanel>
                      </ToggleButton>

                      <!-- TikTok Button (deaktiviert) -->
                      <ToggleButton IsEnabled="False"
                                    Style="{StaticResource PlatformToggleButton}"
                                    ToolTip="Bald verfügbar">
                        <StackPanel VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                          <Border Width="36"
                                  Height="26"
                                  CornerRadius="{StaticResource RadiusM}"
                                  Background="Black"
                                  Margin="0,0,0,4">
                            <TextBlock Text="♪"
                                       Foreground="White"
                                       FontSize="{StaticResource FontSizeM}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                          </Border>
                          <TextBlock Text="{DynamicResource Upload_Fields_Platform_TikTok}"
                                     FontSize="{StaticResource FontSizeS}"
                                     Foreground="{StaticResource TextMutedBrush}"
                                     HorizontalAlignment="Center"/>
                        </StackPanel>
                      </ToggleButton>
                    </WrapPanel>
                  </StackPanel>
                </GroupBox>

                <!-- Thumbnail -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="Thumbnail"
                               Style="{StaticResource TextLabel}"
                               Margin="0,0,0,4"/>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <!-- Thumbnail Vorschau / Drop Zone -->
                      <Viewbox Stretch="Uniform"
                               HorizontalAlignment="Left"
                               StretchDirection="Both">
                        <Border x:Name="ThumbnailDropZone"
                                Grid.Row="0"
                                Width="320"
                                Height="180"
                                Style="{StaticResource ThumbnailDropZoneStyle}"
                                DragOver="ThumbnailDrop_DragOver"
                                DragLeave="ThumbnailDrop_DragLeave"
                                Drop="ThumbnailDrop_Drop"
                                MouseLeftButtonDown="ThumbnailDropZone_Click">

                          <Grid>
                            <!-- Leerer Zustand -->
                            <Grid x:Name="ThumbnailEmptyState"
                                  Visibility="Visible">
                              <StackPanel HorizontalAlignment="Center"
                                          VerticalAlignment="Center">
                                <TextBlock Text="🖼️"
                                           FontSize="{StaticResource FontSizeXL}"
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,6"/>
                                <TextBlock Text="{DynamicResource Upload_Fields_Thumbnail_DropZone}"
                                           FontSize="{StaticResource FontSizeM}"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="{DynamicResource Upload_Fields_Thumbnail_DropZone_Descr}"
                                           FontSize="{StaticResource FontSizeS}"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           HorizontalAlignment="Center"
                                           Margin="0,2,0,0"/>
                                <TextBlock Text="{DynamicResource Upload_Fields_Thumbnail_DropZone_AllowedFiles}"
                                           FontSize="{StaticResource FontSizeXS}"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           HorizontalAlignment="Center"
                                           Margin="0,8,0,0"/>
                              </StackPanel>
                            </Grid>

                            <!-- Vorschau Zustand -->
                            <Grid x:Name="ThumbnailPreviewState"
                                  Visibility="Collapsed">
                              <Image x:Name="ThumbnailPreviewImage"
                                     Stretch="Uniform"/>
                              <Border x:Name="ThumbnailOverlay"
                                      Background="#80000000"
                                      Opacity="0">
                                <StackPanel HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                                  <TextBlock Text="{DynamicResource Upload_Fields_Thumbnail_Change}"
                                             Foreground="White"
                                             FontSize="{StaticResource FontSizeM}"
                                             HorizontalAlignment="Center"/>
                                </StackPanel>
                              </Border>
                            </Grid>
                          </Grid>
                        </Border>
                      </Viewbox>

                      <!-- Thumbnail Aktionen -->
                      <StackPanel Grid.Row="2"
                                  Orientation="Horizontal"
                                  Visibility="{Binding Visibility, ElementName=ThumbnailPreviewState}">
                        <TextBlock x:Name="ThumbnailFileNameTextBlock"
                                   Text="thumbnail.png"
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   VerticalAlignment="Center"
                                   Margin="{StaticResource SpacingHorizontalM}"
                                   MaxWidth="200"
                                   TextTrimming="CharacterEllipsis"/>
                        <Button x:Name="ThumbnailClearButton"
                                Content="{DynamicResource Common_Remove}"
                                Style="{StaticResource SecondaryButton}"
                                Click="ThumbnailClearButton_Click"
                                Padding="8,4"
                                FontSize="{StaticResource FontSizeS}"/>
                      </StackPanel>

                      <TextBox x:Name="ThumbnailPathTextBox"
                               Visibility="Collapsed"/>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Sichtbarkeit -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Visibility}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,0,0,4"/>
                    <ComboBox x:Name="VisibilityComboBox">
                      <ComboBoxItem Content="{DynamicResource Upload_Fields_Visibility_Public}"
                                    Tag="{x:Static core:VideoVisibility.Public}"/>
                      <ComboBoxItem Content="{DynamicResource Upload_Fields_Visibility_Unlisted}"
                                    Tag="{x:Static core:VideoVisibility.Unlisted}"
                                    IsSelected="True"/>
                      <ComboBoxItem Content="{DynamicResource Upload_Fields_Visibility_Private}"
                                    Tag="{x:Static core:VideoVisibility.Private}"/>
                    </ComboBox>
                  </StackPanel>
                </GroupBox>

                <!-- Playlist -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Paylists}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,0,0,4"/>
                    <ComboBox x:Name="PlaylistComboBox"
                              DisplayMemberPath="Title"
                              ToolTip="Playlist, in die das Video einsortiert wird"/>
                  </StackPanel>
                </GroupBox>

                <!-- Veröffentlichung -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Upload_Fields_Publication}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,0,0,4"/>

                    <CheckBox x:Name="ScheduleCheckBox"
                              Content="{DynamicResource Upload_Fields_Publication_Plan}"
                              Margin="0,0,0,10"
                              IsChecked="True"/>
                    <Grid IsEnabled="{Binding IsChecked, ElementName=ScheduleCheckBox}">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="{StaticResource SpacingM}"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="{StaticResource SpacingL}"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="{StaticResource SpacingM}"/>
                        <ColumnDefinition Width="80"/>
                      </Grid.ColumnDefinitions>
                      <TextBlock Grid.Column="0"
                                 Text="{DynamicResource Upload_Fields_Publication_Date}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <DatePicker x:Name="ScheduleDatePicker"
                                  Grid.Column="2"
                                  SelectedDateFormat="Short"
                                  FirstDayOfWeek="Monday"/>
                      <TextBlock Grid.Column="4"
                                 Text="{DynamicResource Upload_Fields_Publication_Time}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <TextBox x:Name="ScheduleTimeTextBox"
                               Grid.Column="6"
                               Text="18:00"/>
                    </Grid>
                  </StackPanel>
                </GroupBox>

              </StackPanel>
            </Grid>
          </Grid>
        </ScrollViewer>

        <!-- Page 1: Konten -->
        <ScrollViewer x:Name="PageAccounts"
                      VerticalScrollBarVisibility="Auto"
                      Visibility="Collapsed">
          <Grid Margin="0,0,16,0">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <!-- Header -->
              <RowDefinition Height="Auto"/>
              <!-- Service Tabs -->
              <RowDefinition Height="{StaticResource SpacingL}"/>
              <RowDefinition Height="*"/>
              <!-- Content -->
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <StackPanel Grid.Row="0">
              <TextBlock Text="{DynamicResource Accounts}"
                         FontSize="{StaticResource FontSizeXL}"
                         FontWeight="SemiBold"
                         Foreground="{StaticResource TextPrimaryBrush}"/>
            </StackPanel>

            <!-- SERVICE-TABS OBEN (YOUTUBE / TIKTOK / INSTAGRAM) -->
            <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        Margin="0,16,0,0">
              <!-- YouTube Tab -->
              <ToggleButton x:Name="AccountsYouTubeTab"
                            Style="{StaticResource PlatformToggleButton}"
                            IsChecked="True"
                            Margin="0,0,8,0"
                            Tag="YouTube"
                            Checked="AccountsServiceTab_Checked">
                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center">
                  <TextBlock Style="{StaticResource IconL}"
                             Text="&#xe038;"
                             Margin="0,0,0,4"/>
                  <TextBlock Text="{DynamicResource Accounts_YouTube}"
                             FontSize="{StaticResource FontSizeXS}"
                             Foreground="{StaticResource TextSecondaryBrush}"
                             HorizontalAlignment="Center"
                             TextWrapping="Wrap"/>
                </StackPanel>
              </ToggleButton>

              <!-- TikTok Tab (Platzhalter, deaktiviert) -->
              <ToggleButton x:Name="AccountsTikTokTab"
                            Style="{StaticResource PlatformToggleButton}"
                            IsEnabled="False"
                            Margin="0,0,8,0"
                            Tag="TikTok"
                            Checked="AccountsServiceTab_Checked">
                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center">
                  <Border Width="28"
                          Height="20"
                          CornerRadius="{StaticResource RadiusM}"
                          Background="Black"
                          Margin="0,0,0,4">
                    <TextBlock Text="♪"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="White"/>
                  </Border>
                  <TextBlock Text="{DynamicResource Platform_TikTok}"
                             FontSize="{StaticResource FontSizeXS}"
                             Foreground="{StaticResource TextMutedBrush}"
                             HorizontalAlignment="Center"
                             TextWrapping="Wrap"/>
                </StackPanel>
              </ToggleButton>

              <!-- Instagram Tab (Platzhalter, deaktiviert) -->
              <ToggleButton x:Name="AccountsInstagramTab"
                            Style="{StaticResource PlatformToggleButton}"
                            IsEnabled="False"
                            Tag="Instagram"
                            Checked="AccountsServiceTab_Checked">
                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center">
                  <Border Width="28"
                          Height="20"
                          CornerRadius="{StaticResource RadiusM}"
                          Background="#C13584"
                          Margin="0,0,0,4">
                    <TextBlock Text="◎"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="White"/>
                  </Border>
                  <TextBlock Text="{DynamicResource Platform_Instagram}"
                             FontSize="{StaticResource FontSizeXS}"
                             Foreground="{StaticResource TextMutedBrush}"
                             HorizontalAlignment="Center"
                             TextWrapping="Wrap"/>
                </StackPanel>
              </ToggleButton>
            </StackPanel>

            <!-- CONTENT-BEREICHE PRO SERVICE -->
            <Grid Grid.Row="3">

              <!-- YOUTUBE CONTENT -->
              <Grid x:Name="AccountsYouTubeContent">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="2*"
                                    MinWidth="320"/>
                  <ColumnDefinition Width="{StaticResource SpacingXL}"/>
                  <ColumnDefinition Width="*"
                                    MinWidth="260"/>
                </Grid.ColumnDefinitions>

                <!-- LINKE SPALTE: VERBINDUNG + SICHERHEIT -->
                <StackPanel Grid.Column="0">

                  <!-- Verbindung -->
                  <GroupBox>
                    <StackPanel>
                      <TextBlock Text="{DynamicResource Accounts_YouTube}"
                                 Style="{StaticResource TextLabel}"
                                 Margin="0,-6,0,4"/>

                      <Grid>
                        <Grid.ColumnDefinitions>
                          <ColumnDefinition Width="Auto"/>
                          <ColumnDefinition Width="*"/>
                          <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Icon / Avatar -->
                        <Border Grid.Column="0"
                                Width="40"
                                Height="40"
                                CornerRadius="{StaticResource RadiusCircle}"
                                Background="#FF4444"
                                Margin="0,0,12,0">
                          <TextBlock Text="{DynamicResource Accounts_YouTube_Short}"
                                     Foreground="White"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center"
                                     FontWeight="Bold"
                                     FontSize="{StaticResource FontSizeM}"/>
                        </Border>

                        <!-- Status -->
                        <StackPanel Grid.Column="1"
                                    VerticalAlignment="Center">
                          <TextBlock x:Name="YouTubeAccountStatusTextBlock"
                                     Text="{DynamicResource Accounts_YouTube_Msg_NotConnected}"
                                     Foreground="{StaticResource TextPrimaryBrush}"
                                     FontWeight="Medium"
                                     FontSize="{StaticResource FontSizeM}"/>
                          <TextBlock Text="{DynamicResource Accounts_YouTube_Msg_ClickToConnect}"
                                     Foreground="{StaticResource TextMutedBrush}"
                                     FontSize="{StaticResource FontSizeS}"/>
                        </StackPanel>

                        <!-- Buttons -->
                        <StackPanel Grid.Column="2"
                                    Orientation="Horizontal"
                                    VerticalAlignment="Center">
                          <Button x:Name="YouTubeConnectButton"
                                  Content="{DynamicResource Accounts_YouTube_Connect}"
                                  Style="{StaticResource PrimaryButton}"
                                  Click="YouTubeConnectButton_Click"
                                  Margin="0,0,6,0"/>
                          <Button x:Name="YouTubeDisconnectButton"
                                  Content="{DynamicResource Accounts_YouTube_Disconnect}"
                                  Style="{StaticResource SecondaryButton}"
                                  Click="YouTubeDisconnectButton_Click"/>
                        </StackPanel>
                      </Grid>

                      <!-- Kurzbeschreibung -->
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Description}"
                                 Margin="0,10,0,0"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"/>
                    </StackPanel>
                  </GroupBox>

                  <!-- Sicherheit / Speicherung -->
                  <GroupBox Margin="0,12,0,0">
                    <StackPanel>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_SecurityTitle}"
                                 Style="{StaticResource TextLabel}"
                                 Margin="0,-6,0,4"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Security_Line1}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,2"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Security_Line2}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,2"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Security_Line3}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"/>
                    </StackPanel>
                  </GroupBox>

                </StackPanel>

                <!-- RECHTE SPALTE: PLAYLISTS + NUTZUNG -->
                <StackPanel Grid.Column="2">

                  <!-- Playlists / Standard-Playlist -->
                  <GroupBox>
                    <StackPanel>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Playlists}"
                                 Style="{StaticResource TextLabel}"
                                 Margin="0,-6,0,4"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Playlists_Descr}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,6"/>
                      <ListBox x:Name="YouTubePlaylistsListBox"
                               DisplayMemberPath="Title"
                               Height="200"
                               SelectionChanged="YouTubePlaylistsListBox_SelectionChanged"/>
                    </StackPanel>
                  </GroupBox>

                  <!-- Wie DCM das Konto nutzt -->
                  <GroupBox Margin="0,12,0,0">
                    <StackPanel>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_UsageTitle}"
                                 Style="{StaticResource TextLabel}"
                                 Margin="0,-6,0,4"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Usage_Line1}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,2"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Usage_Line2}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,2"/>
                      <TextBlock Text="{DynamicResource Accounts_YouTube_Usage_Line3}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 TextWrapping="Wrap"/>
                    </StackPanel>
                  </GroupBox>

                </StackPanel>
              </Grid>

              <!-- TIKTOK CONTENT (PLATZHALTER) -->
              <Grid x:Name="AccountsTikTokContent"
                    Visibility="Collapsed">
                <TextBlock Text="{DynamicResource Accounts_ComingSoon}"
                           FontSize="{StaticResource FontSizeS}"
                           Foreground="{StaticResource TextMutedBrush}"
                           TextWrapping="Wrap"
                           VerticalAlignment="Top"
                           Margin="0,4,0,0"/>
              </Grid>

              <!-- INSTAGRAM CONTENT (PLATZHALTER) -->
              <Grid x:Name="AccountsInstagramContent"
                    Visibility="Collapsed">
                <TextBlock Text="{DynamicResource Accounts_ComingSoon}"
                           FontSize="{StaticResource FontSizeS}"
                           Foreground="{StaticResource TextMutedBrush}"
                           TextWrapping="Wrap"
                           VerticalAlignment="Top"
                           Margin="0,4,0,0"/>
              </Grid>

            </Grid>
          </Grid>
        </ScrollViewer>

        <!-- Page 2: Kanalprofil -->
        <ScrollViewer x:Name="PageChannel"
                      VerticalScrollBarVisibility="Auto"
                      Visibility="Collapsed">
          <!-- wie PageUpload: Grid füllt die Breite, nur ein rechter Margin -->
          <Grid Margin="0,0,16,0">

            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <!-- Header -->
              <RowDefinition Height="Auto"/>
              <!-- Inhalt -->
            </Grid.RowDefinitions>

            <!-- HEADER -->
            <StackPanel Grid.Row="0">
              <TextBlock Text="{DynamicResource Channel}"
                         FontSize="{StaticResource FontSizeXL}"
                         FontWeight="SemiBold"
                         Foreground="{StaticResource TextPrimaryBrush}"
                         Margin="0,0,0,16"/>
            </StackPanel>

            <!-- ZWEI-SPALTEN-LAYOUT wie bei Upload -->
            <Grid Grid.Row="1"
                  VerticalAlignment="Top">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"
                                  MinWidth="350"/>
                <ColumnDefinition Width="{StaticResource SpacingXL}"/>
                <ColumnDefinition Width="*"
                                  MinWidth="300"
                                  MaxWidth="400"/>
              </Grid.ColumnDefinitions>

              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- obere Boxen -->
                <RowDefinition Height="{StaticResource SpacingM}"/>
                <!-- Abstand -->
                <RowDefinition Height="Auto"/>
                <!-- untere Box -->
              </Grid.RowDefinitions>

              <!-- BOX 1: Kanalprofil (links) -->
              <GroupBox Grid.Row="0"
                        Grid.Column="0"
                        Header="{DynamicResource Channel_Persona_Profile}">
                <StackPanel Margin="12">
                  <!-- Name -->
                  <TextBlock Text="{DynamicResource Channel_Fields_Name}"
                             Style="{StaticResource TextLabel}"
                             Margin="0,-6,0,4"/>
                  <TextBox x:Name="ChannelPersonaNameTextBox"
                           Margin="0,0,0,8"/>

                  <!-- Kanalname -->
                  <TextBlock Text="{DynamicResource Channel_Fields_ChannelName}"
                             Style="{StaticResource TextLabel}"
                             Margin="0,4,0,4"/>
                  <TextBox x:Name="ChannelPersonaChannelNameTextBox"/>
                </StackPanel>
              </GroupBox>

              <!-- BOX 2: Sprache & Stil (rechts) -->
              <GroupBox Grid.Row="0"
                        Grid.Column="2"
                        Header="{DynamicResource Channel_Persona_Style}">
                <StackPanel Margin="12">
                  <!-- Sprache -->
                  <TextBlock Text="{DynamicResource Channel_Fields_Language}"
                             Style="{StaticResource TextLabel}"
                             Margin="0,-6,0,4"/>
                  <ComboBox x:Name="ChannelPersonaLanguageTextBox"
                            IsEditable="True"
                            IsTextSearchEnabled="True"
                            StaysOpenOnEdit="True"
                            MinWidth="200"
                            ToolTip="z. B. de-DE oder deutsch"
                            Margin="0,0,0,8"/>

                  <!-- Tonfall -->
                  <TextBlock Text="{DynamicResource Channel_Fields_ToneOfWords}"
                             Style="{StaticResource TextLabel}"
                             Margin="0,4,0,4"/>
                  <TextBox x:Name="ChannelPersonaToneOfVoiceTextBox"
                           ToolTip="z. B. locker, sarkastisch, informativ"
                           Margin="0,0,0,8"/>

                  <!-- Content-Typ -->
                  <TextBlock Text="{DynamicResource Channel_Fields_ContentType}"
                             Style="{StaticResource TextLabel}"
                             Margin="0,4,0,4"/>
                  <TextBox x:Name="ChannelPersonaContentTypeTextBox"
                           ToolTip="z. B. Gaming Highlights, IRL, Tutorials"
                           Margin="0,0,0,8"/>

                  <!-- Zielgruppe -->
                  <TextBlock Text="{DynamicResource Channel_Fields_TargetAudience}"
                             Style="{StaticResource TextLabel}"
                             Margin="0,4,0,4"/>
                  <TextBox x:Name="ChannelPersonaTargetAudienceTextBox"
                           ToolTip="z. B. Casual Gamer 18-34"/>
                </StackPanel>
              </GroupBox>

              <!-- BOX 3: Zusätzliche Hinweise (unten, volle Breite) -->
              <GroupBox Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Header="{DynamicResource Channel_Persona_Additional}">
                <StackPanel Margin="12">
                  <TextBlock Text="{DynamicResource Channel_Fields_AdditionalInstructions}"
                             Foreground="{StaticResource TextMutedBrush}"
                             FontSize="{StaticResource FontSizeM}"/>
                  <TextBox x:Name="ChannelPersonaAdditionalInstructionsTextBox"
                           Margin="0,4,0,0"
                           AcceptsReturn="True"
                           TextWrapping="Wrap"
                           VerticalScrollBarVisibility="Auto"
                           Height="80"/>

                  <Button x:Name="ChannelProfileSaveButton"
                          Content="{DynamicResource Common_Save}"
                          Style="{StaticResource PrimaryButton}"
                          HorizontalAlignment="Right"
                          Margin="0,12,0,0"
                          Click="ChannelProfileSaveButton_Click"/>
                </StackPanel>
              </GroupBox>

            </Grid>
          </Grid>
        </ScrollViewer>

        <!-- Page 3: Templates -->
        <Grid x:Name="PageTemplates"
              Visibility="Collapsed">

          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="{StaticResource SpacingL}"/>
            <ColumnDefinition Width="*"
                              MaxWidth="480"/>
          </Grid.ColumnDefinitions>

          <!-- Header über alle Spalten -->
          <StackPanel Grid.Row="0"
                      Grid.ColumnSpan="3">
            <TextBlock Text="{DynamicResource Templates}"
                       FontSize="{StaticResource FontSizeXL}"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource TextPrimaryBrush}"
                       Margin="0,0,0,16"/>
          </StackPanel>

          <GroupBox Header="{DynamicResource Templates_Header}"
                    Grid.Row="1"
                    Grid.Column="0">
            <DockPanel>
              <StackPanel DockPanel.Dock="Bottom"
                          Orientation="Horizontal"
                          Margin="{StaticResource SpacingVerticalM}">
                <Button x:Name="TemplateNewButton"
                        Content="{DynamicResource Common_Add}"
                        Style="{StaticResource SecondaryButton}"
                        Click="TemplateNewButton_Click"
                        Margin="0,0,4,0"/>
                <Button x:Name="TemplateEditButton"
                        Content="{DynamicResource Common_Edit}"
                        Style="{StaticResource SecondaryButton}"
                        Click="TemplateEditButton_Click"
                        Margin="0,0,4,0"/>
                <Button x:Name="TemplateDeleteButton"
                        Content="{DynamicResource Common_Delete}"
                        Style="{StaticResource SecondaryButton}"
                        Click="TemplateDeleteButton_Click"/>
              </StackPanel>
              <ListBox x:Name="TemplateListBox"
                       DisplayMemberPath="Name"
                       SelectionChanged="TemplateListBox_SelectionChanged"/>
            </DockPanel>
          </GroupBox>

          <!-- rechte Box in Row 1 schieben -->
          <GroupBox Header="{DynamicResource Templates_Edit}"
                    Grid.Row="1"
                    Grid.Column="2">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="90"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="{StaticResource SpacingM}"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="{StaticResource SpacingM}"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="{StaticResource SpacingM}"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="{StaticResource SpacingL}"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="{StaticResource SpacingS}"/>
                <RowDefinition Height="*"
                               MinHeight="120"/>
                <RowDefinition Height="{StaticResource SpacingL}"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>

              <Label Content="{DynamicResource Templates_Fields_Name}"
                     Grid.Row="0"
                     Grid.Column="0"/>
              <TextBox x:Name="TemplateNameTextBox"
                       Grid.Row="0"
                       Grid.Column="1"/>

              <Label Content="{DynamicResource Templates_Fields_Platform}"
                     Grid.Row="2"
                     Grid.Column="0"/>
              <ComboBox x:Name="TemplatePlatformComboBox"
                        Grid.Row="2"
                        Grid.Column="1"
                        HorizontalAlignment="Left"
                        MinWidth="150"/>

              <CheckBox x:Name="TemplateIsDefaultCheckBox"
                        Grid.Row="4"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Content="{DynamicResource Templates_Fields_UseAsStandard}"/>

              <Label Content="{DynamicResource Templates_Fields_Notes}"
                     Grid.Row="6"
                     Grid.Column="0"/>
              <TextBox x:Name="TemplateDescriptionTextBox"
                       Grid.Row="6"
                       Grid.Column="1"
                       AcceptsReturn="True"
                       TextWrapping="Wrap"
                       Height="40"
                       VerticalScrollBarVisibility="Auto"/>

              <TextBlock Grid.Row="8"
                         Grid.Column="0"
                         Grid.ColumnSpan="2"
                         Text="{DynamicResource Templates_Fields_TemplateBody}"
                         Foreground="{StaticResource TextMutedBrush}"
                         FontSize="{StaticResource FontSizeM}"/>
              <TextBox x:Name="TemplateBodyEditorTextBox"
                       Grid.Row="10"
                       Grid.Column="0"
                       Grid.ColumnSpan="2"
                       AcceptsReturn="True"
                       TextWrapping="Wrap"
                       VerticalScrollBarVisibility="Auto"/>

              <Button x:Name="TemplateSaveButton"
                      Content="{DynamicResource Common_Save}"
                      Grid.Row="12"
                      Grid.Column="1"
                      Style="{StaticResource PrimaryButton}"
                      HorizontalAlignment="Left"
                      Click="TemplateSaveButton_Click"/>
            </Grid>
          </GroupBox>
        </Grid>

        <!-- Page 4: Historie -->
        <Grid x:Name="PageHistory"
              Visibility="Collapsed">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="{StaticResource SpacingM}"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <!-- HEADER -->
          <StackPanel Grid.Row="0">
            <TextBlock Text="{DynamicResource History}"
                       FontSize="{StaticResource FontSizeXL}"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource TextPrimaryBrush}"
                       Margin="0,0,0,16"/>
          </StackPanel>

          <Border Grid.Row="1"
                  Background="{StaticResource SurfaceBrush}"
                  BorderBrush="{StaticResource BorderBrush}"
                  BorderThickness="1"
                  CornerRadius="{StaticResource RadiusL}"
                  Padding="10,8">
            <StackPanel Orientation="Horizontal">
              <Label Content="{DynamicResource Platform}"
                     Margin="0,0,4,0"/>
              <ComboBox x:Name="HistoryPlatformFilterComboBox"
                        Width="120"
                        Margin="{StaticResource SpacingHorizontalL}"
                        SelectionChanged="HistoryFilter_Changed">
                <ComboBoxItem Content="{DynamicResource Common_All}"
                              IsSelected="True"/>
                <ComboBoxItem Content="{DynamicResource Platform_YouTube}"
                              Tag="{x:Static core:PlatformType.YouTube}"/>
              </ComboBox>

              <Label Content="Status:"
                     Margin="0,0,4,0"/>
              <ComboBox x:Name="HistoryStatusFilterComboBox"
                        Width="120"
                        Margin="{StaticResource SpacingHorizontalL}"
                        SelectionChanged="HistoryFilter_Changed">
                <ComboBoxItem Content="Alle"
                              IsSelected="True"/>
                <ComboBoxItem Content="{DynamicResource History_Success}"
                              Tag="Success"/>
                <ComboBoxItem Content="{DynamicResource History_Error}"
                              Tag="Error"/>
              </ComboBox>

              <Button x:Name="HistoryClearButton"
                      Content="{DynamicResource History_ClearList}"
                      Style="{StaticResource SecondaryButton}"
                      Click="HistoryClearButton_Click"/>
            </StackPanel>
          </Border>

          <Border Grid.Row="3"
                  Background="{StaticResource SurfaceBrush}"
                  BorderBrush="{StaticResource BorderBrush}"
                  BorderThickness="1"
                  CornerRadius="{StaticResource RadiusL}"
                  Padding="1">
            <DataGrid x:Name="HistoryDataGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      HeadersVisibility="Column"
                      SelectionMode="Single"
                      MouseDoubleClick="HistoryDataGrid_MouseDoubleClick">
              <DataGrid.Columns>
                <DataGridTextColumn Header="{DynamicResource History_List_DateTime}"
                                    Binding="{Binding DateTime, StringFormat=G}"
                                    Width="140"/>
                <DataGridTextColumn Header="{DynamicResource Common_Platform}"
                                    Binding="{Binding Platform}"
                                    Width="80"/>
                <DataGridTextColumn Header="{DynamicResource History_List_Title}"
                                    Binding="{Binding VideoTitle}"
                                    Width="*"/>
                <DataGridTextColumn Header="{DynamicResource Common_Status}"
                                    Binding="{Binding Status}"
                                    Width="70"/>
                <DataGridTemplateColumn Header="{DynamicResource History_List_Link}"
                                        Width="180">
                  <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <TextBlock TextTrimming="CharacterEllipsis">
                                                <Hyperlink NavigateUri="{Binding VideoUrl}"
                                                           RequestNavigate="OpenUrlInBrowser">
                                                    <Run Text="{Binding VideoUrl}"/>
                                                </Hyperlink>
                      </TextBlock>
                    </DataTemplate>
                  </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
              </DataGrid.Columns>
            </DataGrid>
          </Border>
        </Grid>

        <!-- Page 5: Einstellungen -->
        <ScrollViewer x:Name="PageSettings"
                      VerticalScrollBarVisibility="Auto"
                      Visibility="Collapsed">
          <Grid Margin="0,0,16,0">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingXL}"/>
              <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header mit Speichern-Button -->
            <!-- HEADER wie Accounts, mit Save-Button rechts -->
            <Grid Grid.Row="0"
                  Margin="0,0,0,16">
              <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>

              <!-- Titel + Beschreibung (wie Accounts) -->
              <StackPanel Grid.Column="0">
                <TextBlock Text="{DynamicResource Settings}"
                           FontSize="{StaticResource FontSizeXL}"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimaryBrush}"/>
              </StackPanel>

              <!-- Speichern-Button rechts, auf Höhe des Headers -->
              <Button x:Name="SettingsSaveButton"
                      Grid.Column="1"
                      Style="{StaticResource PrimaryButton}"
                      Click="SettingsSaveButton_Click"
                      VerticalAlignment="Center"
                      Margin="4">
                <StackPanel Orientation="Horizontal">
                  <TextBlock Text="{DynamicResource Settings_SaveAll}"/>
                </StackPanel>
              </Button>
            </Grid>


            <!-- ZWEI-SPALTEN-LAYOUT -->
            <Grid Grid.Row="2">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"
                                  MinWidth="350"/>
                <ColumnDefinition Width="{StaticResource SpacingXL}"/>
                <ColumnDefinition Width="*"
                                  MinWidth="350"/>
              </Grid.ColumnDefinitions>

              <!-- LINKE SPALTE -->
              <StackPanel Grid.Column="0">

                <!-- Sprache -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_Language}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="{StaticResource SpacingM}"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <ComboBox x:Name="LanguageComboBox"
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                HorizontalAlignment="Left"
                                MinWidth="200"
                                SelectionChanged="LanguageComboBox_SelectionChanged"/>

                      <TextBlock Grid.Row="2"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="3"
                                 Text="{DynamicResource Settings_Language_Restart_Hint}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Ordner -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_StandardFolders}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                      </Grid.ColumnDefinitions>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBlock Grid.Row="0"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Text="{DynamicResource Settings_VideoFolder}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="DefaultVideoFolderTextBox"
                               Grid.Row="2"
                               Grid.Column="0"
                               Margin="0,0,8,0"/>
                      <Button x:Name="DefaultVideoFolderBrowseButton"
                              Grid.Row="2"
                              Grid.Column="1"
                              Content="Wählen..."
                              Style="{StaticResource SecondaryButton}"
                              Click="DefaultVideoFolderBrowseButton_Click"/>

                      <TextBlock Grid.Row="4"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Text="{DynamicResource Settings_ThumbnailFolder}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="DefaultThumbnailFolderTextBox"
                               Grid.Row="6"
                               Grid.Column="0"
                               Margin="0,0,8,0"/>
                      <Button x:Name="DefaultThumbnailFolderBrowseButton"
                              Grid.Row="6"
                              Grid.Column="1"
                              Content="{DynamicResource Settings_ChoosePath}"
                              Style="{StaticResource SecondaryButton}"
                              Click="DefaultThumbnailFolderBrowseButton_Click"/>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Upload-Standardwerte -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_UploadSettings}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="{StaticResource SpacingM}"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingL}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBlock Grid.Row="0"
                                 Grid.Column="0"
                                 Text="{DynamicResource Settings_StandardReleaseTime}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <TextBox x:Name="DefaultSchedulingTimeTextBox"
                               Grid.Row="0"
                               Grid.Column="2"
                               HorizontalAlignment="Left"
                               Width="90"
                               Text="18:00"/>

                      <TextBlock Grid.Row="2"
                                 Grid.Column="0"
                                 Text="{DynamicResource Upload_Fields_Visibility}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <ComboBox x:Name="DefaultVisibilityComboBox"
                                Grid.Row="2"
                                Grid.Column="2"
                                HorizontalAlignment="Left"
                                MinWidth="160">
                        <ComboBoxItem Content="{DynamicResource Upload_Fields_Visibility_Public}"
                                      Tag="{x:Static core:VideoVisibility.Public}"/>
                        <ComboBoxItem Content="{DynamicResource Upload_Fields_Visibility_Unlisted}"
                                      Tag="{x:Static core:VideoVisibility.Unlisted}"/>
                        <ComboBoxItem Content="{DynamicResource Upload_Fields_Visibility_Private}"
                                      Tag="{x:Static core:VideoVisibility.Private}"/>
                      </ComboBox>

                      <StackPanel Grid.Row="4"
                                  Grid.Column="0"
                                  Grid.ColumnSpan="3">
                        <CheckBox x:Name="ConfirmBeforeUploadCheckBox"
                                  Content="{DynamicResource Settings_StandardReleaseTime}"/>
                        <CheckBox x:Name="AutoApplyDefaultTemplateCheckBox"
                                  Content="{DynamicResource Settings_ConfirmUpload}"/>
                        <CheckBox x:Name="OpenBrowserAfterUploadCheckBox"
                                  Content="{DynamicResource Settings_OpenBrowserAfterUpload}"/>
                        <CheckBox x:Name="AutoConnectYouTubeCheckBox"
                                  Content="{DynamicResource Settings_AutomaticConnect}"/>
                      </StackPanel>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Transkription -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_Transcription}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="{StaticResource SpacingM}"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingL}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <CheckBox x:Name="TranscriptionAutoCheckBox"
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                Content="{DynamicResource Settings_AutomaticTranscription}"/>

                      <TextBlock Grid.Row="2"
                                 Grid.Column="0"
                                 Text="{DynamicResource Settings_WhisperModelSize}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <ComboBox x:Name="TranscriptionModelSizeComboBox"
                                Grid.Row="2"
                                Grid.Column="2"
                                HorizontalAlignment="Left"
                                MinWidth="200">
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperModelSize_Tiny}"
                                      Tag="{x:Static config:WhisperModelSize.Tiny}"/>
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperModelSize_Base}"
                                      Tag="{x:Static config:WhisperModelSize.Base}"/>
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperModelSize_Small}"
                                      Tag="{x:Static config:WhisperModelSize.Small}"
                                      IsSelected="True"/>
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperModelSize_Medium}"
                                      Tag="{x:Static config:WhisperModelSize.Medium}"/>
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperModelSize_Large}"
                                      Tag="{x:Static config:WhisperModelSize.Large}"/>
                      </ComboBox>

                      <TextBlock Grid.Row="4"
                                 Grid.Column="0"
                                 Text="{DynamicResource Settings_WhisperLanguage}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <ComboBox x:Name="TranscriptionLanguageComboBox"
                                Grid.Row="4"
                                Grid.Column="2"
                                HorizontalAlignment="Left"
                                MinWidth="200">
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperLanguage_De}"
                                      Tag="de"
                                      IsSelected="True"/>
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperLanguage_En}"
                                      Tag="en"/>
                        <ComboBoxItem Content="{DynamicResource Settings_WhisperLanguage_Detect}"
                                      Tag="auto"/>
                      </ComboBox>

                      <TextBlock Grid.Row="6"
                                 Grid.Column="0"
                                 Text="{DynamicResource Common_Status}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <TextBlock x:Name="TranscriptionStatusTextBlock"
                                 Grid.Row="6"
                                 Grid.Column="2"
                                 VerticalAlignment="Center"
                                 Text="{DynamicResource Settings_Msg_NotChecked}"
                                 Foreground="{StaticResource TextMutedBrush}"/>

                      <StackPanel Grid.Row="8"
                                  Grid.Column="0"
                                  Grid.ColumnSpan="3"
                                  Orientation="Horizontal">
                        <Button x:Name="TranscriptionDownloadButton"
                                Content="{DynamicResource Settings_Whisper_Download}"
                                Style="{StaticResource SecondaryButton}"
                                Click="TranscriptionDownloadButton_Click"/>
                        <ProgressBar x:Name="TranscriptionDownloadProgressBar"
                                     Width="150"
                                     Height="20"
                                     Minimum="0"
                                     Maximum="100"
                                     Visibility="Collapsed"
                                     Margin="8,0,0,0"/>
                      </StackPanel>
                    </Grid>
                  </StackPanel>
                </GroupBox>

              </StackPanel>

              <!-- RECHTE SPALTE -->
              <StackPanel Grid.Column="2">

                <!-- KI / LLM -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_LLM}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                      </Grid.ColumnDefinitions>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBlock Grid.Row="0"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Text="{DynamicResource Settings_LLM_Mode}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <ComboBox x:Name="LlmModeComboBox"
                                Grid.Row="2"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                HorizontalAlignment="Left"
                                MinWidth="180"
                                SelectionChanged="LlmModeComboBox_SelectionChanged">
                        <ComboBoxItem Content="{DynamicResource Settings_LLM_Off}"
                                      Tag="Off"/>
                        <ComboBoxItem Content="{DynamicResource Settings_LLM_Local}"
                                      Tag="Local"/>
                      </ComboBox>

                      <TextBlock Grid.Row="4"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Text="{DynamicResource Settings_LLM_PathToModel}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="LlmModelPathTextBox"
                               Grid.Row="6"
                               Grid.Column="0"
                               Margin="0,0,8,0"
                               ToolTip="Pfad zur GGUF-Modelldatei"/>
                      <Button x:Name="LlmModelPathBrowseButton"
                              Grid.Row="6"
                              Grid.Column="1"
                              Content="{DynamicResource Settings_ChoosePath}"
                              Style="{StaticResource SecondaryButton}"
                              Click="LlmModelPathBrowseButton_Click"/>

                      <TextBlock Grid.Row="8"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Text="{DynamicResource Settings_LLM_ModelType}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <ComboBox x:Name="LlmModelTypeComboBox"
                                Grid.Row="10"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                HorizontalAlignment="Left"
                                MinWidth="180"
                                ToolTip="Automatisch erkennt den Modelltyp anhand des Dateinamens">
                        <ComboBoxItem Content="{DynamicResource Settings_LLM_ModelType}"
                                      Tag="Auto"
                                      IsSelected="True"/>
                        <ComboBoxItem Content="{DynamicResource Settings_LLM_ModelType_Phi3}"
                                      Tag="Phi3"/>
                        <ComboBoxItem Content="{DynamicResource Settings_LLM_ModelType_Mistral3}"
                                      Tag="Mistral3"/>
                      </ComboBox>

                      <TextBlock Grid.Row="12"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Text="{DynamicResource Settings_LLM_ModelType_SystemPrompt}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="LlmSystemPromptTextBox"
                               Grid.Row="14"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               AcceptsReturn="True"
                               TextWrapping="Wrap"
                               Height="80"
                               VerticalScrollBarVisibility="Auto"
                               ToolTip="Globaler System-Prompt, der dem Modell als Kontext übergeben wird"/>

                      <StackPanel Grid.Row="16"
                                  Grid.Column="0"
                                  Grid.ColumnSpan="2"
                                  Orientation="Horizontal">
                        <TextBlock Text="{DynamicResource Common_Status}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Margin="0,0,8,0"/>
                        <TextBlock x:Name="LlmStatusTextBlock"
                                   Text="{DynamicResource Settings_LLM_Status}"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                      </StackPanel>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Generierungs-Parameter -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_LLM_Parameters}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="{StaticResource SpacingM}"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBlock Grid.Row="0"
                                 Grid.Column="0"
                                 Text="{DynamicResource Settings_LLM_Parameters_MaxToken}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <StackPanel Grid.Row="0"
                                  Grid.Column="2"
                                  Orientation="Horizontal">
                        <TextBox x:Name="LlmMaxTokensTextBox"
                                 Width="70"
                                 Text="256"/>
                        <TextBlock VerticalAlignment="Center"
                                   Margin="8,0,0,0"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="{StaticResource FontSizeS}"
                                   Text="(64-1024)"/>
                      </StackPanel>

                      <TextBlock Grid.Row="2"
                                 Grid.Column="0"
                                 Text="{DynamicResource Settings_LLM_Parameters_Temperature}"
                                 VerticalAlignment="Center"
                                 Foreground="{StaticResource TextSecondaryBrush}"/>
                      <StackPanel Grid.Row="2"
                                  Grid.Column="2"
                                  Orientation="Horizontal">
                        <Slider x:Name="LlmTemperatureSlider"
                                Width="140"
                                Minimum="0"
                                Maximum="1"
                                Value="0.3"
                                TickFrequency="0.1"
                                IsSnapToTickEnabled="True"/>
                        <TextBlock x:Name="LlmTemperatureValueText"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"
                                   Width="30"
                                   Text="0.3"/>
                      </StackPanel>
                    </Grid>
                  </StackPanel>
                </GroupBox>

                <!-- Prompt-Anweisungen -->
                <GroupBox>
                  <StackPanel>
                    <TextBlock Text="{DynamicResource Settings_LLM_Prompts}"
                               Style="{StaticResource TextLabel}"
                               Margin="0,-6,0,8"/>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingM}"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>

                      <TextBlock Grid.Row="0"
                                 Text="{DynamicResource Settings_LLM_Prompts_Title}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="LlmTitleCustomPromptTextBox"
                               Grid.Row="2"
                               AcceptsReturn="True"
                               TextWrapping="Wrap"
                               Height="50"
                               VerticalScrollBarVisibility="Auto"/>

                      <TextBlock Grid.Row="4"
                                 Text="{DynamicResource Settings_LLM_Prompts_Description}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="LlmDescriptionCustomPromptTextBox"
                               Grid.Row="6"
                               AcceptsReturn="True"
                               TextWrapping="Wrap"
                               Height="50"
                               VerticalScrollBarVisibility="Auto"/>

                      <TextBlock Grid.Row="8"
                                 Text="{DynamicResource Settings_LLM_Prompts_Tags}"
                                 FontSize="{StaticResource FontSizeS}"
                                 Foreground="{StaticResource TextMutedBrush}"/>
                      <TextBox x:Name="LlmTagsCustomPromptTextBox"
                               Grid.Row="10"
                               AcceptsReturn="True"
                               TextWrapping="Wrap"
                               Height="50"
                               VerticalScrollBarVisibility="Auto"/>
                    </Grid>
                  </StackPanel>
                </GroupBox>

              </StackPanel>
            </Grid>
          </Grid>
        </ScrollViewer>
      </Grid>
    </Grid>
  </Grid>
</Window>
