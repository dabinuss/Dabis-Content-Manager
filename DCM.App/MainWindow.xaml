<Window x:Class="DCM.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:core="clr-namespace:DCM.Core.Models;assembly=DCM.Core"
        Title="Dabis Content Manager · © dabinuss"
        Height="750"
        Width="1100"
        MinHeight="600"
        MinWidth="900"
        WindowStartupLocation="CenterScreen"
        Background="#0F0F0F">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="1"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Linke Sidebar -->
        <Border Grid.Column="0"
                Background="{StaticResource SidebarBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Verbundene Services -->
                <StackPanel Grid.Row="0" Margin="12,12,12,8">
                    <TextBlock Text="SERVICES"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,0,0,8"/>
                    <WrapPanel>
                        <!-- YouTube Service Icon -->
                        <Border x:Name="YouTubeServiceIcon"
                                Style="{StaticResource ServiceIconBorder}"
                                Background="#3F3F3F"
                                ToolTip="YouTube: Nicht verbunden"
                                MouseLeftButtonDown="YouTubeServiceIcon_Click">
                            <Grid>
                                <Path Data="M10,5 L10,19 L22,12 Z"
                                      Fill="#717171"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      Width="16"
                                      Height="16"
                                      Stretch="Uniform"/>
                                <Ellipse x:Name="YouTubeConnectionIndicator"
                                         Width="8"
                                         Height="8"
                                         Fill="#717171"
                                         HorizontalAlignment="Right"
                                         VerticalAlignment="Bottom"
                                         Margin="0,0,-2,-2"/>
                            </Grid>
                        </Border>

                        <!-- Placeholder für weitere Services -->
                        <Border Style="{StaticResource ServiceIconBorder}"
                                Background="#2A2A2A"
                                ToolTip="Weitere Services bald verfügbar"
                                Opacity="0.5">
                            <TextBlock Text="+"
                                       FontSize="16"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>
                    </WrapPanel>
                </StackPanel>

                <!-- Logo / App Name -->
                <StackPanel Grid.Row="1" Margin="12,8,12,16">
                    <TextBlock Text="Dabis Content Manager"
                               FontSize="15"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TextBlock Text="v1.0"
                               FontSize="10"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,2,0,0"/>
                </StackPanel>

                <!-- Trennlinie -->
                <Border Grid.Row="2"
                        Height="1"
                        Background="{StaticResource BorderBrush}"
                        Margin="12,0,12,8"/>

                <!-- Navigation -->
                <StackPanel Grid.Row="3">
                    <RadioButton x:Name="NavUpload"
                                 Style="{StaticResource SidebarNavButton}"
                                 IsChecked="True"
                                 Checked="NavButton_Checked"
                                 Tag="0">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M4,12 L12,4 L20,12 M12,4 L12,20"
                                  Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}"
                                  StrokeThickness="2"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  Margin="0,0,10,0"/>
                            <TextBlock Text="Neuer Upload" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavAccounts"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked"
                                 Tag="1">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M12,12 m-4,0 a4,4 0 1,0 8,0 a4,4 0 1,0 -8,0 M4,20 C4,16 8,14 12,14 C16,14 20,16 20,20"
                                  Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}"
                                  StrokeThickness="2"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  Margin="0,0,10,0"/>
                            <TextBlock Text="Konten" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavChannel"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked"
                                 Tag="2">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M4,6 L20,6 M4,6 L4,18 L20,18 L20,6 M8,18 L8,22 L16,22 L16,18"
                                  Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}"
                                  StrokeThickness="2"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  Margin="0,0,10,0"/>
                            <TextBlock Text="Kanalprofil" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavTemplates"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked"
                                 Tag="3">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M6,4 L18,4 L18,20 L6,20 Z M9,8 L15,8 M9,12 L15,12 M9,16 L12,16"
                                  Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}"
                                  StrokeThickness="2"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  Margin="0,0,10,0"/>
                            <TextBlock Text="Templates" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavHistory"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked"
                                 Tag="4">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M12,4 L12,12 L16,14 M12,2 a10,10 0 1,0 0,20 a10,10 0 1,0 0,-20"
                                  Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}"
                                  StrokeThickness="2"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  Margin="0,0,10,0"/>
                            <TextBlock Text="Historie" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavSettings"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked"
                                 Tag="5">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M12,8 a4,4 0 1,0 0,8 a4,4 0 1,0 0,-8 M12,2 L12,4 M12,20 L12,22 M4.93,4.93 L6.34,6.34 M17.66,17.66 L19.07,19.07 M2,12 L4,12 M20,12 L22,12 M4.93,19.07 L6.34,17.66 M17.66,6.34 L19.07,4.93"
                                  Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}"
                                  StrokeThickness="2"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  Margin="0,0,10,0"/>
                            <TextBlock Text="Einstellungen" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>
                </StackPanel>

                <!-- Footer in Sidebar -->
                <StackPanel Grid.Row="4" Margin="12,8,12,12">
                    <Border Height="1"
                            Background="{StaticResource BorderBrush}"
                            Margin="0,0,0,12"/>

                    <TextBlock x:Name="LogLinkTextBlock"
                               FontSize="12"
                               Cursor="Hand"
                               Margin="0,0,0,8"
                               MouseLeftButtonDown="LogLink_Click"
                               ToolTip="Anwendungs-Log anzeigen">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                <Setter Property="Text" Value="📋 Log"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <TextBlock FontSize="11" Margin="0,0,0,8">
                        <Hyperlink NavigateUri="https://github.com/dabinuss/Dabis-Content-Manager"
                                   RequestNavigate="OpenUrlInBrowser">
                            <Run Text="GitHub Repository"/>
                        </Hyperlink>
                    </TextBlock>

                    <TextBlock Text="© dabinuss"
                               FontSize="10"
                               Foreground="{StaticResource TextMutedBrush}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Trennlinie zwischen Sidebar und Content -->
        <Border Grid.Column="1" Background="{StaticResource BorderBrush}"/>

        <!-- Hauptbereich -->
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header mit Status und Progress -->
            <Border Grid.Row="0"
                    Background="{StaticResource SurfaceBrush}"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,0,0,1"
                    Padding="16,10">
                <DockPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
                        <TextBlock Text="Status:"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="12"
                                   Margin="0,0,6,0"/>
                        <TextBlock x:Name="StatusTextBlock"
                                   Text="Bereit"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontSize="12"
                                   FontWeight="SemiBold"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal"
                                DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center">
                        <ProgressBar x:Name="UploadProgressBar"
                                     Width="160" Height="14"
                                     Minimum="0" Maximum="100" Value="0"
                                     Visibility="Collapsed"
                                     Margin="0,0,8,0"/>
                        <TextBlock x:Name="UploadProgressLabel"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="11"
                                   Text=""
                                   Visibility="Collapsed"/>
                    </StackPanel>
                </DockPanel>
            </Border>

            <!-- Content Pages -->
            <Grid Grid.Row="1" Margin="16">

                <!-- Page 0: Neuer Upload -->
                <ScrollViewer x:Name="PageUpload"
                              VerticalScrollBarVisibility="Auto"
                              Visibility="Visible">
                    <Grid MaxWidth="900" HorizontalAlignment="Left">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Gruppe: Video & Plattform -->
                        <GroupBox Header="Video &amp; Plattform" Grid.Row="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="8"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="8"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Video:" Grid.Row="0" Grid.Column="0"/>
                                <TextBox x:Name="VideoPathTextBox" Grid.Row="0" Grid.Column="1" Margin="0,0,6,0"/>
                                <Button x:Name="BrowseButton"
                                        Content="Durchsuchen..."
                                        Grid.Row="0" Grid.Column="2"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="BrowseButton_Click"/>

                                <Label Content="Thumbnail:" Grid.Row="2" Grid.Column="0"/>
                                <Grid Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="ThumbnailPathTextBox" Grid.Column="0" IsReadOnly="True" Margin="0,0,6,0"/>
                                    <Border x:Name="ThumbnailPreviewBorder"
                                            Grid.Column="1"
                                            Width="80" Height="45"
                                            CornerRadius="4"
                                            BorderBrush="{StaticResource BorderBrush}"
                                            BorderThickness="1"
                                            Background="{StaticResource SurfaceLightBrush}"
                                            Margin="0,0,6,0"
                                            Visibility="Collapsed">
                                        <Image x:Name="ThumbnailPreviewImage" Stretch="UniformToFill"/>
                                    </Border>
                                    <Button x:Name="ThumbnailBrowseButton"
                                            Content="Wählen..."
                                            Grid.Column="2"
                                            Style="{StaticResource SecondaryButton}"
                                            Click="ThumbnailBrowseButton_Click"
                                            Margin="0,0,4,0"/>
                                    <Button x:Name="ThumbnailClearButton"
                                            Content="✕"
                                            Grid.Column="3"
                                            Style="{StaticResource SecondaryButton}"
                                            Click="ThumbnailClearButton_Click"
                                            Padding="8,5"
                                            ToolTip="Thumbnail entfernen"/>
                                </Grid>

                                <Label Content="Plattform:" Grid.Row="4" Grid.Column="0"/>
                                <ComboBox x:Name="PlatformComboBox"
                                          Grid.Row="4" Grid.Column="1"
                                          HorizontalAlignment="Left"
                                          MinWidth="180"/>
                            </Grid>
                        </GroupBox>

                        <!-- Gruppe: Metadaten -->
                        <GroupBox Header="Playlist &amp; Metadaten" Grid.Row="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Playlist:" Grid.Row="0" Grid.Column="0"/>
                                <ComboBox x:Name="PlaylistComboBox"
                                          Grid.Row="0" Grid.Column="1"
                                          DisplayMemberPath="Title"
                                          HorizontalAlignment="Left"
                                          MinWidth="260"
                                          ToolTip="Playlist, in die das Video einsortiert wird"/>

                                <Label Content="Sichtbarkeit:" Grid.Row="2" Grid.Column="0"/>
                                <ComboBox x:Name="VisibilityComboBox"
                                          Grid.Row="2" Grid.Column="1"
                                          HorizontalAlignment="Left"
                                          MinWidth="160">
                                    <ComboBoxItem Content="🌐 Öffentlich" Tag="{x:Static core:VideoVisibility.Public}"/>
                                    <ComboBoxItem Content="🔗 Nicht gelistet" Tag="{x:Static core:VideoVisibility.Unlisted}" IsSelected="True"/>
                                    <ComboBoxItem Content="🔒 Privat" Tag="{x:Static core:VideoVisibility.Private}"/>
                                </ComboBox>

                                <Label Content="Template:" Grid.Row="4" Grid.Column="0"/>
                                <ComboBox x:Name="TemplateComboBox"
                                          Grid.Row="4" Grid.Column="1"
                                          DisplayMemberPath="Name"
                                          HorizontalAlignment="Left"
                                          MinWidth="260"
                                          ToolTip="Template für die Beschreibung"
                                          SelectionChanged="TemplateComboBox_SelectionChanged"/>

                                <Label Content="Tags:" Grid.Row="6" Grid.Column="0"/>
                                <TextBox x:Name="TagsTextBox"
                                         Grid.Row="6" Grid.Column="1"
                                         ToolTip="Tags, kommagetrennt (z. B. lets play, gaming, deutsch)"
                                         Margin="0,0,6,0"/>
                                <Button x:Name="GenerateTagsButton"
                                        Grid.Row="6" Grid.Column="2"
                                        Style="{StaticResource AccentButton}"
                                        Click="GenerateTagsButton_Click">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="✨" Foreground="{StaticResource AccentRedBrush}" Margin="0,0,4,0"/>
                                        <TextBlock Text="Vorschlagen"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </GroupBox>

                        <!-- Gruppe: Titel -->
                        <GroupBox Header="Titel" Grid.Row="2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="TitleTextBox" Grid.Column="0" Margin="0,0,6,0"/>
                                <Button x:Name="GenerateTitleButton"
                                        Grid.Column="1"
                                        Style="{StaticResource AccentButton}"
                                        Click="GenerateTitleButton_Click">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="✨" Foreground="{StaticResource AccentRedBrush}" Margin="0,0,4,0"/>
                                        <TextBlock Text="Vorschlagen"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </GroupBox>

                        <!-- Gruppe: Beschreibung + Transkript -->
                        <GroupBox Header="Beschreibung" Grid.Row="3">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="4"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <StackPanel Orientation="Horizontal" Grid.Row="0">
                                    <Button x:Name="GenerateDescriptionButton"
                                            Style="{StaticResource AccentButton}"
                                            Click="GenerateDescriptionButton_Click"
                                            Margin="0,0,6,0">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="✨" Foreground="{StaticResource AccentRedBrush}" Margin="0,0,4,0"/>
                                            <TextBlock Text="Beschreibung vorschlagen"/>
                                        </StackPanel>
                                    </Button>
                                    <Button x:Name="ApplyTemplateButton"
                                            Content="📄 Template anwenden"
                                            Style="{StaticResource SecondaryButton}"
                                            Click="ApplyTemplateButton_Click"/>
                                </StackPanel>

                                <TextBox x:Name="DescriptionTextBox"
                                         Grid.Row="2"
                                         AcceptsReturn="True"
                                         VerticalScrollBarVisibility="Auto"
                                         TextWrapping="Wrap"
                                         Height="120"/>

                                <TextBlock Grid.Row="4"
                                           Text="Transkript (optional):"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="12"/>
                                <TextBox x:Name="TranscriptTextBox"
                                         Grid.Row="6"
                                         AcceptsReturn="True"
                                         VerticalScrollBarVisibility="Auto"
                                         TextWrapping="Wrap"
                                         Height="80"/>
                            </Grid>
                        </GroupBox>

                        <!-- Gruppe: Scheduling -->
                        <GroupBox Header="Veröffentlichung" Grid.Row="4">
                            <StackPanel>
                                <CheckBox x:Name="ScheduleCheckBox"
                                          Content="Geplante Veröffentlichung"
                                          Margin="0,0,0,10"
                                          IsChecked="True"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Datum:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <DatePicker x:Name="ScheduleDatePicker"
                                                Width="150"
                                                SelectedDateFormat="Short"
                                                FirstDayOfWeek="Monday"
                                                IsEnabled="{Binding IsChecked, ElementName=ScheduleCheckBox}"/>
                                    <TextBlock Text="Zeit:" VerticalAlignment="Center" Margin="20,0,10,0"/>
                                    <TextBox x:Name="ScheduleTimeTextBox"
                                             Text="18:00"
                                             Width="80"
                                             IsEnabled="{Binding IsChecked, ElementName=ScheduleCheckBox}"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Upload Button -->
                        <Button x:Name="UploadButton"
                                Content="🚀 Upload starten"
                                Grid.Row="5"
                                Style="{StaticResource PrimaryButton}"
                                HorizontalAlignment="Left"
                                FontSize="13"
                                FontWeight="SemiBold"
                                Padding="20,10"
                                Click="UploadButton_Click"/>
                    </Grid>
                </ScrollViewer>

                <!-- Page 1: Konten -->
                <ScrollViewer x:Name="PageAccounts"
                              VerticalScrollBarVisibility="Auto"
                              Visibility="Collapsed">
                    <Grid MaxWidth="600" HorizontalAlignment="Left">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <GroupBox Header="YouTube-Konto" Grid.Row="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Width="36" Height="36"
                                        CornerRadius="18"
                                        Background="#FF4444"
                                        Margin="0,0,10,0">
                                    <TextBlock Text="YT"
                                               Foreground="White"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               FontSize="12"/>
                                </Border>
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock x:Name="YouTubeAccountStatusTextBlock"
                                               Text="Nicht mit YouTube verbunden."
                                               Foreground="{StaticResource TextPrimaryBrush}"
                                               FontWeight="Medium"
                                               FontSize="13"/>
                                    <TextBlock Text="Klicke auf Verbinden, um dich anzumelden"
                                               Foreground="{StaticResource TextMutedBrush}"
                                               FontSize="11"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                    <Button x:Name="YouTubeConnectButton"
                                            Content="Verbinden"
                                            Style="{StaticResource PrimaryButton}"
                                            Click="YouTubeConnectButton_Click"
                                            Margin="0,0,6,0"/>
                                    <Button x:Name="YouTubeDisconnectButton"
                                            Content="Trennen"
                                            Style="{StaticResource SecondaryButton}"
                                            Click="YouTubeDisconnectButton_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="YouTube-Playlists" Grid.Row="1">
                            <StackPanel>
                                <TextBlock Text="Standard-Playlist für neue Uploads:"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="12"
                                           Margin="0,0,0,4"/>
                                <ListBox x:Name="YouTubePlaylistsListBox"
                                         DisplayMemberPath="Title"
                                         Height="180"
                                         SelectionChanged="YouTubePlaylistsListBox_SelectionChanged"/>
                            </StackPanel>
                        </GroupBox>
                    </Grid>
                </ScrollViewer>

                <!-- Page 2: Kanalprofil -->
                <ScrollViewer x:Name="PageChannel"
                              VerticalScrollBarVisibility="Auto"
                              Visibility="Collapsed">
                    <Grid MaxWidth="550" HorizontalAlignment="Left">
                        <GroupBox Header="Kanalprofil für KI-Vorschläge">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="4"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Name:" Grid.Row="0" Grid.Column="0"/>
                                <TextBox x:Name="ChannelPersonaNameTextBox" Grid.Row="0" Grid.Column="1"/>

                                <Label Content="Channel-Name:" Grid.Row="2" Grid.Column="0"/>
                                <TextBox x:Name="ChannelPersonaChannelNameTextBox" Grid.Row="2" Grid.Column="1"/>

                                <Label Content="Sprache:" Grid.Row="4" Grid.Column="0"/>
                                <ComboBox x:Name="ChannelPersonaLanguageTextBox"
                                          Grid.Row="4" Grid.Column="1"
                                          IsEditable="True"
                                          IsTextSearchEnabled="True"
                                          StaysOpenOnEdit="True"
                                          HorizontalAlignment="Left"
                                          MinWidth="200"
                                          ToolTip="z. B. de-DE oder deutsch"/>

                                <Label Content="Tonfall:" Grid.Row="6" Grid.Column="0"/>
                                <TextBox x:Name="ChannelPersonaToneOfVoiceTextBox"
                                         Grid.Row="6" Grid.Column="1"
                                         ToolTip="z. B. locker, sarkastisch, informativ"/>

                                <Label Content="Content-Typ:" Grid.Row="8" Grid.Column="0"/>
                                <TextBox x:Name="ChannelPersonaContentTypeTextBox"
                                         Grid.Row="8" Grid.Column="1"
                                         ToolTip="z. B. Gaming Highlights, IRL, Tutorials"/>

                                <Label Content="Zielgruppe:" Grid.Row="10" Grid.Column="0"/>
                                <TextBox x:Name="ChannelPersonaTargetAudienceTextBox"
                                         Grid.Row="10" Grid.Column="1"
                                         ToolTip="z. B. Casual Gamer 18-34"/>

                                <TextBlock Grid.Row="12" Grid.Column="0" Grid.ColumnSpan="2"
                                           Text="Zusätzliche Anweisungen:"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="12"/>
                                <TextBox x:Name="ChannelPersonaAdditionalInstructionsTextBox"
                                         Grid.Row="14" Grid.Column="0" Grid.ColumnSpan="2"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         VerticalScrollBarVisibility="Auto"
                                         Height="80"/>

                                <Button x:Name="ChannelProfileSaveButton"
                                        Content="💾 Speichern"
                                        Grid.Row="16" Grid.Column="1"
                                        Style="{StaticResource PrimaryButton}"
                                        HorizontalAlignment="Left"
                                        Click="ChannelProfileSaveButton_Click"/>
                            </Grid>
                        </GroupBox>
                    </Grid>
                </ScrollViewer>

                <!-- Page 3: Templates -->
                <Grid x:Name="PageTemplates" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="260"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*" MaxWidth="480"/>
                    </Grid.ColumnDefinitions>

                    <GroupBox Header="Verfügbare Templates" Grid.Column="0">
                        <DockPanel>
                            <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,8,0,0">
                                <Button x:Name="TemplateNewButton"
                                        Content="+ Neu"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="TemplateNewButton_Click"
                                        Margin="0,0,4,0"/>
                                <Button x:Name="TemplateEditButton"
                                        Content="Bearbeiten"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="TemplateEditButton_Click"
                                        Margin="0,0,4,0"/>
                                <Button x:Name="TemplateDeleteButton"
                                        Content="Löschen"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="TemplateDeleteButton_Click"/>
                            </StackPanel>
                            <ListBox x:Name="TemplateListBox"
                                     DisplayMemberPath="Name"
                                     SelectionChanged="TemplateListBox_SelectionChanged"/>
                        </DockPanel>
                    </GroupBox>

                    <GroupBox Header="Template bearbeiten" Grid.Column="2">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="90"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="6"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="6"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="6"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="4"/>
                                <RowDefinition Height="*" MinHeight="120"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Label Content="Name:" Grid.Row="0" Grid.Column="0"/>
                            <TextBox x:Name="TemplateNameTextBox" Grid.Row="0" Grid.Column="1"/>

                            <Label Content="Plattform:" Grid.Row="2" Grid.Column="0"/>
                            <ComboBox x:Name="TemplatePlatformComboBox"
                                      Grid.Row="2" Grid.Column="1"
                                      HorizontalAlignment="Left"
                                      MinWidth="150"/>

                            <CheckBox x:Name="TemplateIsDefaultCheckBox"
                                      Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2"
                                      Content="Als Standard-Template verwenden"/>

                            <Label Content="Beschreibung:" Grid.Row="6" Grid.Column="0"/>
                            <TextBox x:Name="TemplateDescriptionTextBox"
                                     Grid.Row="6" Grid.Column="1"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     Height="40"
                                     VerticalScrollBarVisibility="Auto"/>

                            <TextBlock Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="2"
                                       Text="Template-Text:"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       FontSize="12"/>
                            <TextBox x:Name="TemplateBodyEditorTextBox"
                                     Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="2"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     VerticalScrollBarVisibility="Auto"/>

                            <Button x:Name="TemplateSaveButton"
                                    Content="💾 Speichern"
                                    Grid.Row="12" Grid.Column="1"
                                    Style="{StaticResource PrimaryButton}"
                                    HorizontalAlignment="Left"
                                    Click="TemplateSaveButton_Click"/>
                        </Grid>
                    </GroupBox>
                </Grid>

                <!-- Page 4: Historie -->
                <Grid x:Name="PageHistory" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="8"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0"
                            Background="{StaticResource SurfaceBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="10,8">
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Plattform:" Margin="0,0,4,0"/>
                            <ComboBox x:Name="HistoryPlatformFilterComboBox"
                                      Width="120"
                                      Margin="0,0,12,0"
                                      SelectionChanged="HistoryFilter_Changed">
                                <ComboBoxItem Content="Alle" IsSelected="True"/>
                                <ComboBoxItem Content="YouTube" Tag="{x:Static core:PlatformType.YouTube}"/>
                            </ComboBox>

                            <Label Content="Status:" Margin="0,0,4,0"/>
                            <ComboBox x:Name="HistoryStatusFilterComboBox"
                                      Width="120"
                                      Margin="0,0,12,0"
                                      SelectionChanged="HistoryFilter_Changed">
                                <ComboBoxItem Content="Alle" IsSelected="True"/>
                                <ComboBoxItem Content="✓ Erfolg" Tag="Success"/>
                                <ComboBoxItem Content="✗ Fehler" Tag="Error"/>
                            </ComboBox>

                            <Button x:Name="HistoryClearButton"
                                    Content="🗑 Leeren"
                                    Style="{StaticResource SecondaryButton}"
                                    Click="HistoryClearButton_Click"/>
                        </StackPanel>
                    </Border>

                    <Border Grid.Row="2"
                            Background="{StaticResource SurfaceBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="1">
                        <DataGrid x:Name="HistoryDataGrid"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  CanUserAddRows="False"
                                  HeadersVisibility="Column"
                                  SelectionMode="Single"
                                  MouseDoubleClick="HistoryDataGrid_MouseDoubleClick">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Datum/Uhrzeit" Binding="{Binding DateTime, StringFormat=G}" Width="140"/>
                                <DataGridTextColumn Header="Plattform" Binding="{Binding Platform}" Width="80"/>
                                <DataGridTextColumn Header="Titel" Binding="{Binding VideoTitle}" Width="*"/>
                                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="70"/>
                                <DataGridTemplateColumn Header="Link" Width="180">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock TextTrimming="CharacterEllipsis">
                                                <Hyperlink NavigateUri="{Binding VideoUrl}" RequestNavigate="OpenUrlInBrowser">
                                                    <Run Text="{Binding VideoUrl}"/>
                                                </Hyperlink>
                                            </TextBlock>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>
                </Grid>

                <!-- Page 5: Einstellungen -->
                <ScrollViewer x:Name="PageSettings"
                              VerticalScrollBarVisibility="Auto"
                              Visibility="Collapsed">
                    <Grid MaxWidth="650" HorizontalAlignment="Left">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <GroupBox Header="Ordner" Grid.Row="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="130"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Video-Ordner:" Grid.Row="0" Grid.Column="0"/>
                                <TextBox x:Name="DefaultVideoFolderTextBox" Grid.Row="0" Grid.Column="1" Margin="0,0,6,0"/>
                                <Button x:Name="DefaultVideoFolderBrowseButton"
                                        Content="Wählen..."
                                        Grid.Row="0" Grid.Column="2"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="DefaultVideoFolderBrowseButton_Click"/>

                                <Label Content="Thumbnail-Ordner:" Grid.Row="2" Grid.Column="0"/>
                                <TextBox x:Name="DefaultThumbnailFolderTextBox" Grid.Row="2" Grid.Column="1" Margin="0,0,6,0"/>
                                <Button x:Name="DefaultThumbnailFolderBrowseButton"
                                        Content="Wählen..."
                                        Grid.Row="2" Grid.Column="2"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="DefaultThumbnailFolderBrowseButton_Click"/>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Upload-Standardwerte" Grid.Row="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="130"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Standard-Zeit:" Grid.Row="0" Grid.Column="0"/>
                                <TextBox x:Name="DefaultSchedulingTimeTextBox"
                                         Grid.Row="0" Grid.Column="1"
                                         HorizontalAlignment="Left"
                                         Width="90"
                                         Text="18:00"/>

                                <Label Content="Sichtbarkeit:" Grid.Row="2" Grid.Column="0"/>
                                <ComboBox x:Name="DefaultVisibilityComboBox"
                                          Grid.Row="2" Grid.Column="1"
                                          HorizontalAlignment="Left"
                                          MinWidth="160">
                                    <ComboBoxItem Content="🌐 Öffentlich" Tag="{x:Static core:VideoVisibility.Public}"/>
                                    <ComboBoxItem Content="🔗 Nicht gelistet" Tag="{x:Static core:VideoVisibility.Unlisted}"/>
                                    <ComboBoxItem Content="🔒 Privat" Tag="{x:Static core:VideoVisibility.Private}"/>
                                </ComboBox>

                                <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2">
                                    <CheckBox x:Name="ConfirmBeforeUploadCheckBox" Content="Vor Upload um Bestätigung fragen"/>
                                    <CheckBox x:Name="AutoApplyDefaultTemplateCheckBox" Content="Template automatisch anwenden (wenn Beschreibung leer)"/>
                                    <CheckBox x:Name="OpenBrowserAfterUploadCheckBox" Content="Nach Upload Browser öffnen"/>
                                    <CheckBox x:Name="AutoConnectYouTubeCheckBox" Content="Beim Start automatisch mit YouTube verbinden"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="KI / LLM" Grid.Row="2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Modus:" Grid.Row="0" Grid.Column="0"/>
                                <ComboBox x:Name="LlmModeComboBox"
                                          Grid.Row="0" Grid.Column="1"
                                          HorizontalAlignment="Left"
                                          MinWidth="150"
                                          SelectionChanged="LlmModeComboBox_SelectionChanged">
                                    <ComboBoxItem Content="Aus" Tag="Off"/>
                                    <ComboBoxItem Content="Lokal (GGUF)" Tag="Local"/>
                                </ComboBox>

                                <Label Content="Modellpfad:" Grid.Row="2" Grid.Column="0"/>
                                <TextBox x:Name="LlmModelPathTextBox"
                                         Grid.Row="2" Grid.Column="1"
                                         Margin="0,0,6,0"
                                         ToolTip="Pfad zur GGUF-Modelldatei"/>
                                <Button x:Name="LlmModelPathBrowseButton"
                                        Content="Wählen..."
                                        Grid.Row="2" Grid.Column="2"
                                        Style="{StaticResource SecondaryButton}"
                                        Click="LlmModelPathBrowseButton_Click"/>

                                <Label Content="Status:" Grid.Row="4" Grid.Column="0"/>
                                <TextBlock x:Name="LlmStatusTextBlock"
                                           Grid.Row="4" Grid.Column="1"
                                           VerticalAlignment="Center"
                                           Text="Nicht konfiguriert"
                                           Foreground="{StaticResource TextMutedBrush}"/>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Generierungs-Parameter" Grid.Row="3">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="6"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="4"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="4"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="4"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="Max Tokens:" Grid.Row="0" Grid.Column="0"/>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1">
                                    <TextBox x:Name="LlmMaxTokensTextBox" Width="70" Text="256"/>
                                    <TextBlock VerticalAlignment="Center"
                                               Margin="6,0,0,0"
                                               Foreground="{StaticResource TextMutedBrush}"
                                               FontSize="11"
                                               Text="(64-1024)"/>
                                </StackPanel>

                                <Label Content="Temperature:" Grid.Row="2" Grid.Column="0"/>
                                <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="1">
                                    <Slider x:Name="LlmTemperatureSlider"
                                            Width="160"
                                            Minimum="0" Maximum="1" Value="0.3"
                                            TickFrequency="0.1"
                                            IsSnapToTickEnabled="True"/>
                                    <TextBlock x:Name="LlmTemperatureValueText"
                                               VerticalAlignment="Center"
                                               Margin="6,0,0,0"
                                               Width="30"
                                               Text="0.3"/>
                                </StackPanel>

                                <TextBlock Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2"
                                           Text="Titel-Anweisung:"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="12"/>
                                <TextBox x:Name="LlmTitleCustomPromptTextBox"
                                         Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="40"
                                         VerticalScrollBarVisibility="Auto"/>

                                <TextBlock Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="2"
                                           Text="Beschreibungs-Anweisung:"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="12"/>
                                <TextBox x:Name="LlmDescriptionCustomPromptTextBox"
                                         Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="2"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="40"
                                         VerticalScrollBarVisibility="Auto"/>

                                <TextBlock Grid.Row="12" Grid.Column="0" Grid.ColumnSpan="2"
                                           Text="Tags-Anweisung:"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="12"/>
                                <TextBox x:Name="LlmTagsCustomPromptTextBox"
                                         Grid.Row="14" Grid.Column="0" Grid.ColumnSpan="2"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="40"
                                         VerticalScrollBarVisibility="Auto"/>
                            </Grid>
                        </GroupBox>

                        <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,4,0,0">
                            <Button x:Name="AppSettingsSaveButton"
                                    Content="💾 App-Einstellungen speichern"
                                    Style="{StaticResource PrimaryButton}"
                                    Click="AppSettingsSaveButton_Click"
                                    Margin="0,0,8,0"/>
                            <Button x:Name="LlmSettingsSaveButton"
                                    Content="💾 LLM-Einstellungen speichern"
                                    Style="{StaticResource PrimaryButton}"
                                    Click="LlmSettingsSaveButton_Click"/>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>

            </Grid>
        </Grid>
    </Grid>
</Window>