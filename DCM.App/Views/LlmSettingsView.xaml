<UserControl x:Class="DCM.App.Views.LlmSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid Margin="0,0,8,0">
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <ScrollViewer Grid.Row="0"
                  VerticalScrollBarVisibility="Auto">
      <Grid HorizontalAlignment="Left"
            MaxWidth="{StaticResource SettingsContentMaxWidth}"
            VerticalAlignment="Top">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"
                            MinWidth="{StaticResource SettingsColumnMinWidth}"/>
          <ColumnDefinition Width="{StaticResource SpacingL}"/>
          <ColumnDefinition Width="*"
                            MinWidth="{StaticResource SettingsColumnMinWidth}"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="{StaticResource SpacingM}"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <GroupBox Grid.Row="0"
                    Style="{StaticResource SettingsSectionGroupBox}"
                    Header="{DynamicResource Settings.LLM.Mode}">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>
              <ComboBox Grid.Row="0"
                        x:Name="LlmModeComboBox"
                        MinWidth="200"
                        SelectionChanged="LlmModeComboBox_SelectionChanged">
                <ComboBoxItem Content="{DynamicResource Settings.LLM.Off}"
                              Tag="Off"/>
                <ComboBoxItem Content="{DynamicResource Settings.LLM.Local}"
                              Tag="Local"/>
              </ComboBox>

              <TextBlock Grid.Row="1"
                         Text="{DynamicResource Settings.LLM.PathToModel}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         Margin="0,8,0,0"/>
              <Grid Grid.Row="2"
                    Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="LlmModelPathTextBox"
                         Grid.Column="0"
                         MinWidth="320"
                         HorizontalAlignment="Stretch"
                         ToolTip="Pfad zur GGUF-Modelldatei"/>
                <Button x:Name="LlmModelPathBrowseButton"
                        Grid.Column="1"
                        Content="{DynamicResource Settings.ChoosePath}"
                        Style="{StaticResource SecondaryButton}"
                        Margin="8,0,0,0"
                        Click="LlmModelPathBrowseButton_Click"/>
              </Grid>

              <TextBlock Grid.Row="3"
                         Text="{DynamicResource Settings.LLM.ModelType}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         Margin="0,8,0,0"/>
              <ComboBox Grid.Row="4"
                        x:Name="LlmModelTypeComboBox"
                        MinWidth="200">
                <ComboBoxItem Content="{DynamicResource Settings.LLM.ModelType.Detect}"
                              Tag="Auto"
                              IsSelected="True"/>
                <ComboBoxItem Content="{DynamicResource Settings.LLM.ModelType.Phi3}"
                              Tag="Phi3"/>
                <ComboBoxItem Content="{DynamicResource Settings.LLM.ModelType.Mistral3}"
                              Tag="Mistral3"/>
              </ComboBox>

              <TextBlock Grid.Row="5"
                         Text="{DynamicResource Settings.LLM.ModelType.SystemPrompt}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         Margin="0,8,0,0"/>
              <TextBox Grid.Row="6"
                       x:Name="LlmSystemPromptTextBox"
                       AcceptsReturn="True"
                       Height="80"
                       TextWrapping="Wrap"
                       VerticalScrollBarVisibility="Auto"/>

              <Grid Grid.Row="7"
                    Margin="0,8,0,0">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="{DynamicResource Common.Status}"
                           Foreground="{StaticResource TextMutedBrush}"
                           Margin="0,0,8,0"/>
                <TextBlock Grid.Column="1"
                           x:Name="LlmStatusTextBlock"
                           Text="{DynamicResource Settings.LLM.Status}"
                           Foreground="{StaticResource TextMutedBrush}"/>
              </Grid>
            </Grid>
          </GroupBox>

          <GroupBox Grid.Row="2"
                    Style="{StaticResource SettingsSectionGroupBox}"
                    Header="{DynamicResource Settings.LLM.Parameters}">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>
              <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="{DynamicResource Settings.LLM.Parameters.MaxToken}"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
                <Grid Grid.Column="1">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                  </Grid.ColumnDefinitions>
                  <TextBox x:Name="LlmMaxTokensTextBox"
                           Grid.Column="0"
                           Width="80"
                           Text="256"/>
                  <TextBlock Grid.Column="1"
                             Text="{DynamicResource Settings.LLM.MaxTokensHint}"
                             FontSize="{StaticResource FontSizeS}"
                             Foreground="{StaticResource TextMutedBrush}"
                             Margin="8,0,0,0"/>
                </Grid>
              </Grid>

              <Grid Grid.Row="1"
                    Margin="0,8,0,0">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="{DynamicResource Settings.LLM.Parameters.Temperature}"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
                <Grid Grid.Column="1">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                  </Grid.ColumnDefinitions>
                  <Slider x:Name="LlmTemperatureSlider"
                          Grid.Column="0"
                          Width="160"
                          Minimum="0"
                          Maximum="1"
                          Value="0.3"
                          TickFrequency="0.1"
                          IsSnapToTickEnabled="True"
                          ValueChanged="LlmTemperatureSlider_ValueChanged"/>
                  <TextBlock x:Name="LlmTemperatureValueText"
                             Grid.Column="1"
                             Margin="8,0,0,0"
                             Width="40"
                             HorizontalAlignment="Left"
                             Text="0.3"/>
                </Grid>
              </Grid>
            </Grid>
          </GroupBox>
        </Grid>

        <Grid Grid.Column="2">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="{StaticResource SpacingM}"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <GroupBox Grid.Row="0"
                    Style="{StaticResource SettingsSectionGroupBox}"
                    Header="{DynamicResource Settings.LLM.Prompts}">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>
              <TextBlock Grid.Row="0"
                         Text="{DynamicResource Settings.LLM.Prompts.Title}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"/>
              <TextBox Grid.Row="1"
                       x:Name="LlmTitleCustomPromptTextBox"
                       Height="60"
                       TextWrapping="Wrap"
                       AcceptsReturn="True"
                       VerticalScrollBarVisibility="Auto"/>

              <TextBlock Grid.Row="2"
                         Text="{DynamicResource Settings.LLM.Prompts.Description}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         Margin="0,8,0,0"/>
              <TextBox Grid.Row="3"
                       x:Name="LlmDescriptionCustomPromptTextBox"
                       Height="60"
                       TextWrapping="Wrap"
                       AcceptsReturn="True"
                       VerticalScrollBarVisibility="Auto"/>

              <TextBlock Grid.Row="4"
                         Text="{DynamicResource Settings.LLM.Prompts.Tags}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         Margin="0,8,0,0"/>
              <TextBox Grid.Row="5"
                       x:Name="LlmTagsCustomPromptTextBox"
                       Height="60"
                       TextWrapping="Wrap"
                       AcceptsReturn="True"
                       VerticalScrollBarVisibility="Auto"/>
            </Grid>
          </GroupBox>

          <GroupBox Grid.Row="2"
                    Style="{StaticResource SettingsSectionGroupBox}"
                    Header="{DynamicResource Settings.Suggestions.Count}">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>
              <Grid Grid.Row="0"
                    Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="{DynamicResource Settings.Suggestions.Title}"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
                <ComboBox Grid.Column="1"
                          x:Name="TitleSuggestionCountComboBox"
                          Width="120">
                  <ComboBoxItem Content="1"/>
                  <ComboBoxItem Content="2"/>
                  <ComboBoxItem Content="3"/>
                  <ComboBoxItem Content="4"/>
                  <ComboBoxItem Content="5"/>
                </ComboBox>
              </Grid>

              <Grid Grid.Row="1"
                    Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="{DynamicResource Settings.Suggestions.Description}"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
                <ComboBox Grid.Column="1"
                          x:Name="DescriptionSuggestionCountComboBox"
                          Width="120">
                  <ComboBoxItem Content="1"/>
                  <ComboBoxItem Content="2"/>
                  <ComboBoxItem Content="3"/>
                  <ComboBoxItem Content="4"/>
                  <ComboBoxItem Content="5"/>
                </ComboBox>
              </Grid>

              <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="{DynamicResource Settings.Suggestions.Tags}"
                           Foreground="{StaticResource TextSecondaryBrush}"/>
                <ComboBox Grid.Column="1"
                          x:Name="TagsSuggestionCountComboBox"
                          Width="120">
                  <ComboBoxItem Content="1"/>
                  <ComboBoxItem Content="2"/>
                  <ComboBoxItem Content="3"/>
                  <ComboBoxItem Content="4"/>
                  <ComboBoxItem Content="5"/>
                </ComboBox>
              </Grid>
            </Grid>
          </GroupBox>
        </Grid>
      </Grid>
    </ScrollViewer>
  </Grid>
</UserControl>

