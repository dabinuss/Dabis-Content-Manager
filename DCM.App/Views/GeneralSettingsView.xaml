<UserControl x:Class="DCM.App.Views.GeneralSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:core="clr-namespace:DCM.Core.Models;assembly=DCM.Core"
             xmlns:config="clr-namespace:DCM.Core.Configuration;assembly=DCM.Core"
             xmlns:ap="clr-namespace:DCM.App.Infrastructure.AttachedProperties">
  <Grid Margin="{StaticResource ViewRootMargin}">
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <ScrollViewer Grid.Row="0"
                  VerticalScrollBarVisibility="Auto">
      <Grid HorizontalAlignment="Stretch"
            MaxWidth="{StaticResource SettingsContentMaxWidth}"
            VerticalAlignment="Top">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="{StaticResource SpacingXXL}"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- LINKE SPALTE -->
      <Grid Grid.Column="0">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="{StaticResource SpacingXL}"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="{StaticResource SpacingXL}"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- BOX 1: Darstellung -->
        <GroupBox Grid.Row="0"
                  Style="{StaticResource SettingsSectionGroupBox}">
          <GroupBox.Header>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="{DynamicResource Settings.Section.Appearance}" VerticalAlignment="Center"/>
              <Border Grid.Column="1" Style="{StaticResource HelpIconButton}"
                      ToolTip="{DynamicResource Settings.Tooltip.Appearance.Example}">
                <TextBlock Style="{StaticResource HelpIconGlyph}"/>
              </Border>
            </Grid>
          </GroupBox.Header>
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingM}"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Sprache -->
            <TextBlock Grid.Row="0"
                       Text="{DynamicResource Settings.Language}"
                       Style="{StaticResource TextLabel}"/>
            <Grid Grid.Row="1">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <ComboBox Grid.Column="0"
                        x:Name="LanguageComboBox"
                        MinWidth="{StaticResource InputMinWidthM}"
                        SelectionChanged="LanguageComboBox_SelectionChanged"/>
              <TextBlock Grid.Column="1"
                         Text="{DynamicResource Settings.Language.Restart.Hint}"
                         FontSize="{StaticResource FontSizeXS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         VerticalAlignment="Center"
                         Margin="8,0,0,0"/>
            </Grid>

            <!-- Theme -->
            <TextBlock Grid.Row="3"
                       Text="{DynamicResource Settings.Theme}"
                       Style="{StaticResource TextLabel}"/>
            <ComboBox Grid.Row="4"
                      x:Name="ThemeComboBox"
                      MinWidth="{StaticResource InputMinWidthM}"
                      SelectionChanged="ThemeComboBox_SelectionChanged">
              <ComboBoxItem Content="{DynamicResource Settings.Theme.Dark}"
                            Tag="Dark"
                            IsSelected="True"/>
            </ComboBox>
          </Grid>
        </GroupBox>

        <!-- BOX 2: Standard-Ordner -->
        <GroupBox Grid.Row="2"
                  Style="{StaticResource SettingsSectionGroupBox}">
          <GroupBox.Header>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="{DynamicResource Settings.Section.Folders}" VerticalAlignment="Center"/>
              <Border Grid.Column="1" Style="{StaticResource HelpIconButton}"
                      ToolTip="{DynamicResource Settings.Tooltip.StandardFolders.Example}">
                <TextBlock Style="{StaticResource HelpIconGlyph}"/>
              </Border>
            </Grid>
          </GroupBox.Header>
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingM}"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Video-Ordner -->
            <TextBlock Grid.Row="0"
                       Text="{DynamicResource Settings.VideoFolder}"
                       Style="{StaticResource TextLabel}"/>
            <Grid Grid.Row="1">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBox x:Name="DefaultVideoFolderTextBox"
                       Grid.Column="0"
                       TextChanged="OnSettingChanged"/>
              <Button x:Name="DefaultVideoFolderBrowseButton"
                      Grid.Column="1"
                      Content="{DynamicResource Settings.ChoosePath}"
                      Style="{StaticResource SecondaryButton}"
                      ap:ButtonIcon.Glyph="&#xe2c8;"
                      Margin="8,0,0,0"
                      Click="DefaultVideoFolderBrowseButton_Click"/>
            </Grid>

            <!-- Thumbnail-Ordner -->
            <TextBlock Grid.Row="3"
                       Text="{DynamicResource Settings.ThumbnailFolder}"
                       Style="{StaticResource TextLabel}"/>
            <Grid Grid.Row="4">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBox x:Name="DefaultThumbnailFolderTextBox"
                       Grid.Column="0"
                       TextChanged="OnSettingChanged"/>
              <Button x:Name="DefaultThumbnailFolderBrowseButton"
                      Grid.Column="1"
                      Content="{DynamicResource Settings.ChoosePath}"
                      Style="{StaticResource SecondaryButton}"
                      ap:ButtonIcon.Glyph="&#xe2c8;"
                      Margin="8,0,0,0"
                      Click="DefaultThumbnailFolderBrowseButton_Click"/>
            </Grid>
          </Grid>
        </GroupBox>

        <!-- BOX 3: Transkription -->
        <GroupBox Grid.Row="4"
                  Style="{StaticResource SettingsSectionGroupBox}">
          <GroupBox.Header>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="{DynamicResource Settings.Section.Transcription}" VerticalAlignment="Center"/>
              <Border Grid.Column="1" Style="{StaticResource HelpIconButton}"
                      ToolTip="{DynamicResource Settings.Tooltip.Transcription.Example}">
                <TextBlock Style="{StaticResource HelpIconGlyph}"/>
              </Border>
            </Grid>
          </GroupBox.Header>
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Auto-Transkription -->
            <CheckBox Grid.Row="0"
                      x:Name="TranscriptionAutoCheckBox"
                      Content="{DynamicResource Settings.Transcription.Auto}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>

            <!-- Modellgröße -->
            <Grid Grid.Row="1" Margin="{StaticResource LabelMarginTop}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0"
                         Text="{DynamicResource Settings.Transcription.Model}"
                         Foreground="{StaticResource TextSecondaryBrush}"
                         VerticalAlignment="Center"/>
              <ComboBox Grid.Column="1"
                        x:Name="TranscriptionModelSizeComboBox"
                        Width="{StaticResource InputMinWidthM}"
                        SelectionChanged="TranscriptionModelSizeComboBox_SelectionChanged">
                <ComboBoxItem Content="{DynamicResource Settings.WhisperModelSize.Tiny}"
                              Tag="{x:Static config:WhisperModelSize.Tiny}"/>
                <ComboBoxItem Content="{DynamicResource Settings.WhisperModelSize.Base}"
                              Tag="{x:Static config:WhisperModelSize.Base}"/>
                <ComboBoxItem Content="{DynamicResource Settings.WhisperModelSize.Small}"
                              Tag="{x:Static config:WhisperModelSize.Small}"/>
                <ComboBoxItem Content="{DynamicResource Settings.WhisperModelSize.Medium}"
                              Tag="{x:Static config:WhisperModelSize.Medium}"/>
                <ComboBoxItem Content="{DynamicResource Settings.WhisperModelSize.Large}"
                              Tag="{x:Static config:WhisperModelSize.Large}"/>
              </ComboBox>
            </Grid>

            <!-- Sprache -->
            <Grid Grid.Row="2" Margin="{StaticResource LabelMarginTop}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0"
                         Text="{DynamicResource Settings.Transcription.Language}"
                         Foreground="{StaticResource TextSecondaryBrush}"
                         VerticalAlignment="Center"/>
              <ComboBox Grid.Column="1"
                        x:Name="TranscriptionLanguageComboBox"
                        Width="{StaticResource InputMinWidthM}"
                        SelectionChanged="OnComboBoxSettingChanged">
                <ComboBoxItem Content="{DynamicResource Settings.WhisperLanguage.De}"
                              Tag="de"/>
                <ComboBoxItem Content="{DynamicResource Settings.WhisperLanguage.En}"
                              Tag="en"/>
                <ComboBoxItem Content="{DynamicResource Settings.WhisperLanguage.Detect}"
                              Tag="auto"/>
              </ComboBox>
            </Grid>

            <!-- Status & Download -->
            <Grid Grid.Row="3" Margin="{StaticResource LabelMarginTop}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0"
                         x:Name="TranscriptionStatusTextBlock"
                         Foreground="{StaticResource TextMutedBrush}"
                         Text="{DynamicResource Settings.Msg.NotChecked}"
                         VerticalAlignment="Center"/>
              <Button Grid.Column="1"
                      x:Name="TranscriptionDownloadButton"
                      Content="{DynamicResource Settings.Whisper.Download}"
                      Style="{StaticResource SecondaryButton}"
                      ap:ButtonIcon.Glyph="&#xe2c4;"
                      Click="TranscriptionDownloadButton_Click"/>
            </Grid>

            <ProgressBar Grid.Row="4"
                         x:Name="TranscriptionDownloadProgressBar"
                         Height="20"
                         Minimum="0"
                         Maximum="100"
                         Visibility="Collapsed"
                         Margin="{StaticResource LabelMarginTop}"/>
          </Grid>
        </GroupBox>
      </Grid>

      <!-- RECHTE SPALTE -->
      <Grid Grid.Column="2">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="{StaticResource SpacingXL}"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- BOX 4: Upload-Verhalten -->
        <GroupBox Grid.Row="0"
                  Style="{StaticResource SettingsSectionGroupBox}">
          <GroupBox.Header>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="{DynamicResource Settings.Section.Upload}" VerticalAlignment="Center"/>
              <Border Grid.Column="1" Style="{StaticResource HelpIconButton}"
                      ToolTip="{DynamicResource Settings.Tooltip.UploadSettings.Example}">
                <TextBlock Style="{StaticResource HelpIconGlyph}"/>
              </Border>
            </Grid>
          </GroupBox.Header>
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingM}"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Standard-Veröffentlichungszeit -->
            <Grid Grid.Row="0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0"
                         Text="{DynamicResource Settings.Upload.DefaultTime}"
                         Foreground="{StaticResource TextSecondaryBrush}"
                         VerticalAlignment="Center"/>
              <TextBox Grid.Column="1"
                       x:Name="DefaultSchedulingTimeTextBox"
                       Width="{StaticResource InputMinWidthXS}"
                       TextChanged="OnSettingChanged"/>
            </Grid>

            <!-- Standard-Sichtbarkeit -->
            <Grid Grid.Row="1" Margin="{StaticResource LabelMarginTop}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0"
                         Text="{DynamicResource Settings.Upload.DefaultVisibility}"
                         Foreground="{StaticResource TextSecondaryBrush}"
                         VerticalAlignment="Center"/>
              <ComboBox Grid.Column="1"
                        x:Name="DefaultVisibilityComboBox"
                        Width="{StaticResource InputMinWidthS}"
                        SelectionChanged="OnComboBoxSettingChanged">
                <ComboBoxItem Content="{DynamicResource Upload.Fields.Visibility.Public}"
                              Tag="{x:Static core:VideoVisibility.Public}"/>
                <ComboBoxItem Content="{DynamicResource Upload.Fields.Visibility.Unlisted}"
                              Tag="{x:Static core:VideoVisibility.Unlisted}"/>
                <ComboBoxItem Content="{DynamicResource Upload.Fields.Visibility.Private}"
                              Tag="{x:Static core:VideoVisibility.Private}"/>
              </ComboBox>
            </Grid>

            <!-- Checkboxen -->
            <CheckBox Grid.Row="3"
                      x:Name="ConfirmBeforeUploadCheckBox"
                      Content="{DynamicResource Settings.Upload.ConfirmBefore}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>
            <CheckBox Grid.Row="4"
                      x:Name="AutoApplyDefaultTemplateCheckBox"
                      Content="{DynamicResource Settings.Upload.AutoTemplate}"
                      Margin="{StaticResource LabelMarginTop}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>
            <CheckBox Grid.Row="5"
                      x:Name="OpenBrowserAfterUploadCheckBox"
                      Content="{DynamicResource Settings.Upload.OpenBrowser}"
                      Margin="{StaticResource LabelMarginTop}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>
            <CheckBox Grid.Row="6"
                      x:Name="AutoConnectYouTubeCheckBox"
                      Content="{DynamicResource Settings.Upload.AutoConnect}"
                      Margin="{StaticResource LabelMarginTop}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>
          </Grid>
        </GroupBox>

        <!-- BOX 5: Entwürfe -->
        <GroupBox Grid.Row="2"
                  Style="{StaticResource SettingsSectionGroupBox}">
          <GroupBox.Header>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Text="{DynamicResource Settings.Section.Drafts}" VerticalAlignment="Center"/>
              <Border Grid.Column="1" Style="{StaticResource HelpIconButton}"
                      ToolTip="{DynamicResource Settings.Tooltip.Drafts.Example}">
                <TextBlock Style="{StaticResource HelpIconGlyph}"/>
              </Border>
            </Grid>
          </GroupBox.Header>
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <CheckBox Grid.Row="0"
                      x:Name="RememberDraftsCheckBox"
                      Content="{DynamicResource Settings.Drafts.Remember}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>
            <CheckBox Grid.Row="1"
                      x:Name="AutoCleanDraftsCheckBox"
                      Content="{DynamicResource Settings.Drafts.AutoClean}"
                      Margin="{StaticResource LabelMarginTop}"
                      Checked="OnCheckBoxSettingChanged"
                      Unchecked="OnCheckBoxSettingChanged"/>
          </Grid>
        </GroupBox>
      </Grid>
      </Grid>
    </ScrollViewer>
  </Grid>
</UserControl>
