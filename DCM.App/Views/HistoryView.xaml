<UserControl x:Class="DCM.App.Views.HistoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:core="clr-namespace:DCM.Core.Models;assembly=DCM.Core"
             xmlns:config="clr-namespace:DCM.Core.Configuration;assembly=DCM.Core">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="{StaticResource SpacingL}"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0"
               Text="{DynamicResource Section.Filters}"
               Style="{StaticResource SectionHeader}"
               Margin="0,0,0,8"/>

    <Border Grid.Row="1"
            Style="{StaticResource SurfaceCard}"
            Padding="{StaticResource SpacingAllM}">
      <StackPanel Orientation="Horizontal">
        <Label Content="{DynamicResource Platform}"
               Margin="0,0,8,0"/>
        <ComboBox x:Name="HistoryPlatformFilterComboBox"
                  Width="120"
                  Margin="{StaticResource SpacingHorizontalL}"
                  SelectionChanged="HistoryFilter_Changed">
          <ComboBoxItem Content="{DynamicResource Common.All}"
                        IsSelected="True"/>
          <ComboBoxItem Content="{DynamicResource Platform.YouTube}"
                        Tag="{x:Static core:PlatformType.YouTube}"/>
        </ComboBox>

        <Label Content="{DynamicResource History.Filter.Status}"
               Margin="0,0,8,0"/>
        <ComboBox x:Name="HistoryStatusFilterComboBox"
                  Width="120"
                  Margin="{StaticResource SpacingHorizontalL}"
                  SelectionChanged="HistoryFilter_Changed">
          <ComboBoxItem Content="{DynamicResource History.Filter.All}"
                        IsSelected="True"/>
          <ComboBoxItem Content="{DynamicResource History.Success}"
                        Tag="Success"/>
          <ComboBoxItem Content="{DynamicResource History.Error}"
                        Tag="Error"/>
        </ComboBox>

      </StackPanel>
    </Border>

    <TextBlock Grid.Row="3"
               Text="{DynamicResource Section.HistoryList}"
               Style="{StaticResource SectionHeader}"
               Margin="0,0,0,8"/>

    <Border Grid.Row="4"
            Style="{StaticResource SurfaceCard}"
            Padding="1">
      <DataGrid x:Name="HistoryDataGrid"
                AutoGenerateColumns="False"
                IsReadOnly="True"
                CanUserAddRows="False"
                HeadersVisibility="Column"
                SelectionMode="Single"
                EnableRowVirtualization="True"
                EnableColumnVirtualization="True"
                VirtualizingPanel.IsVirtualizing="True"
                VirtualizingPanel.VirtualizationMode="Recycling"
                ScrollViewer.CanContentScroll="True"
                MouseDoubleClick="HistoryDataGrid_MouseDoubleClick">
        <DataGrid.Columns>
          <DataGridTextColumn Header="{DynamicResource History.List.DateTime}"
                              Binding="{Binding DateTime, StringFormat=G}"
                              Width="140"/>
          <DataGridTextColumn Header="{DynamicResource Common.Platform}"
                              Binding="{Binding Platform}"
                              Width="80"/>
          <DataGridTextColumn Header="{DynamicResource History.List.Title}"
                              Binding="{Binding VideoTitle}"
                              Width="*"/>
          <DataGridTextColumn Header="{DynamicResource Common.Status}"
                              Binding="{Binding Status}"
                              Width="70"/>
          <DataGridTemplateColumn Header="{DynamicResource History.List.Link}"
                                  Width="180">
            <DataGridTemplateColumn.CellTemplate>
              <DataTemplate>
                <TextBlock TextTrimming="CharacterEllipsis">
                                                <Hyperlink NavigateUri="{Binding VideoUrl}"
                                                           RequestNavigate="OpenUrlInBrowser">
                                                    <Run Text="{Binding VideoUrl}"/>
                                                </Hyperlink>
                </TextBlock>
              </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
          </DataGridTemplateColumn>
        </DataGrid.Columns>
      </DataGrid>
    </Border>
  </Grid>
</UserControl>
