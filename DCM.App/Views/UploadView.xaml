<UserControl x:Class="DCM.App.Views.UploadView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:DCM.App.Models"
             xmlns:core="clr-namespace:DCM.Core.Models;assembly=DCM.Core"
             xmlns:config="clr-namespace:DCM.Core.Configuration;assembly=DCM.Core"
             xmlns:conv="clr-namespace:DCM.App.Infrastructure.Converters"
             xmlns:ap="clr-namespace:DCM.App.Infrastructure.AttachedProperties"
             xmlns:primitives="clr-namespace:System.Windows.Controls.Primitives;assembly=PresentationFramework">
  <UserControl.Resources>
    <!-- IsStringToVisibilityConverter is defined centrally in DarkTheme.Controls.xaml -->
    <!-- View-specific converters: -->
    <conv:HeightToWidthConverter x:Key="HeightToWidth16x9"
                                 Ratio="1.7777777777777777"/>
    <conv:AnyStringToVisibilityConverter x:Key="AnyStringToVisibilityConverter"/>
    <conv:ExtractDurationFromStatusConverter x:Key="ExtractDurationFromStatusConverter"/>
    <Style x:Key="UploadSectionCard"
           TargetType="Border">
      <Setter Property="Background"
              Value="{StaticResource SurfaceElevatedBrush}"/>
      <Setter Property="BorderBrush"
              Value="{StaticResource BorderBrush}"/>
      <Setter Property="BorderThickness"
              Value="1"/>
      <Setter Property="CornerRadius"
              Value="{StaticResource RadiusM}"/>
      <Setter Property="Padding"
              Value="16"/>
      <Setter Property="Margin"
              Value="0,16,0,0"/>
    </Style>
    <Style x:Key="UploadSectionHeader"
           TargetType="TextBlock">
      <Setter Property="FontSize"
              Value="{StaticResource FontSizeM}"/>
      <Setter Property="FontWeight"
              Value="SemiBold"/>
      <Setter Property="Foreground"
              Value="{StaticResource TextPrimaryBrush}"/>
      <Setter Property="Margin"
              Value="0,0,0,10"/>
    </Style>
    <Style x:Key="UploadSectionTitle"
           TargetType="TextBlock">
      <Setter Property="FontSize"
              Value="{StaticResource FontSizeS}"/>
      <Setter Property="FontWeight"
              Value="SemiBold"/>
      <Setter Property="Foreground"
              Value="{StaticResource TextMutedBrush}"/>
      <Setter Property="Margin"
              Value="0,0,0,8"/>
    </Style>
    <Style x:Key="TagChipRemoveButton"
           TargetType="Button">
      <Setter Property="Background"
              Value="Transparent"/>
      <Setter Property="BorderThickness"
              Value="0"/>
      <Setter Property="Padding"
              Value="2"/>
      <Setter Property="FontFamily"
              Value="{StaticResource MaterialIconsFont}"/>
      <Setter Property="FontSize"
              Value="{StaticResource FontSizeS}"/>
      <Setter Property="Foreground"
              Value="{StaticResource TextMutedBrush}"/>
      <Setter Property="Cursor"
              Value="Hand"/>
      <Setter Property="Template"
              Value="{StaticResource ButtonTemplateRadiusS}"/>
      <Style.Triggers>
        <Trigger Property="IsMouseOver"
                 Value="True">
          <Setter Property="Foreground"
                  Value="{StaticResource DangerBrush}"/>
        </Trigger>
      </Style.Triggers>
    </Style>
    <Style x:Key="ScheduleTimeRowButton"
           TargetType="Button">
      <Setter Property="Background"
              Value="Transparent"/>
      <Setter Property="Cursor"
              Value="Hand"/>
      <Setter Property="ClickMode"
              Value="Press"/>
      <Setter Property="Focusable"
              Value="False"/>
      <Setter Property="IsTabStop"
              Value="False"/>
      <Setter Property="FocusVisualStyle"
              Value="{x:Null}"/>
      <Setter Property="Foreground"
              Value="{StaticResource TextPrimaryBrush}"/>
      <Setter Property="BorderThickness"
              Value="0"/>
      <Setter Property="Padding"
              Value="8,4"/>
      <Setter Property="Width"
              Value="36"/>
      <Setter Property="MinWidth"
              Value="36"/>
      <Setter Property="FontSize"
              Value="{StaticResource FontSizeM}"/>
      <Setter Property="HorizontalContentAlignment"
              Value="Center"/>
      <Setter Property="VerticalContentAlignment"
              Value="Center"/>
      <Setter Property="Template"
              Value="{StaticResource ButtonTemplateRadiusS}"/>
      <Style.Triggers>
        <Trigger Property="Tag"
                 Value="Selected">
          <Setter Property="Background"
                  Value="{StaticResource PrimaryBrush}"/>
          <Setter Property="Foreground"
                  Value="{StaticResource PrimaryTextBrush}"/>
          <Setter Property="FontWeight"
                  Value="SemiBold"/>
        </Trigger>
        <Trigger Property="IsEnabled"
                 Value="False">
          <Setter Property="Opacity"
                  Value="0.35"/>
          <Setter Property="Cursor"
                  Value="Arrow"/>
          <Setter Property="Background"
                  Value="Transparent"/>
          <Setter Property="Foreground"
                  Value="{StaticResource TextDisabledBrush}"/>
        </Trigger>
        <Trigger Property="IsMouseOver"
                 Value="True">
          <Setter Property="Background"
                  Value="{StaticResource SurfaceHoverBrush}"/>
        </Trigger>
      </Style.Triggers>
    </Style>
    <Style x:Key="ScheduleTimeColon"
           TargetType="TextBlock">
      <Setter Property="Text"
              Value=":"/>
      <Setter Property="FontSize"
              Value="{StaticResource FontSizeM}"/>
      <Setter Property="FontWeight"
              Value="SemiBold"/>
      <Setter Property="Foreground"
              Value="{StaticResource TextSecondaryBrush}"/>
      <Setter Property="HorizontalAlignment"
              Value="Center"/>
      <Setter Property="VerticalAlignment"
              Value="Center"/>
    </Style>
    <Style x:Key="CalendarDayButtonStyle"
           TargetType="{x:Type primitives:CalendarDayButton}"
           BasedOn="{StaticResource CalendarDayButtonStyle}">
      <Setter Property="MinWidth"
              Value="42"/>
      <Setter Property="MinHeight"
              Value="42"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type primitives:CalendarDayButton}">
            <Grid>
              <Border x:Name="Background"
                      Background="{TemplateBinding Background}"
                      CornerRadius="{StaticResource RadiusS}"/>
              <Border x:Name="TodayHighlight"
                      BorderBrush="{StaticResource PrimaryBrush}"
                      BorderThickness="1"
                      CornerRadius="{StaticResource RadiusS}"
                      Visibility="Collapsed"/>
              <ContentPresenter x:Name="Content"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                Margin="1"/>
            </Grid>
            <ControlTemplate.Triggers>
              <Trigger Property="IsToday" Value="True">
                <Setter TargetName="TodayHighlight" Property="Visibility" Value="Visible"/>
              </Trigger>
              <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="Background" Property="Background" Value="{StaticResource PrimaryBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
              </Trigger>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Background" Property="Background" Value="{StaticResource SurfaceHoverBrush}"/>
              </Trigger>
              <MultiTrigger>
                <MultiTrigger.Conditions>
                  <Condition Property="IsSelected" Value="True"/>
                  <Condition Property="IsMouseOver" Value="True"/>
                </MultiTrigger.Conditions>
                <Setter TargetName="Background" Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
              </MultiTrigger>
              <Trigger Property="IsInactive" Value="True">
                <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
              </Trigger>
              <Trigger Property="IsBlackedOut" Value="True">
                <Setter Property="Foreground" Value="{StaticResource TextDisabledBrush}"/>
                <Setter TargetName="Background" Property="Background" Value="Transparent"/>
                <Setter Property="Opacity" Value="0.35"/>
                <Setter Property="Cursor" Value="Arrow"/>
                <Setter Property="IsEnabled" Value="False"/>
              </Trigger>
              <MultiTrigger>
                <MultiTrigger.Conditions>
                  <Condition Property="IsBlackedOut" Value="True"/>
                  <Condition Property="IsMouseOver" Value="True"/>
                </MultiTrigger.Conditions>
                <Setter TargetName="Background" Property="Background" Value="Transparent"/>
              </MultiTrigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </UserControl.Resources>
  <Grid x:Name="RootGrid"
      Margin="0,0,8,0">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="{StaticResource SpacingL}"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- HEADER -->
    <StackPanel x:Name="HeaderPanel"
                Grid.Row="0"
                Visibility="Collapsed"/>

    <!-- FILES + DETAILS CONTAINER -->
    <Border Grid.Row="4"
            Background="Transparent"
            BorderThickness="0"
            Margin="0"
            VerticalAlignment="Stretch">
        <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition x:Name="UploadListColumn"
                            Width="320"/>
          <ColumnDefinition x:Name="UploadListDividerColumn"
                            Width="1"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border x:Name="UploadListDivider"
                Grid.Column="1"
                Style="{StaticResource MasterDetailDivider}"/>

        <Grid x:Name="UploadListPanel"
              Grid.Column="0"
              Margin="10,12,0,0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <Button Grid.Row="0"
                  Style="{StaticResource SecondaryButton}"
                  Click="AddVideosButton_Click"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center"
                  VerticalContentAlignment="Center"
                  Margin="0,0,8,10"
                  Padding="20,26"
                  MinHeight="96">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>
              <StackPanel Grid.Row="0"
                          Orientation="Horizontal"
                          HorizontalAlignment="Center">
                <TextBlock Style="{StaticResource IconXL}"
                           Text="&#xe145;"
                           Margin="0,0,10,0"/>
                <TextBlock Text="{DynamicResource Upload.AddVideos}"
                           FontWeight="SemiBold"
                           FontSize="{StaticResource FontSizeM}"
                           VerticalAlignment="Center"/>
              </StackPanel>
              <TextBlock Grid.Row="1"
                         Text="{DynamicResource Upload.AddVideos.Formats}"
                         FontSize="{StaticResource FontSizeXS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         HorizontalAlignment="Center"
                         Margin="0,8,0,0"/>
            </Grid>
          </Button>

          <Border Grid.Row="1"
                  Height="1"
                  Background="{StaticResource SectionDividerBrush}"
                  Margin="0,8,8,10"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Center"
                  SnapsToDevicePixels="True"/>

          <TextBlock Grid.Row="2"
                     Margin="0,0,8,8"
                     HorizontalAlignment="Left">
            <Hyperlink Click="TranscribeAllButton_Click">
              <Run x:Name="TranscribeAllActionLinkLabel"
                   Text="{DynamicResource Upload.Actions.TranscribeAll}"/>
            </Hyperlink>
          </TextBlock>

          <Border Grid.Row="3"
                  Padding="0">
            <ListBox x:Name="UploadItemsListBox"
                     BorderThickness="0"
                     Background="{x:Null}"
                     SelectionMode="Single"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     VirtualizingPanel.IsVirtualizing="True"
                     VirtualizingPanel.VirtualizationMode="Recycling"
                     VirtualizingStackPanel.ScrollUnit="Pixel"
                     ScrollViewer.CanContentScroll="True"
                     VerticalAlignment="Stretch"
                     SelectionChanged="UploadItemsListBox_SelectionChanged"
                     RequestBringIntoView="UploadItemsListBox_RequestBringIntoView">
          <ListBox.Resources>
            <Style TargetType="ScrollViewer"
                   BasedOn="{StaticResource LeftScrollbarScrollViewerStyle}"/>
          </ListBox.Resources>
          <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
              <Setter Property="Margin"
                      Value="0,0,0,12"/>
              <Setter Property="Padding"
                      Value="0"/>
              <Setter Property="HorizontalContentAlignment"
                      Value="Stretch"/>
              <Setter Property="Background"
                      Value="Transparent"/>
              <Setter Property="BorderThickness"
                      Value="0"/>
              <Setter Property="FocusVisualStyle"
                      Value="{x:Null}"/>
              <Setter Property="SnapsToDevicePixels"
                      Value="True"/>
              <Setter Property="Template">
                <Setter.Value>
                  <ControlTemplate TargetType="ListBoxItem">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="True">
                      <ContentPresenter Margin="{TemplateBinding Padding}"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                  </ControlTemplate>
                </Setter.Value>
              </Setter>
            </Style>
          </ListBox.ItemContainerStyle>
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Border x:Name="UploadItemCard"
                      Padding="6,6,4,6">
                <Border.Style>
                  <Style TargetType="Border">
                    <Setter Property="Background"
                            Value="{StaticResource SurfaceElevatedBrush}"/>
                    <Setter Property="BorderBrush"
                            Value="{StaticResource BorderBrush}"/>
                    <Setter Property="CornerRadius"
                            Value="{StaticResource RadiusS}"/>
                    <Setter Property="Margin"
                            Value="0,0,8,0"/>
                    <Style.Triggers>
                      <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem}, Path=IsMouseOver}"
                                   Value="True">
                        <Setter Property="Background"
                                Value="{StaticResource SurfaceHoverBrush}"/>
                        <Setter Property="BorderBrush"
                                Value="{StaticResource BorderHoverBrush}"/>
                      </DataTrigger>
                      <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem}, Path=IsSelected}"
                                   Value="True">
                        <Setter Property="Background"
                                Value="{StaticResource ListItemSelectedBrush}"/>
                        <Setter Property="BorderBrush"
                                Value="{StaticResource BorderStrongBrush}"/>
                        <Setter Property="CornerRadius"
                                Value="{StaticResource ListItemSelectedCornerRadius}"/>
                        <Setter Property="Margin"
                                Value="0"/>
                      </DataTrigger>
                    </Style.Triggers>
                  </Style>
                </Border.Style>
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="72"/>
                    <ColumnDefinition Width="{StaticResource SpacingM}"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="1"/>
                    <ColumnDefinition Width="32"/>
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <Border Grid.Row="0"
                          Grid.Column="0"
                          Grid.RowSpan="4"
                          Width="72"
                          Height="72"
                          Background="{StaticResource SurfaceSunkenBrush}"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="1"
                          CornerRadius="{StaticResource RadiusS}"
                          ClipToBounds="True">
                    <Grid>
                      <Image Source="{Binding VideoPreviewPath}"
                             Stretch="UniformToFill"
                             Visibility="{Binding VideoPreviewPath, Converter={StaticResource IsStringToVisibilityConverter}}"/>
                      <TextBlock Text="{DynamicResource Upload.VideoPreview.Placeholder}"
                                 FontSize="{StaticResource FontSizeXS}"
                                 Foreground="{StaticResource TextMutedBrush}"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center"
                                 TextAlignment="Center"
                                 Visibility="{Binding VideoPreviewPath, Converter={StaticResource IsStringToVisibilityConverter}, ConverterParameter=invert}"/>
                    </Grid>
                  </Border>

                  <TextBlock Grid.Row="0"
                             Grid.Column="2"
                             Text="{Binding DisplayName}"
                             FontWeight="SemiBold"
                             FontSize="{StaticResource FontSizeL}"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             TextTrimming="CharacterEllipsis"
                             Margin="0,0,8,0"/>

                  <Border Grid.Row="0"
                          Grid.Column="3"
                          Grid.RowSpan="4"
                          Background="{StaticResource BorderBrush}"
                          Margin="0"
                          VerticalAlignment="Stretch"
                          HorizontalAlignment="Stretch"/>

                  <Button Grid.Row="0"
                          Grid.Column="4"
                          Grid.RowSpan="4"
                          Style="{StaticResource SuggestionCloseButtonStyle}"
                          Click="RemoveDraftButton_Click"
                          Tag="{Binding}"
                          Margin="0"
                          HorizontalAlignment="Right"
                          VerticalAlignment="Center"
                          ToolTip="{DynamicResource Common.Remove}">
                    <TextBlock Text="&#xe5cd;"
                               FontFamily="{StaticResource MaterialIconsFont}"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                  </Button>

                  <StackPanel Grid.Row="1"
                              Grid.Column="2"
                              Orientation="Horizontal"
                              Margin="0,4,0,0">
                    <TextBlock Text="{Binding VideoResolution, TargetNullValue='-', Mode=OneWay}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="{StaticResource FontSizeXS}"/>
                    <TextBlock Text="{DynamicResource Common.Separator.Pipe}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="{StaticResource FontSizeXS}"/>
                    <TextBlock Text="{Binding VideoFps, TargetNullValue='-', Mode=OneWay}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="{StaticResource FontSizeXS}"/>
                    <TextBlock Text="{DynamicResource Common.Unit.Fps}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="{StaticResource FontSizeXS}"
                               Visibility="{Binding VideoFps, Converter={StaticResource IsStringToVisibilityConverter}}"/>
                    <TextBlock Text="{DynamicResource Common.Separator.Pipe}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="{StaticResource FontSizeXS}"/>
                    <TextBlock Text="{Binding FileSizeDisplay, TargetNullValue='-', Mode=OneWay}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="{StaticResource FontSizeXS}"/>
                  </StackPanel>

                  <StackPanel Grid.Row="2"
                              Grid.Column="2"
                              Orientation="Horizontal"
                              Margin="0,2,0,0">
                    <StackPanel.Visibility>
                      <MultiBinding Converter="{StaticResource AnyStringToVisibilityConverter}">
                        <Binding Path="VideoDuration"/>
                        <Binding Path="VideoCodec"/>
                      </MultiBinding>
                    </StackPanel.Visibility>
                    <TextBlock Text="{Binding VideoDuration}"
                               Foreground="{StaticResource TextMutedBrush}"
                               FontSize="{StaticResource FontSizeXS}"
                               Visibility="{Binding VideoDuration, Converter={StaticResource IsStringToVisibilityConverter}}"/>
                    <TextBlock Text="{DynamicResource Common.Separator.Pipe}"
                               Foreground="{StaticResource TextMutedBrush}"
                               FontSize="{StaticResource FontSizeXS}"
                               Visibility="{Binding VideoDuration, Converter={StaticResource IsStringToVisibilityConverter}}"/>
                    <TextBlock Text="{Binding VideoCodec}"
                               Foreground="{StaticResource TextMutedBrush}"
                               FontSize="{StaticResource FontSizeXS}"
                               Visibility="{Binding VideoCodec, Converter={StaticResource IsStringToVisibilityConverter}}"/>
                  </StackPanel>

                  <WrapPanel Grid.Row="3"
                             Grid.Column="2"
                             Margin="0,4,0,0">
                    <Border Padding="6,2"
                            CornerRadius="{StaticResource RadiusS}"
                            Background="{StaticResource SurfaceSunkenBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="1"
                            Margin="0,0,6,4">
                      <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="UploadStateIcon"
                                   FontFamily="{StaticResource MaterialIconsFont}"
                                   FontSize="{StaticResource FontSizeS}"
                                   Text="&#xe86c;"
                                   Foreground="{StaticResource SuccessBrush}"
                                   Margin="0,0,4,0"
                                   RenderTransformOrigin="0.5,0.5">
                          <TextBlock.RenderTransform>
                            <RotateTransform Angle="0"/>
                          </TextBlock.RenderTransform>
                          <TextBlock.Style>
                            <Style TargetType="TextBlock">
                              <Style.Triggers>
                                <DataTrigger Binding="{Binding UploadState}"
                                             Value="{x:Static models:UploadDraftUploadState.Uploading}">
                                  <Setter Property="Text"
                                          Value="&#xe863;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource PrimaryBrush}"/>
                                  <DataTrigger.EnterActions>
                                    <BeginStoryboard x:Name="UploadSpin">
                                      <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                                                         From="0"
                                                         To="360"
                                                         Duration="0:0:1"/>
                                      </Storyboard>
                                    </BeginStoryboard>
                                  </DataTrigger.EnterActions>
                                  <DataTrigger.ExitActions>
                                    <StopStoryboard BeginStoryboardName="UploadSpin"/>
                                  </DataTrigger.ExitActions>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UploadState}"
                                             Value="{x:Static models:UploadDraftUploadState.Failed}">
                                  <Setter Property="Text"
                                          Value="&#xe000;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource DangerBrush}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UploadState}"
                                             Value="{x:Static models:UploadDraftUploadState.Pending}">
                                  <Setter Property="Text"
                                          Value="&#xe8b5;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource TextMutedBrush}"/>
                                </DataTrigger>
                              </Style.Triggers>
                            </Style>
                          </TextBlock.Style>
                        </TextBlock>
                        <TextBlock x:Name="UploadStateLabel"
                                   FontSize="{StaticResource FontSizeXS}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   VerticalAlignment="Center">
                          <TextBlock.Style>
                            <Style TargetType="TextBlock">
                              <Setter Property="Text"
                                      Value="{DynamicResource Upload.Status.Ready}"/>
                              <Style.Triggers>
                                <DataTrigger Binding="{Binding UploadState}"
                                             Value="{x:Static models:UploadDraftUploadState.Uploading}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Upload.Status.Uploading}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UploadState}"
                                             Value="{x:Static models:UploadDraftUploadState.Failed}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Upload.Status.Failed}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UploadState}"
                                             Value="{x:Static models:UploadDraftUploadState.Pending}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Upload.Status.Pending}"/>
                                </DataTrigger>
                              </Style.Triggers>
                            </Style>
                          </TextBlock.Style>
                        </TextBlock>
                      </StackPanel>
                    </Border>

                    <Border Padding="6,2"
                            CornerRadius="{StaticResource RadiusS}"
                            Background="{StaticResource SurfaceSunkenBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="1">
                      <Border.Style>
                        <Style TargetType="Border">
                          <Setter Property="Visibility"
                                  Value="Visible"/>
                          <Style.Triggers>
                            <DataTrigger Binding="{Binding TranscriptionState}"
                                         Value="{x:Static models:UploadDraftTranscriptionState.None}">
                              <Setter Property="Visibility"
                                      Value="Collapsed"/>
                            </DataTrigger>
                          </Style.Triggers>
                        </Style>
                      </Border.Style>
                      <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="TranscriptionStateIcon"
                                   FontFamily="{StaticResource MaterialIconsFont}"
                                   FontSize="{StaticResource FontSizeS}"
                                   Text="&#xe86c;"
                                   Foreground="{StaticResource SuccessBrush}"
                                   Margin="0,0,4,0"
                                   RenderTransformOrigin="0.5,0.5">
                          <TextBlock.RenderTransform>
                            <RotateTransform Angle="0"/>
                          </TextBlock.RenderTransform>
                          <TextBlock.Style>
                            <Style TargetType="TextBlock">
                              <Style.Triggers>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Running}">
                                  <Setter Property="Text"
                                          Value="&#xe863;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource PrimaryBrush}"/>
                                  <DataTrigger.EnterActions>
                                    <BeginStoryboard x:Name="TranscribeSpin">
                                      <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                                                         From="0"
                                                         To="360"
                                                         Duration="0:0:1"/>
                                      </Storyboard>
                                    </BeginStoryboard>
                                  </DataTrigger.EnterActions>
                                  <DataTrigger.ExitActions>
                                    <StopStoryboard BeginStoryboardName="TranscribeSpin"/>
                                  </DataTrigger.ExitActions>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Failed}">
                                  <Setter Property="Text"
                                          Value="&#xe000;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource DangerBrush}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Cancelled}">
                                  <Setter Property="Text"
                                          Value="&#xe5c9;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource TextMutedBrush}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Pending}">
                                  <Setter Property="Text"
                                          Value="&#xe8b5;"/>
                                  <Setter Property="Foreground"
                                          Value="{StaticResource TextMutedBrush}"/>
                                </DataTrigger>
                              </Style.Triggers>
                            </Style>
                          </TextBlock.Style>
                        </TextBlock>
                        <TextBlock x:Name="TranscriptionStateLabel"
                                   FontSize="{StaticResource FontSizeXS}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   VerticalAlignment="Center">
                          <TextBlock.Style>
                            <Style TargetType="TextBlock">
                              <Setter Property="Text"
                                      Value="{DynamicResource Transcription.Status.CompletedShort}"/>
                              <Style.Triggers>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Running}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Transcription.Status.RunningShort}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Failed}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Transcription.Status.FailedShort}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Cancelled}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Transcription.Status.CancelledShort}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionState}"
                                             Value="{x:Static models:UploadDraftTranscriptionState.Pending}">
                                  <Setter Property="Text"
                                          Value="{DynamicResource Transcription.Status.PendingShort}"/>
                                </DataTrigger>
                              </Style.Triggers>
                            </Style>
                          </TextBlock.Style>
                        </TextBlock>
                        <TextBlock Text="{Binding TranscriptionStatus, Converter={StaticResource ExtractDurationFromStatusConverter}}"
                                   FontSize="{StaticResource FontSizeXS}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center">
                          <TextBlock.Style>
                            <Style TargetType="TextBlock">
                              <Setter Property="Visibility"
                                      Value="Visible"/>
                              <Style.Triggers>
                                <DataTrigger Binding="{Binding TranscriptionStatus, Converter={StaticResource ExtractDurationFromStatusConverter}}"
                                             Value="{x:Null}">
                                  <Setter Property="Visibility"
                                          Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TranscriptionStatus, Converter={StaticResource ExtractDurationFromStatusConverter}}"
                                             Value="">
                                  <Setter Property="Visibility"
                                          Value="Collapsed"/>
                                </DataTrigger>
                              </Style.Triggers>
                            </Style>
                          </TextBlock.Style>
                        </TextBlock>
                      </StackPanel>
                    </Border>
                  </WrapPanel>
                </Grid>
              </Border>
            </DataTemplate>
          </ListBox.ItemTemplate>
          </ListBox>
          </Border>
        </Grid>

        <ScrollViewer x:Name="UploadContentScrollViewer"
                      Grid.Column="2"
                      Margin="12,8,8,0"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      VerticalAlignment="Stretch"
                      Padding="0,0,12,0">
          <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="{StaticResource SpacingS}"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <Grid x:Name="EmptyContentPanel"
                Grid.Row="0"
                Grid.RowSpan="4"
                Background="Transparent"
                Height="{Binding ElementName=UploadContentScrollViewer, Path=ActualHeight}"
                MinHeight="360"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                AllowDrop="True"
                DragOver="VideoDrop_DragOver"
                DragLeave="VideoDrop_DragLeave"
                Drop="VideoDrop_Drop"
                MouseLeftButtonDown="VideoDropZone_Click">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="2*"/>
              </Grid.RowDefinitions>
              <StackPanel Grid.Row="1"
                          HorizontalAlignment="Center"
                          Margin="32">
                <TextBlock Style="{StaticResource Icon}"
                           Text="&#xe070;"
                           FontSize="{StaticResource FontSizeXXXXL}"
                           Foreground="{StaticResource TextMutedBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,24"/>
                <TextBlock Text="{DynamicResource Upload.Empty.Title}"
                           FontSize="{StaticResource FontSizeXXL}"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimaryBrush}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="{DynamicResource Upload.Empty.Formats}"
                           FontSize="{StaticResource FontSizeM}"
                           Foreground="{StaticResource TextMutedBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,12,0,0"/>
              </StackPanel>
            </Grid>
          </Grid>

          <ContentControl x:Name="VideoDropZone"
                          Grid.Row="0"
                          Style="{StaticResource VideoDropZoneStyle}"
                          Background="{StaticResource SurfaceElevatedBrush}"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="1"
                          Visibility="Collapsed"
                          DragOver="VideoDrop_DragOver"
                          DragLeave="VideoDrop_DragLeave"
                          Drop="VideoDrop_Drop"
                          MouseLeftButtonDown="VideoDropZone_Click">

      <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <!-- Video ausgewaehlt -->
          <Grid x:Name="VideoDropSelectedState"
                Grid.Row="0"
                Visibility="Collapsed">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Video Preview -->
            <Border Grid.Column="0"
                    Width="{Binding ElementName=VideoInfoPanel, Path=ActualHeight, Converter={StaticResource HeightToWidth16x9}}"
                    Height="{Binding ElementName=VideoInfoPanel, Path=ActualHeight}"
                    MinWidth="160"
                    MinHeight="90"
                    CornerRadius="{StaticResource RadiusM}"
                    Background="{StaticResource SurfaceLightBrush}"
                    BorderBrush="{StaticResource BorderStrongBrush}"
                    BorderThickness="0.5"
                    Margin="8,8,8,8"
                    VerticalAlignment="Top"
                    ClipToBounds="True">
              <Grid>
                <Grid x:Name="VideoPreviewEmptyState">
                  <TextBlock Style="{StaticResource IconXXL}"
                             Text="&#xe53f;"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"
                             Margin="0"/>
                </Grid>
                <Image x:Name="VideoPreviewImage"
                       Stretch="UniformToFill"
                       Visibility="Collapsed"/>
              </Grid>
            </Border>

            <!-- Video Info -->
            <Grid x:Name="VideoInfoPanel"
                  Grid.Column="1"
                  VerticalAlignment="Top"
                  Margin="0,8,0,8">
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="{StaticResource SpacingM}"/>
                <RowDefinition Height="*"/>
              </Grid.RowDefinitions>

              <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Center">
                <TextBlock x:Name="VideoFileNameTextBlock"
                             FontSize="{StaticResource FontSizeL}"
                             FontWeight="SemiBold"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             TextTrimming="CharacterEllipsis"/>
                  <Border Background="{StaticResource SurfaceSunkenBrush}"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="1"
                          CornerRadius="{StaticResource RadiusS}"
                          Margin="10,0,0,0"
                          Padding="6,2"
                          VerticalAlignment="Center">
                    <TextBlock x:Name="VideoFileSizeTextBlock"
                               Text="{DynamicResource Upload.VideoFileSize.Unknown}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                  </Border>
                </StackPanel>
              </Grid>

              <Border Grid.Row="2"
                      Background="{StaticResource SurfaceSunkenBrush}"
                      BorderBrush="{StaticResource BorderBrush}"
                      BorderThickness="1"
                      CornerRadius="{StaticResource RadiusS}"
                      Padding="10">
                <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingS}"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>

                  <StackPanel Grid.Row="0"
                              Grid.Column="0"
                              Margin="0,0,12,0">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.Resolution}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoResolutionTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>
                  <StackPanel Grid.Row="0"
                              Grid.Column="1"
                              Margin="0,0,12,0">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.Fps}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoFpsTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>
                  <StackPanel Grid.Row="0"
                              Grid.Column="2"
                              Margin="0,0,12,0">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.Duration}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoDurationTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>
                  <StackPanel Grid.Row="0"
                              Grid.Column="3">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.VideoCodec}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoCodecTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>

                  <StackPanel Grid.Row="2"
                              Grid.Column="0"
                              Margin="0,0,12,0">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.VideoBitrate}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoBitrateTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>
                  <StackPanel Grid.Row="2"
                              Grid.Column="1"
                              Margin="0,0,12,0">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.Audio}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoAudioTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>
                  <StackPanel Grid.Row="2"
                              Grid.Column="2"
                              Margin="0,0,12,0">
                    <TextBlock Text="{DynamicResource Upload.VideoInfo.AudioBitrate}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"/>
                    <TextBlock x:Name="VideoAudioBitrateTextBlock"
                               FontSize="{StaticResource FontSizeM}"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                  </StackPanel>
                </Grid>
              </Border>
            </Grid>

            <!-- Buttons -->
            <StackPanel Grid.Column="2"
                        VerticalAlignment="Top"
                        Margin="8,8,8,8">
              <Button x:Name="UploadButton"
                      Style="{StaticResource PrimaryButtonLarge}"
                      Click="UploadButton_Click"
                      IsEnabled="False"
                      ap:ButtonIcon.Glyph="&#xeb9b;"
                      Content="{DynamicResource Upload.StartUpload}"
                      Margin="0,0,0,12"/>
              <Button x:Name="VideoChangeButton"
                      Content="{DynamicResource Common.Change}"
                      Style="{StaticResource TertiaryButton}"
                      ap:ButtonIcon.Glyph="&#xe3c9;"
                      Click="VideoChangeButton_Click"
                      MinWidth="140"/>
            </StackPanel>
          </Grid>
          <Border Grid.Row="1"
                  Height="1"
                  Background="{StaticResource BorderBrush}"
                  Margin="0,8,0,8"
                  HorizontalAlignment="Stretch"
                  SnapsToDevicePixels="True"/>
          <Border x:Name="UploadActionBar"
                  Grid.Row="2"
                  Background="Transparent"
                  BorderThickness="0"
                  CornerRadius="0"
                  Padding="10,8"
                  Visibility="{Binding Visibility, ElementName=VideoDropZone}">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <StackPanel Orientation="Horizontal">
                <Button x:Name="ActionFillAllButton"
                        Style="{StaticResource SecondaryButton}"
                        ap:ButtonIcon.Glyph="&#xe663;"
                        Content="{DynamicResource Upload.Actions.FillAll}"
                        Click="FastFillSuggestionsButton_Click"
                        Margin="0,0,8,0"/>
                <Button x:Name="ActionTranscribeButton"
                        Style="{StaticResource SecondaryButton}"
                        Click="TranscribeDraftButton_Click"
                        Margin="0,0,8,0"
                        ToolTip="{DynamicResource Upload.Tooltip.TranscribeVideo}">
                  <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="ActionTranscribeDraftIcon"
                               Style="{StaticResource IconL}"
                               Text="&#xe048;"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,6,0"/>
                    <TextBlock x:Name="ActionTranscribeDraftLabel"
                               Text="{DynamicResource Upload.Fields.Transcripe}"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               VerticalAlignment="Center"/>
                  </StackPanel>
                </Button>
                <Border Width="1"
                        Height="28"
                        Background="{StaticResource BorderBrush}"
                        Margin="4,0,12,0"
                        VerticalAlignment="Center"/>
                <ComboBox x:Name="PresetComboBox"
                          Width="220"
                          DisplayMemberPath="Name"
                          ToolTip="{DynamicResource Upload.Tooltip.Preset}"
                          SelectionChanged="PresetComboBox_SelectionChanged"/>
                <Button x:Name="ApplyPresetButton"
                        Style="{StaticResource SecondaryButton}"
                        ap:ButtonIcon.Glyph="&#xe5ca;"
                        Content="{DynamicResource Upload.Actions.ApplyPreset}"
                        Click="ApplyPresetButton_Click"
                        Margin="8,0,0,0"/>
              </StackPanel>
              <TextBlock Grid.Column="1"
                         Text="{DynamicResource Section.Upload.Actions}"
                         FontSize="{StaticResource FontSizeS}"
                         Foreground="{StaticResource TextMutedBrush}"
                         VerticalAlignment="Center"/>
            </Grid>
          </Border>
      </Grid>
      </ContentControl>


    <!-- ZWEI-SPALTEN-LAYOUT -->
        <Grid x:Name="MainContentGrid"
              Grid.Row="3"
              Visibility="Collapsed">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"
                              MinWidth="350"/>
            <ColumnDefinition Width="{StaticResource SpacingL}"/>
            <ColumnDefinition Width="*"
                              MinWidth="300"
                              MaxWidth="400"/>
          </Grid.ColumnDefinitions>

          <!-- LINKE SPALTE -->
          <Grid x:Name="LeftColumnPanel"
                Grid.Column="0">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingS}"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingS}"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingS}"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="{StaticResource SpacingS}"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0"
                       Text="{DynamicResource Section.Metadata}"
                       Style="{StaticResource SectionHeader}"
                       Margin="0,0,0,8"/>

            <!-- Titel -->
            <GroupBox Grid.Row="2"
                      Tag="{Binding ElementName=TitleTextBox}"
                      Header="{DynamicResource Upload.Fields.Title}"
                      PreviewMouseDown="FocusTargetOnContainerClick">
              <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>

                  <TextBox x:Name="TitleTextBox"
                           Grid.Row="2"
                           Grid.Column="0"
                           Grid.ColumnSpan="2"
                           TextChanged="TitleTextBox_TextChanged"/>
                  <Button x:Name="GenerateTitleButton"
                          Grid.Row="4"
                          Grid.Column="0"
                          Style="{StaticResource SecondaryButton}"
                          ap:ButtonIcon.Glyph="&#xe663;"
                          Content="{DynamicResource Upload.Fields.Suggest}"
                          Click="GenerateTitleButton_Click"
                          ToolTip="{DynamicResource Upload.Tooltip.GenerateSuggestion}"
                          BorderBrush="{StaticResource MagicAIGradientBrush}"/>

                  <Border x:Name="TitleSuggestionsPanel"
                          Grid.Row="5"
                          Grid.Column="0"
                          Grid.ColumnSpan="2"
                          Margin="0,8,0,0"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="0,1,0,0"
                          Padding="0,8,0,0"
                          Visibility="Collapsed">
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>
                      <DockPanel Grid.Row="0"
                                 LastChildFill="False">
                        <TextBlock Text="{DynamicResource Upload.Suggestions.Header}"
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="TitleSuggestionsTargetTextBlock"
                                   Text=""
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center"/>
                        <Button x:Name="TitleSuggestionsCloseButton"
                                DockPanel.Dock="Right"
                                Style="{StaticResource SuggestionCloseButtonStyle}"
                                Click="SuggestionCloseButton_Click"
                                Margin="8,0,0,0">
                          <TextBlock Style="{StaticResource IconL}"
                                     Text="&#xe5cd;"
                                     Margin="0"
                                     Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                        </Button>
                      </DockPanel>
                      <Grid Grid.Row="2">
                        <StackPanel x:Name="TitleSuggestionsLoadingPanel"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Visibility="Collapsed">
                          <TextBlock Style="{StaticResource IconXL}"
                                     Text="&#xe863;"
                                     Margin="0,0,6,0"
                                     RenderTransformOrigin="0.5,0.5">
                            <TextBlock.RenderTransform>
                              <RotateTransform Angle="0"/>
                            </TextBlock.RenderTransform>
                            <TextBlock.Triggers>
                              <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                  <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                                                     From="0"
                                                     To="360"
                                                     Duration="0:0:1.2"/>
                                  </Storyboard>
                                </BeginStoryboard>
                              </EventTrigger>
                            </TextBlock.Triggers>
                          </TextBlock>
                          <TextBlock Text="{DynamicResource Upload.Suggestions.Loading}"
                                     FontSize="{StaticResource FontSizeS}"
                                     Foreground="{StaticResource TextMutedBrush}"/>
                        </StackPanel>
                        <ItemsControl x:Name="TitleSuggestionItemsControl"
                                      Visibility="Collapsed">
                          <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                              <StackPanel/>
                            </ItemsPanelTemplate>
                          </ItemsControl.ItemsPanel>
                          <ItemsControl.ItemTemplate>
                            <DataTemplate>
                              <Button Style="{StaticResource SuggestionItemButtonStyle}"
                                      Margin="0,0,0,8"
                                      ap:ButtonIcon.Glyph="&#xe8f4;"
                                      Click="SuggestionItemButton_Click"
                                      HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding}"
                                           TextWrapping="Wrap"
                                           TextTrimming="CharacterEllipsis"/>
                              </Button>
                            </DataTemplate>
                          </ItemsControl.ItemTemplate>
                        </ItemsControl>
                      </Grid>
                    </Grid>
                  </Border>
              </Grid>
            </GroupBox>

            <!-- Beschreibung -->
            <GroupBox Grid.Row="4"
                      Tag="{Binding ElementName=DescriptionTextBox}"
                      Header="{DynamicResource Upload.Fields.Description}"
                      PreviewMouseDown="FocusTargetOnContainerClick">
              <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <TextBox x:Name="DescriptionTextBox"
                           Grid.Row="0"
                           AcceptsReturn="True"
                           VerticalScrollBarVisibility="Auto"
                           TextWrapping="Wrap"
                           TextChanged="DescriptionTextBox_TextChanged"
                           MinHeight="140"/>

                  <!-- Buttons -->
                  <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="Auto"/>
                      <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                  <Button x:Name="GenerateDescriptionButton"
                          Grid.Column="0"
                          Style="{StaticResource SecondaryButton}"
                          ap:ButtonIcon.Glyph="&#xe663;"
                          Content="{DynamicResource Upload.Fields.Suggest}"
                          Click="GenerateDescriptionButton_Click"
                          ToolTip="{DynamicResource Upload.Tooltip.GenerateSuggestion}"
                          BorderBrush="{StaticResource MagicAIGradientBrush}"/>
                  </Grid>

                  <Border x:Name="DescriptionSuggestionsPanel"
                          Grid.Row="3"
                          Margin="0,8,0,0"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="0,1,0,0"
                          Padding="0,8,0,0"
                          Visibility="Collapsed">
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>
                      <DockPanel Grid.Row="0"
                                 LastChildFill="False">
                        <TextBlock Text="{DynamicResource Upload.Suggestions.Header}"
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="DescriptionSuggestionsTargetTextBlock"
                                   Text=""
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center"/>
                        <Button x:Name="DescriptionSuggestionsCloseButton"
                                DockPanel.Dock="Right"
                                Style="{StaticResource SuggestionCloseButtonStyle}"
                                Click="SuggestionCloseButton_Click"
                                Margin="8,0,0,0">
                          <TextBlock Style="{StaticResource IconL}"
                                     Text="&#xe5cd;"
                                     Margin="0"
                                     Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                        </Button>
                      </DockPanel>
                      <Grid Grid.Row="2">
                        <StackPanel x:Name="DescriptionSuggestionsLoadingPanel"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Visibility="Collapsed">
                          <TextBlock Style="{StaticResource IconXL}"
                                     Text="&#xe863;"
                                     Margin="0,0,6,0"
                                     RenderTransformOrigin="0.5,0.5">
                            <TextBlock.RenderTransform>
                              <RotateTransform Angle="0"/>
                            </TextBlock.RenderTransform>
                            <TextBlock.Triggers>
                              <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                  <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                                                     From="0"
                                                     To="360"
                                                     Duration="0:0:1.2"/>
                                  </Storyboard>
                                </BeginStoryboard>
                              </EventTrigger>
                            </TextBlock.Triggers>
                          </TextBlock>
                          <TextBlock Text="{DynamicResource Upload.Suggestions.Loading}"
                                     FontSize="{StaticResource FontSizeS}"
                                     Foreground="{StaticResource TextMutedBrush}"/>
                        </StackPanel>
                        <ItemsControl x:Name="DescriptionSuggestionItemsControl"
                                      Visibility="Collapsed">
                          <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                              <StackPanel/>
                            </ItemsPanelTemplate>
                          </ItemsControl.ItemsPanel>
                          <ItemsControl.ItemTemplate>
                            <DataTemplate>
                              <Button Style="{StaticResource SuggestionItemButtonStyle}"
                                      Margin="0,0,0,8"
                                      ap:ButtonIcon.Glyph="&#xe8f4;"
                                      Click="SuggestionItemButton_Click"
                                      HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding}"
                                           TextWrapping="Wrap"
                                           TextTrimming="CharacterEllipsis"/>
                              </Button>
                            </DataTemplate>
                          </ItemsControl.ItemTemplate>
                        </ItemsControl>
                      </Grid>
                    </Grid>
                  </Border>
              </Grid>
            </GroupBox>

            <!-- Tags -->
            <GroupBox Grid.Row="6"
                      Tag="{Binding ElementName=TagInputTextBox}"
                      Header="{DynamicResource Upload.Fields.Tags}"
                      PreviewMouseDown="FocusTargetOnContainerClick">
              <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>

                  <Border x:Name="TagsInputBorder"
                          Grid.Row="0"
                          Grid.Column="0"
                          Grid.ColumnSpan="2"
                          Background="{StaticResource InputBackgroundBrush}"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="1"
                          CornerRadius="{StaticResource RadiusS}"
                          Padding="8,6"
                          ToolTip="{DynamicResource Upload.Tooltip.TagsInput}"
                          MouseDown="TagsInputBorder_MouseDown">
                    <WrapPanel>
                      <ItemsControl x:Name="TagsChipItemsControl">
                        <ItemsControl.ItemsPanel>
                          <ItemsPanelTemplate>
                            <WrapPanel/>
                          </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                          <DataTemplate>
                            <Border Background="{StaticResource SurfaceSunkenBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="{StaticResource RadiusS}"
                                    Padding="6,2"
                                    Margin="0,0,6,6">
                              <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding}"
                                           FontSize="{StaticResource FontSizeS}"
                                           Foreground="{StaticResource TextPrimaryBrush}"
                                           VerticalAlignment="Center"/>
                                <Button Style="{StaticResource TagChipRemoveButton}"
                                        Tag="{Binding}"
                                        Click="TagChipRemoveButton_Click"
                                        Margin="6,0,0,0">
                                  <TextBlock Text="&#xe5cd;"
                                             FontFamily="{StaticResource MaterialIconsFont}"/>
                                </Button>
                              </StackPanel>
                            </Border>
                          </DataTemplate>
                        </ItemsControl.ItemTemplate>
                      </ItemsControl>
                      <TextBox x:Name="TagInputTextBox"
                               MinWidth="120"
                               Background="Transparent"
                               BorderThickness="0"
                               Padding="0"
                               VerticalAlignment="Center"
                               TextChanged="TagInputTextBox_TextChanged"
                               PreviewKeyDown="TagInputTextBox_PreviewKeyDown"
                               LostFocus="TagInputTextBox_LostFocus"/>
                    </WrapPanel>
                  </Border>
                  <TextBox x:Name="TagsTextBox"
                           Grid.Row="0"
                           Grid.Column="0"
                           Grid.ColumnSpan="2"
                           Visibility="Collapsed"
                           TextChanged="TagsTextBox_TextChanged"/>
                  <Button x:Name="GenerateTagsButton"
                          Grid.Row="2"
                          Grid.Column="0"
                          Style="{StaticResource SecondaryButton}"
                          ap:ButtonIcon.Glyph="&#xe663;"
                          Content="{DynamicResource Upload.Fields.Suggest}"
                          Click="GenerateTagsButton_Click"
                          ToolTip="{DynamicResource Upload.Tooltip.GenerateSuggestion}"
                          BorderBrush="{StaticResource MagicAIGradientBrush}"/>

                  <Border x:Name="TagsSuggestionsPanel"
                          Grid.Row="3"
                          Grid.Column="0"
                          Grid.ColumnSpan="2"
                          Margin="0,8,0,0"
                          BorderBrush="{StaticResource BorderBrush}"
                          BorderThickness="0,1,0,0"
                          Padding="0,8,0,0"
                          Visibility="Collapsed">
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="{StaticResource SpacingS}"/>
                        <RowDefinition Height="Auto"/>
                      </Grid.RowDefinitions>
                      <DockPanel Grid.Row="0"
                                 LastChildFill="False">
                        <TextBlock Text="{DynamicResource Upload.Suggestions.Header}"
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="TagsSuggestionsTargetTextBlock"
                                   Text=""
                                   FontSize="{StaticResource FontSizeS}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="6,0,0,0"
                                   VerticalAlignment="Center"/>
                        <Button x:Name="TagsSuggestionsCloseButton"
                                DockPanel.Dock="Right"
                                Style="{StaticResource SuggestionCloseButtonStyle}"
                                Click="SuggestionCloseButton_Click"
                                Margin="8,0,0,0">
                          <TextBlock Style="{StaticResource IconL}"
                                     Text="&#xe5cd;"
                                     Margin="0"
                                     Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                        </Button>
                      </DockPanel>
                      <Grid Grid.Row="2">
                        <StackPanel x:Name="TagsSuggestionsLoadingPanel"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Visibility="Collapsed">
                          <TextBlock Style="{StaticResource IconXL}"
                                     Text="&#xe863;"
                                     Margin="0,0,6,0"
                                     RenderTransformOrigin="0.5,0.5">
                            <TextBlock.RenderTransform>
                              <RotateTransform Angle="0"/>
                            </TextBlock.RenderTransform>
                            <TextBlock.Triggers>
                              <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                  <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                                                     From="0"
                                                     To="360"
                                                     Duration="0:0:1.2"/>
                                  </Storyboard>
                                </BeginStoryboard>
                              </EventTrigger>
                            </TextBlock.Triggers>
                          </TextBlock>
                          <TextBlock Text="{DynamicResource Upload.Suggestions.Loading}"
                                     FontSize="{StaticResource FontSizeS}"
                                     Foreground="{StaticResource TextMutedBrush}"/>
                        </StackPanel>
                        <ItemsControl x:Name="TagsSuggestionItemsControl"
                                      Visibility="Collapsed">
                          <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                              <StackPanel/>
                            </ItemsPanelTemplate>
                          </ItemsControl.ItemsPanel>
                          <ItemsControl.ItemTemplate>
                            <DataTemplate>
                              <Button Style="{StaticResource SuggestionItemButtonStyle}"
                                      Margin="0,0,0,8"
                                      ap:ButtonIcon.Glyph="&#xe8f4;"
                                      Click="SuggestionItemButton_Click"
                                      HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding}"
                                           TextWrapping="Wrap"
                                           TextTrimming="CharacterEllipsis"/>
                              </Button>
                            </DataTemplate>
                          </ItemsControl.ItemTemplate>
                        </ItemsControl>
                      </Grid>
                    </Grid>
                  </Border>
              </Grid>
            </GroupBox>

            <!-- Transkript -->
            <GroupBox Grid.Row="8"
                      Tag="{Binding ElementName=TranscriptTextBox}"
                      Header="{DynamicResource Upload.Fields.Transcription}"
                      PreviewMouseDown="FocusTargetOnContainerClick">
              <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingS}"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <TextBlock Grid.Row="0"
                             Text="{DynamicResource Upload.Fields.Transcription.Descr}"
                             FontSize="{StaticResource FontSizeS}"
                             Foreground="{StaticResource TextMutedBrush}"/>

                  <TextBox x:Name="TranscriptTextBox"
                           Grid.Row="2"
                           AcceptsReturn="True"
                           VerticalScrollBarVisibility="Auto"
                           TextWrapping="Wrap"
                           MinHeight="140"
                           MaxHeight="320"
                           TextChanged="TranscriptTextBox_TextChanged"/>

                  <!-- Transkription Controls -->
                  <Grid Grid.Row="4">
                    <Grid.RowDefinitions>
                      <RowDefinition Height="Auto"/>
                      <RowDefinition Height="{StaticResource SpacingS}"/>
                      <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="Auto"/>
                      <!-- Transkribieren -->
                      <ColumnDefinition Width="Auto"/>
                      <!-- Export -->
                      <ColumnDefinition Width="Auto"/>
                      <!-- Kapitel -->
                      <ColumnDefinition Width="*"/>
                      <!-- Progress -->
                    </Grid.ColumnDefinitions>

                    <Button x:Name="TranscribeButton"
                            Grid.Row="0"
                            Grid.Column="0"
                            Click="TranscribeButton_Click"
                            IsEnabled="False"
                            Tag="default"
                            ToolTip="{DynamicResource Upload.Tooltip.TranscribeVideo}">
                      <Button.Style>
                        <Style TargetType="Button"
                               BasedOn="{StaticResource SecondaryButton}">
                          <!-- Default State -->
                          <Setter Property="Content"
                                  Value="{DynamicResource Upload.Fields.Transcripe}"/>
                          <Setter Property="ap:ButtonIcon.Glyph"
                                  Value="&#xe048;"/>
                          <!-- Active State -->
                          <Style.Triggers>
                            <Trigger Property="Tag"
                                     Value="active">
                              <Setter Property="Content"
                                      Value="{DynamicResource Common.Cancel}"/>
                              <Setter Property="ap:ButtonIcon.Glyph"
                                      Value="&#xe5c9;"/>
                            </Trigger>
                          </Style.Triggers>
                        </Style>
                      </Button.Style>
                    </Button>

                    <Button x:Name="TranscriptionExportButton"
                            Grid.Row="0"
                            Grid.Column="1"
                            Style="{StaticResource SecondaryButton}"
                            ap:ButtonIcon.Glyph="&#xe2c4;"
                            Click="TranscriptionExportButton_Click"
                            ToolTip="{DynamicResource Upload.Tooltip.ExportTranscript}"
                            Margin="8,0,0,0"
                            Content="{DynamicResource Common.Export}"/>

                    <Button x:Name="GenerateChaptersButton"
                            Grid.Row="0"
                            Grid.Column="2"
                            Click="GenerateChaptersButton_Click"
                            Tag="default"
                            ToolTip="{DynamicResource Upload.Fields.Chapters.Generate}"
                            Margin="8,0,0,0">
                      <Button.Style>
                        <Style TargetType="Button"
                               BasedOn="{StaticResource SecondaryButton}">
                          <Setter Property="Content"
                                  Value="{DynamicResource Upload.Fields.Chapters.Generate}"/>
                          <Setter Property="ap:ButtonIcon.Glyph"
                                  Value="&#xe663;"/>
                          <Style.Triggers>
                            <Trigger Property="Tag"
                                     Value="active">
                              <Setter Property="Content"
                                      Value="{DynamicResource Common.Cancel}"/>
                              <Setter Property="ap:ButtonIcon.Glyph"
                                      Value="&#xe5c9;"/>
                            </Trigger>
                          </Style.Triggers>
                        </Style>
                      </Button.Style>
                    </Button>

                    <ProgressBar x:Name="TranscriptionProgressBar"
                                 Grid.Row="0"
                                 Grid.Column="3"
                                 Height="20"
                                 Margin="{StaticResource SpacingHorizontalM}"
                                 Minimum="0"
                                 Maximum="100"
                                 Value="0"
                                 Visibility="Collapsed"/>

                    <TextBlock x:Name="TranscriptionPhaseTextBlock"
                               Grid.Row="2"
                               Grid.Column="0"
                               Grid.ColumnSpan="4"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               Visibility="Collapsed"/>
                  </Grid>

                  <Border Grid.Row="5"
                          Height="1"
                          Background="{StaticResource BorderBrush}"
                          Margin="-8,12,-8,12"
                          HorizontalAlignment="Stretch"
                          SnapsToDevicePixels="True"/>

                  <StackPanel Grid.Row="7">
                    <TextBlock Text="{DynamicResource Upload.Fields.Chapters}"
                               FontSize="{StaticResource FontSizeS}"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TextBlock Text="{DynamicResource Upload.Fields.Chapters.Descr}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,2,0,0"/>
                  </StackPanel>

                  <TextBox x:Name="ChaptersTextBox"
                           Grid.Row="9"
                           AcceptsReturn="True"
                           VerticalScrollBarVisibility="Auto"
                           TextWrapping="Wrap"
                           MinHeight="110"
                           ToolTip="{DynamicResource Upload.Fields.Chapters.ToolTip}"
                           TextChanged="ChaptersTextBox_TextChanged"/>
              </Grid>
            </GroupBox>

          </Grid>

          <!-- RECHTE SPALTE -->
          <StackPanel Grid.Column="2">
            <TextBlock Text="{DynamicResource Section.Publishing}"
                       Style="{StaticResource SectionHeader}"
                       Margin="0,0,0,8"/>

            <Border Style="{StaticResource UploadSectionCard}">
              <StackPanel>
                <TextBlock Text="{DynamicResource Upload.Fields.Thumbnail}"
                           Style="{StaticResource UploadSectionHeader}"/>
                <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingM}"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <!-- Thumbnail Vorschau / Drop Zone -->
                  <Viewbox Stretch="Uniform"
                           HorizontalAlignment="Left"
                           StretchDirection="Both">
                    <ContentControl x:Name="ThumbnailDropZone"
                                    Grid.Row="0"
                                    Width="320"
                                    Height="180"
                                    ClipToBounds="True"
                                    Style="{StaticResource ThumbnailDropZoneStyle}"
                                    DragOver="ThumbnailDrop_DragOver"
                                    DragLeave="ThumbnailDrop_DragLeave"
                                    Drop="ThumbnailDrop_Drop"
                                    MouseLeftButtonDown="ThumbnailDropZone_Click">
                      <Grid>
                        <!-- Leerer Zustand -->
                        <Grid x:Name="ThumbnailEmptyState"
                              Visibility="Visible">
                          <StackPanel HorizontalAlignment="Center"
                                      VerticalAlignment="Center">
                            <TextBlock Style="{StaticResource IconXXL}"
                                       Text="&#xe40b;"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,8"/>
                            <TextBlock Text="{DynamicResource Upload.Fields.Thumbnail.DropZone}"
                                       FontSize="{StaticResource FontSizeM}"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="{DynamicResource Upload.Fields.Thumbnail.DropZone.Descr}"
                                       FontSize="{StaticResource FontSizeS}"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       HorizontalAlignment="Center"
                                       Margin="0,2,0,0"/>
                            <TextBlock Text="{DynamicResource Upload.Fields.Thumbnail.DropZone.AllowedFiles}"
                                       FontSize="{StaticResource FontSizeXS}"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       HorizontalAlignment="Center"
                                       Margin="0,8,0,0"/>
                          </StackPanel>
                        </Grid>

                        <!-- Vorschau Zustand -->
                        <Grid x:Name="ThumbnailPreviewState"
                              Visibility="Collapsed">
                          <Image x:Name="ThumbnailPreviewImage"
                                 Stretch="Uniform"/>
                          <Border x:Name="ThumbnailOverlay"
                                  Background="{StaticResource OverlayDimBrush}"
                                  Opacity="0">
                            <StackPanel HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                              <TextBlock Text="{DynamicResource Upload.Fields.Thumbnail.Change}"
                                         Foreground="White"
                                         FontSize="{StaticResource FontSizeM}"
                                         HorizontalAlignment="Center"/>
                            </StackPanel>
                          </Border>
                        </Grid>
                      </Grid>
                    </ContentControl>
                  </Viewbox>

                  <!-- Thumbnail Aktionen -->
                  <StackPanel Grid.Row="2"
                              Orientation="Horizontal"
                              Visibility="{Binding Visibility, ElementName=ThumbnailPreviewState}">
                    <TextBlock x:Name="ThumbnailFileNameTextBlock"
                               FontSize="{StaticResource FontSizeS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               VerticalAlignment="Center"
                               Margin="{StaticResource SpacingHorizontalM}"
                               MaxWidth="200"
                               TextTrimming="CharacterEllipsis"/>
                    <Button x:Name="ThumbnailClearButton"
                            Content="{DynamicResource Common.Remove}"
                            Style="{StaticResource SecondaryButton}"
                            ap:ButtonIcon.Glyph="&#xe872;"
                            Click="ThumbnailClearButton_Click"
                            Padding="8,8"
                            FontSize="{StaticResource FontSizeS}"/>
                  </StackPanel>

                  <TextBox x:Name="ThumbnailPathTextBox"
                           Visibility="Collapsed"/>
                </Grid>
              </StackPanel>
            </Border>

            <Border Style="{StaticResource UploadSectionCard}">
              <StackPanel>
                <TextBlock Text="{DynamicResource Section.Upload.VisibilityPlanning}"
                           Style="{StaticResource UploadSectionHeader}"/>
                <TextBlock Text="{DynamicResource Upload.Fields.Paylists}"
                           Style="{StaticResource UploadSectionTitle}"/>
                <ComboBox x:Name="PlaylistComboBox"
                          DisplayMemberPath="Title"
                          ToolTip="{DynamicResource Upload.Tooltip.Playlist}"
                          SelectionChanged="PlaylistComboBox_SelectionChanged"/>
                <Border Height="1"
                        Background="{StaticResource BorderBrush}"
                        Margin="-14,12,-14,12"
                        HorizontalAlignment="Stretch"
                        SnapsToDevicePixels="True"/>

                <TextBlock Text="{DynamicResource Upload.Fields.Visibility}"
                           Style="{StaticResource UploadSectionTitle}"/>
                <ComboBox x:Name="VisibilityComboBox"
                          SelectionChanged="VisibilityComboBox_SelectionChanged">
                  <ComboBoxItem Content="{DynamicResource Upload.Fields.Visibility.Public}"
                                Tag="{x:Static core:VideoVisibility.Public}"/>
                  <ComboBoxItem Content="{DynamicResource Upload.Fields.Visibility.Unlisted}"
                                Tag="{x:Static core:VideoVisibility.Unlisted}"
                                IsSelected="True"/>
                  <ComboBoxItem Content="{DynamicResource Upload.Fields.Visibility.Private}"
                                Tag="{x:Static core:VideoVisibility.Private}"/>
                </ComboBox>
                <Border Height="1"
                        Background="{StaticResource BorderBrush}"
                        Margin="-14,12,-14,12"
                        HorizontalAlignment="Stretch"
                        SnapsToDevicePixels="True"/>

                <TextBlock Text="{DynamicResource Upload.Fields.Publication}"
                           Style="{StaticResource UploadSectionTitle}"/>
                <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingS}"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>

                  <CheckBox x:Name="ScheduleCheckBox"
                            Grid.Row="0"
                            Content="{DynamicResource Upload.Fields.Publication.Plan}"
                            Checked="ScheduleCheckBox_Checked"
                            Unchecked="ScheduleCheckBox_Unchecked"
                            IsChecked="True"/>
                  <Grid Grid.Row="2"
                        IsEnabled="{Binding IsChecked, ElementName=ScheduleCheckBox}">
                    <Grid.RowDefinitions>
                      <RowDefinition Height="Auto"/>
                      <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="*"/>
                      <ColumnDefinition Width="{StaticResource SpacingM}"/>
                      <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0"
                               Grid.Column="0"
                               Text="{DynamicResource Upload.Fields.Publication.Date}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,0,0,6"/>
                    <TextBlock Grid.Row="0"
                               Grid.Column="2"
                               Text="{DynamicResource Upload.Fields.Publication.Time}"
                               FontSize="{StaticResource FontSizeXS}"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,0,0,6"/>
                    <Border x:Name="ScheduleCalendarBox"
                            Grid.Row="1"
                            Grid.Column="0"
                            Background="{StaticResource SurfaceSunkenBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="1"
                            CornerRadius="{StaticResource RadiusS}"
                            Padding="0">
                      <Grid>
                        <Grid.RowDefinitions>
                          <RowDefinition Height="*"/>
                          <RowDefinition Height="24"/>
                        </Grid.RowDefinitions>
                        <Calendar x:Name="ScheduleCalendar"
                                  Grid.Row="0"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Top"
                                  Background="Transparent"
                                  Foreground="{StaticResource TextPrimaryBrush}"
                                  BorderThickness="0"
                                  FontSize="{StaticResource FontSizeS}"
                                  SelectedDate="{Binding SelectedDate, ElementName=ScheduleDatePicker, Mode=TwoWay}"
                                  DisplayDate="{Binding SelectedDate, ElementName=ScheduleDatePicker, Mode=TwoWay}"
                                  FirstDayOfWeek="Monday"/>
                        <TextBlock Grid.Row="1"
                                   Margin="8,0,0,0"
                                   HorizontalAlignment="Left"
                                   VerticalAlignment="Center">
                          <Hyperlink Click="ScheduleTodayLink_Click">
                            <Run Text="{DynamicResource Upload.Fields.Publication.Today}"/>
                          </Hyperlink>
                        </TextBlock>
                      </Grid>
                    </Border>
                    <Border Grid.Row="1"
                            Grid.Column="2"
                            Background="{StaticResource SurfaceSunkenBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="1"
                            CornerRadius="{StaticResource RadiusS}"
                            Padding="6"
                            VerticalAlignment="Stretch"
                            Height="{Binding ElementName=ScheduleCalendarBox, Path=ActualHeight}">
                      <Grid>
                        <Grid.RowDefinitions>
                          <RowDefinition Height="*"/>
                          <RowDefinition Height="24"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                          <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="Auto"/>
                          </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                          <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0"
                                   Grid.Column="0"
                                   Text="{DynamicResource Upload.Fields.Publication.HourShort}"
                                   FontSize="{StaticResource FontSizeM}"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,8"/>
                        <TextBlock Grid.Row="0"
                                   Grid.Column="2"
                                   Text="{DynamicResource Upload.Fields.Publication.MinuteShort}"
                                   FontSize="{StaticResource FontSizeM}"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,8"/>

                        <Button x:Name="HourUpButton"
                                Grid.Row="1"
                                Grid.Column="0"
                                Click="HourUpButton_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                Height="22"
                                Cursor="Hand">
                          <TextBlock Text="&#xe316;"
                                     FontFamily="{StaticResource MaterialIconsFont}"
                                     FontSize="18"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     HorizontalAlignment="Center"/>
                        </Button>
                        <Button x:Name="MinuteUpButton"
                                Grid.Row="1"
                                Grid.Column="2"
                                Click="MinuteUpButton_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                Height="22"
                                Cursor="Hand">
                          <TextBlock Text="&#xe316;"
                                     FontFamily="{StaticResource MaterialIconsFont}"
                                     FontSize="18"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     HorizontalAlignment="Center"/>
                        </Button>

                        <Button x:Name="ScheduleHourRow0"
                                Grid.Row="2"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow0"
                                Grid.Row="2"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="ScheduleHourRow1"
                                Grid.Row="3"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow1"
                                Grid.Row="3"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="ScheduleHourRow2"
                                Grid.Row="4"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="4" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow2"
                                Grid.Row="4"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="ScheduleHourRow3"
                                Grid.Row="5"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="5" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow3"
                                Grid.Row="5"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="ScheduleHourRow4"
                                Grid.Row="6"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="6" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow4"
                                Grid.Row="6"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="ScheduleHourRow5"
                                Grid.Row="7"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="7" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow5"
                                Grid.Row="7"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="ScheduleHourRow6"
                                Grid.Row="8"
                                Grid.Column="0"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleHourRow_Click"
                                Margin="0,2"/>
                        <TextBlock Grid.Row="8" Grid.Column="1" Style="{StaticResource ScheduleTimeColon}" Margin="0,2"/>
                        <Button x:Name="ScheduleMinuteRow6"
                                Grid.Row="8"
                                Grid.Column="2"
                                Style="{StaticResource ScheduleTimeRowButton}"
                                Click="ScheduleMinuteRow_Click"
                                Margin="0,2"/>

                        <Button x:Name="HourDownButton"
                                Grid.Row="9"
                                Grid.Column="0"
                                Click="HourDownButton_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                Height="22"
                                Cursor="Hand">
                          <TextBlock Text="&#xe313;"
                                     FontFamily="{StaticResource MaterialIconsFont}"
                                     FontSize="18"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     HorizontalAlignment="Center"/>
                        </Button>
                        <Button x:Name="MinuteDownButton"
                                Grid.Row="9"
                                Grid.Column="2"
                                Click="MinuteDownButton_Click"
                                Background="Transparent"
                                BorderThickness="0"
                                Height="22"
                                Cursor="Hand">
                          <TextBlock Text="&#xe313;"
                                     FontFamily="{StaticResource MaterialIconsFont}"
                                     FontSize="18"
                                     Foreground="{StaticResource TextSecondaryBrush}"
                                     HorizontalAlignment="Center"/>
                        </Button>
                        </Grid>
                        <TextBlock Grid.Row="1"
                                   Margin="8,0,0,0"
                                   HorizontalAlignment="Left"
                                   VerticalAlignment="Center">
                          <Hyperlink Click="ScheduleNowLink_Click">
                            <Run Text="{DynamicResource Upload.Fields.Publication.Now}"/>
                          </Hyperlink>
                        </TextBlock>
                      </Grid>
                    </Border>
                  </Grid>
                </Grid>
                <DatePicker x:Name="ScheduleDatePicker"
                            Visibility="Collapsed"
                            SelectedDateFormat="Short"
                            SelectedDateChanged="ScheduleDatePicker_SelectedDateChanged"
                            FirstDayOfWeek="Monday"/>
                <TextBox x:Name="ScheduleTimeTextBox"
                         Visibility="Collapsed"
                         TextChanged="ScheduleTimeTextBox_TextChanged"/>
              </StackPanel>
            </Border>

            <Border Style="{StaticResource UploadSectionCard}">
              <StackPanel>
                <TextBlock Text="{DynamicResource Upload.Fields.Metadata}"
                           Style="{StaticResource UploadSectionHeader}"/>
                <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingS}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingS}"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="{StaticResource SpacingS}"/>
                    <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="{StaticResource SpacingM}"/>
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>

                  <TextBlock Grid.Row="0"
                             Grid.Column="0"
                             Text="{DynamicResource Upload.Fields.Category}"
                             VerticalAlignment="Center"
                             Foreground="{StaticResource TextSecondaryBrush}"/>
                  <ComboBox x:Name="CategoryComboBox"
                            Grid.Row="0"
                            Grid.Column="2"
                            DisplayMemberPath="DisplayName"
                            SelectionChanged="CategoryComboBox_SelectionChanged"/>

                  <TextBlock Grid.Row="2"
                             Grid.Column="0"
                             Text="{DynamicResource Upload.Fields.Language}"
                             VerticalAlignment="Center"
                             Foreground="{StaticResource TextSecondaryBrush}"/>
                  <ComboBox x:Name="LanguageComboBox"
                            Grid.Row="2"
                            Grid.Column="2"
                            DisplayMemberPath="DisplayName"
                            SelectionChanged="LanguageComboBox_SelectionChanged"/>

                  <TextBlock Grid.Row="4"
                             Grid.Column="0"
                             Text="{DynamicResource Upload.Fields.MadeForKids}"
                             VerticalAlignment="Center"
                             Foreground="{StaticResource TextSecondaryBrush}"/>
                  <ComboBox x:Name="MadeForKidsComboBox"
                            Grid.Row="4"
                            Grid.Column="2"
                            SelectionChanged="MadeForKidsComboBox_SelectionChanged">
                    <ComboBoxItem Content="{DynamicResource Upload.Fields.MadeForKids.Default}"
                                  Tag="{x:Static core:MadeForKidsSetting.Default}"
                                  IsSelected="True"/>
                    <ComboBoxItem Content="{DynamicResource Upload.Fields.MadeForKids.Yes}"
                                  Tag="{x:Static core:MadeForKidsSetting.Yes}"/>
                    <ComboBoxItem Content="{DynamicResource Upload.Fields.MadeForKids.No}"
                                  Tag="{x:Static core:MadeForKidsSetting.No}"/>
                  </ComboBox>

                  <TextBlock Grid.Row="6"
                             Grid.Column="0"
                             Text="{DynamicResource Upload.Fields.CommentStatus}"
                             VerticalAlignment="Center"
                             Foreground="{StaticResource TextSecondaryBrush}"/>
                  <ComboBox x:Name="CommentStatusComboBox"
                            Grid.Row="6"
                            Grid.Column="2"
                            SelectionChanged="CommentStatusComboBox_SelectionChanged">
                    <ComboBoxItem Content="{DynamicResource Upload.Fields.CommentStatus.Default}"
                                  Tag="{x:Static core:CommentStatusSetting.Default}"
                                  IsSelected="True"/>
                    <ComboBoxItem Content="{DynamicResource Upload.Fields.CommentStatus.Enabled}"
                                  Tag="{x:Static core:CommentStatusSetting.Enabled}"/>
                    <ComboBoxItem Content="{DynamicResource Upload.Fields.CommentStatus.Disabled}"
                                  Tag="{x:Static core:CommentStatusSetting.Disabled}"/>
                  </ComboBox>
                </Grid>
              </StackPanel>
            </Border>
          </StackPanel>


        </Grid>
        </Grid>
        </ScrollViewer>
      </Grid>
    </Border>

    <!-- Verstecktes TextBox für Pfad -->
    <TextBox x:Name="VideoPathTextBox"
             Grid.Row="2"
             Visibility="Collapsed"/>
    <!-- Platform selection currently fixed to YouTube -->
    <ToggleButton x:Name="PlatformYouTubeToggle"
                  Grid.Row="2"
                  Visibility="Collapsed"
                  IsChecked="True"
                  Checked="PlatformYouTubeToggle_Checked"
                  Unchecked="PlatformYouTubeToggle_Unchecked"/>
  </Grid>
</UserControl>


